(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PPeerStore = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PPeerStore=(()=>{var eh=Object.create;var fi=Object.defineProperty;var rh=Object.getOwnPropertyDescriptor;var nh=Object.getOwnPropertyNames;var ih=Object.getPrototypeOf,sh=Object.prototype.hasOwnProperty;var U=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Pt=(e,t)=>{for(var r in t)fi(e,r,{get:t[r],enumerable:!0})},a0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nh(t))!sh.call(e,i)&&i!==r&&fi(e,i,{get:()=>t[i],enumerable:!(n=rh(t,i))||n.enumerable});return e};var K=(e,t,r)=>(r=e!=null?eh(ih(e)):{},a0(t||!e||!e.__esModule?fi(r,"default",{value:e,enumerable:!0}):r,e)),ah=e=>a0(fi({},"__esModule",{value:!0}),e);var c0=U((vm,o0)=>{var Fr=1e3,Mr=Fr*60,Vr=Mr*60,pr=Vr*24,oh=pr*7,ch=pr*365.25;o0.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return uh(e);if(r==="number"&&isFinite(e))return t.long?lh(e):fh(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function uh(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ch;case"weeks":case"week":case"w":return r*oh;case"days":case"day":case"d":return r*pr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Vr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Mr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Fr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fh(e){var t=Math.abs(e);return t>=pr?Math.round(e/pr)+"d":t>=Vr?Math.round(e/Vr)+"h":t>=Mr?Math.round(e/Mr)+"m":t>=Fr?Math.round(e/Fr)+"s":e+"ms"}function lh(e){var t=Math.abs(e);return t>=pr?li(e,t,pr,"day"):t>=Vr?li(e,t,Vr,"hour"):t>=Mr?li(e,t,Mr,"minute"):t>=Fr?li(e,t,Fr,"second"):e+" ms"}function li(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var f0=U((wm,u0)=>{function hh(e){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=a,r.humanize=c0(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(f){let l,h=null,y,d;function p(...x){if(!p.enabled)return;let v=p,A=Number(new Date),B=A-(l||A);v.diff=B,v.prev=l,v.curr=A,l=A,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let L=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(_,q)=>{if(_==="%%")return"%";L++;let z=r.formatters[q];if(typeof z=="function"){let Ct=x[L];_=z.call(v,Ct),x.splice(L,1),L--}return _}),r.formatArgs.call(v,x),(v.log||r.log).apply(v,x)}return p.namespace=f,p.useColors=r.useColors(),p.color=r.selectColor(f),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(y!==r.namespaces&&(y=r.namespaces,d=r.enabled(f)),d),set:x=>{h=x}}),typeof r.init=="function"&&r.init(p),p}function n(f,l){let h=r(this.namespace+(typeof l>"u"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),y=h.length;for(l=0;l<y;l++)h[l]&&(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(o),...r.skips.map(o).map(l=>"-"+l)].join(",");return r.enable(""),f}function a(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function o(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}u0.exports=hh});var l0=U((Xt,hi)=>{Xt.formatArgs=ph;Xt.save=yh;Xt.load=gh;Xt.useColors=dh;Xt.storage=mh();Xt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Xt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function dh(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ph(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+hi.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Xt.log=console.debug||console.log||(()=>{});function yh(e){try{e?Xt.storage.setItem("debug",e):Xt.storage.removeItem("debug")}catch{}}function gh(){let e;try{e=Xt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function mh(){try{return localStorage}catch{}}hi.exports=f0()(Xt);var{formatters:xh}=hi.exports;xh.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var bt=U((Pm,v0)=>{"use strict";function x0(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Uh(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return x0(e,r)}catch{r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),x0(new i,r)}}v0.exports=Uh});var H0=U((B2,z0)=>{z0.exports=na;var q0=128,Rd=127,kd=~Rd,Nd=Math.pow(2,31);function na(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw na.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var n=r;e>=Nd;)t[r++]=e&255|q0,e/=128;for(;e&kd;)t[r++]=e&255|q0,e>>>=7;return t[r]=e|0,na.bytes=r-n+1,t}});var Q0=U((C2,W0)=>{W0.exports=ia;var Ld=128,G0=127;function ia(e,n){var r=0,n=n||0,i=0,s=n,a,o=e.length;do{if(s>=o||i>49)throw ia.bytes=0,new RangeError("Could not decode varint");a=e[s++],r+=i<28?(a&G0)<<i:(a&G0)*Math.pow(2,i),i+=7}while(a>=Ld);return ia.bytes=s-n,r}});var Y0=U((_2,$0)=>{var Pd=Math.pow(2,7),Dd=Math.pow(2,14),Ud=Math.pow(2,21),Kd=Math.pow(2,28),Od=Math.pow(2,35),Fd=Math.pow(2,42),Md=Math.pow(2,49),Vd=Math.pow(2,56),qd=Math.pow(2,63);$0.exports=function(e){return e<Pd?1:e<Dd?2:e<Ud?3:e<Kd?4:e<Od?5:e<Fd?6:e<Md?7:e<Vd?8:e<qd?9:10}});var xi=U((T2,Z0)=>{Z0.exports={encode:H0(),decode:Q0(),encodingLength:Y0()}});var uc=U((rx,cc)=>{"use strict";cc.exports=cp;function cp(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(o,c){r[n]=function(f){if(s)if(s=!1,f)c(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];o.apply(null,l)}};try{e.apply(t||null,r)}catch(u){s&&(s=!1,c(u))}})}});var dc=U(hc=>{"use strict";var Ei=hc;Ei.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var Zr=new Array(64),lc=new Array(123);for(he=0;he<64;)lc[Zr[he]=he<26?he+65:he<52?he+71:he<62?he-4:he-59|43]=he++;var he;Ei.encode=function(t,r,n){for(var i=null,s=[],a=0,o=0,c;r<n;){var u=t[r++];switch(o){case 0:s[a++]=Zr[u>>2],c=(u&3)<<4,o=1;break;case 1:s[a++]=Zr[c|u>>4],c=(u&15)<<2,o=2;break;case 2:s[a++]=Zr[c|u>>6],s[a++]=Zr[u&63],o=0;break}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return o&&(s[a++]=Zr[c],s[a++]=61,o===1&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var fc="invalid encoding";Ei.decode=function(t,r,n){for(var i=n,s=0,a,o=0;o<t.length;){var c=t.charCodeAt(o++);if(c===61&&s>1)break;if((c=lc[c])===void 0)throw Error(fc);switch(s){case 0:a=c,s=1;break;case 1:r[n++]=a<<2|(c&48)>>4,a=c,s=2;break;case 2:r[n++]=(a&15)<<4|(c&60)>>2,a=c,s=3;break;case 3:r[n++]=(a&3)<<6|c,s=0;break}}if(s===1)throw Error(fc);return n-i};Ei.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var yc=U((ix,pc)=>{"use strict";pc.exports=Si;function Si(){this._listeners={}}Si.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};Si.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Si.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var Ec=U((sx,bc)=>{"use strict";bc.exports=gc(gc);function gc(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(c,u,f){t[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function s(c,u,f){t[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i;function a(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],t[0]}function o(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],t[0]}e.readFloatLE=n?a:o,e.readFloatBE=n?o:a}():function(){function t(n,i,s,a){var o=i<0?1:0;if(o&&(i=-i),i===0)n(1/i>0?0:2147483648,s,a);else if(isNaN(i))n(2143289344,s,a);else if(i>34028234663852886e22)n((o<<31|2139095040)>>>0,s,a);else if(i<11754943508222875e-54)n((o<<31|Math.round(i/1401298464324817e-60))>>>0,s,a);else{var c=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-c)*8388608)&8388607;n((o<<31|c+127<<23|u)>>>0,s,a)}}e.writeFloatLE=t.bind(null,mc),e.writeFloatBE=t.bind(null,xc);function r(n,i,s){var a=n(i,s),o=(a>>31)*2+1,c=a>>>23&255,u=a&8388607;return c===255?u?NaN:o*(1/0):c===0?o*1401298464324817e-60*u:o*Math.pow(2,c-150)*(u+8388608)}e.readFloatLE=r.bind(null,vc),e.readFloatBE=r.bind(null,wc)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(c,u,f){t[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function s(c,u,f){t[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i;function a(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],t[0]}function o(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],t[0]}e.readDoubleLE=n?a:o,e.readDoubleBE=n?o:a}():function(){function t(n,i,s,a,o,c){var u=a<0?1:0;if(u&&(a=-a),a===0)n(0,o,c+i),n(1/a>0?0:2147483648,o,c+s);else if(isNaN(a))n(0,o,c+i),n(2146959360,o,c+s);else if(a>17976931348623157e292)n(0,o,c+i),n((u<<31|2146435072)>>>0,o,c+s);else{var f;if(a<22250738585072014e-324)f=a/5e-324,n(f>>>0,o,c+i),n((u<<31|f/4294967296)>>>0,o,c+s);else{var l=Math.floor(Math.log(a)/Math.LN2);l===1024&&(l=1023),f=a*Math.pow(2,-l),n(f*4503599627370496>>>0,o,c+i),n((u<<31|l+1023<<20|f*1048576&1048575)>>>0,o,c+s)}}}e.writeDoubleLE=t.bind(null,mc,0,4),e.writeDoubleBE=t.bind(null,xc,4,0);function r(n,i,s,a,o){var c=n(a,o+i),u=n(a,o+s),f=(u>>31)*2+1,l=u>>>20&2047,h=4294967296*(u&1048575)+c;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}e.readDoubleLE=r.bind(null,vc,0,4),e.readDoubleBE=r.bind(null,wc,4,0)}(),e}function mc(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function xc(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function vc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function wc(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var Sc=U((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var Bc=U(Ac=>{"use strict";var ya=Ac;ya.length=function(t){for(var r=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};ya.read=function(t,r,n){var i=n-r;if(i<1)return"";for(var s=null,a=[],o=0,c;r<n;)c=t[r++],c<128?a[o++]=c:c>191&&c<224?a[o++]=(c&31)<<6|t[r++]&63:c>239&&c<365?(c=((c&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,a[o++]=55296+(c>>10),a[o++]=56320+(c&1023)):a[o++]=(c&15)<<12|(t[r++]&63)<<6|t[r++]&63,o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};ya.write=function(t,r,n){for(var i=n,s,a,o=0;o<t.length;++o)s=t.charCodeAt(o),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((a=t.charCodeAt(o+1))&64512)===56320?(s=65536+((s&1023)<<10)+(a&1023),++o,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var _c=U((ox,Cc)=>{"use strict";Cc.exports=up;function up(e,t,r){var n=r||8192,i=n>>>1,s=null,a=n;return function(c){if(c<1||c>i)return e(c);a+c>n&&(s=e(n),a=0);var u=t.call(s,a,a+=c);return a&7&&(a=(a|7)+1),u}}});var Ic=U((cx,Tc)=>{"use strict";Tc.exports=It;var _n=wr();function It(e,t){this.lo=e>>>0,this.hi=t>>>0}var vr=It.zero=new It(0,0);vr.toNumber=function(){return 0};vr.zzEncode=vr.zzDecode=function(){return this};vr.length=function(){return 1};var fp=It.zeroHash="\0\0\0\0\0\0\0\0";It.fromNumber=function(t){if(t===0)return vr;var r=t<0;r&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new It(n,i)};It.from=function(t){if(typeof t=="number")return It.fromNumber(t);if(_n.isString(t))if(_n.Long)t=_n.Long.fromString(t);else return It.fromNumber(parseInt(t,10));return t.low||t.high?new It(t.low>>>0,t.high>>>0):vr};It.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};It.prototype.toLong=function(t){return _n.Long?new _n.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var Je=String.prototype.charCodeAt;It.fromHash=function(t){return t===fp?vr:new It((Je.call(t,0)|Je.call(t,1)<<8|Je.call(t,2)<<16|Je.call(t,3)<<24)>>>0,(Je.call(t,4)|Je.call(t,5)<<8|Je.call(t,6)<<16|Je.call(t,7)<<24)>>>0)};It.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};It.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};It.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};It.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var wr=U(ga=>{"use strict";var N=ga;N.asPromise=uc();N.base64=dc();N.EventEmitter=yc();N.float=Ec();N.inquire=Sc();N.utf8=Bc();N.pool=_c();N.LongBits=Ic();N.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);N.global=N.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||ga;N.emptyArray=Object.freeze?Object.freeze([]):[];N.emptyObject=Object.freeze?Object.freeze({}):{};N.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};N.isString=function(t){return typeof t=="string"||t instanceof String};N.isObject=function(t){return t&&typeof t=="object"};N.isset=N.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};N.Buffer=function(){try{var e=N.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();N._Buffer_from=null;N._Buffer_allocUnsafe=null;N.newBuffer=function(t){return typeof t=="number"?N.Buffer?N._Buffer_allocUnsafe(t):new N.Array(t):N.Buffer?N._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};N.Array=typeof Uint8Array<"u"?Uint8Array:Array;N.Long=N.global.dcodeIO&&N.global.dcodeIO.Long||N.global.Long||N.inquire("long");N.key2Re=/^true|false|0|1$/;N.key32Re=/^-?(?:0|[1-9][0-9]*)$/;N.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;N.longToHash=function(t){return t?N.LongBits.from(t).toHash():N.LongBits.zeroHash};N.longFromHash=function(t,r){var n=N.LongBits.fromHash(t);return N.Long?N.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function Rc(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(e[n[i]]===void 0||!r)&&(e[n[i]]=t[n[i]]);return e}N.merge=Rc;N.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function kc(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Rc(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}N.newError=kc;N.ProtocolError=kc("ProtocolError");N.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};N.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};N.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};N._configure=function(){var e=N.Buffer;if(!e){N._Buffer_from=N._Buffer_allocUnsafe=null;return}N._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},N._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var va=U((fx,Uc)=>{"use strict";Uc.exports=gt;var Ee=wr(),xa,Pc=Ee.LongBits,lp=Ee.utf8;function de(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function gt(e){this.buf=e,this.pos=0,this.len=e.length}var Nc=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new gt(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new gt(t);throw Error("illegal buffer")},Dc=function(){return Ee.Buffer?function(r){return(gt.create=function(i){return Ee.Buffer.isBuffer(i)?new xa(i):Nc(i)})(r)}:Nc};gt.create=Dc();gt.prototype._slice=Ee.Array.prototype.subarray||Ee.Array.prototype.slice;gt.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,de(this,10);return t}}();gt.prototype.int32=function(){return this.uint32()|0};gt.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function ma(){var e=new Pc(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw de(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw de(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}gt.prototype.bool=function(){return this.uint32()!==0};function Ai(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}gt.prototype.fixed32=function(){if(this.pos+4>this.len)throw de(this,4);return Ai(this.buf,this.pos+=4)};gt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw de(this,4);return Ai(this.buf,this.pos+=4)|0};function Lc(){if(this.pos+8>this.len)throw de(this,8);return new Pc(Ai(this.buf,this.pos+=4),Ai(this.buf,this.pos+=4))}gt.prototype.float=function(){if(this.pos+4>this.len)throw de(this,4);var t=Ee.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};gt.prototype.double=function(){if(this.pos+8>this.len)throw de(this,4);var t=Ee.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};gt.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw de(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};gt.prototype.string=function(){var t=this.bytes();return lp.read(t,0,t.length)};gt.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw de(this,t);this.pos+=t}else do if(this.pos>=this.len)throw de(this);while(this.buf[this.pos++]&128);return this};gt.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};gt._configure=function(e){xa=e,gt.create=Dc(),xa._configure();var t=Ee.Long?"toLong":"toNumber";Ee.merge(gt.prototype,{int64:function(){return ma.call(this)[t](!1)},uint64:function(){return ma.call(this)[t](!0)},sint64:function(){return ma.call(this).zzDecode()[t](!1)},fixed64:function(){return Lc.call(this)[t](!0)},sfixed64:function(){return Lc.call(this)[t](!1)}})}});var Mc=U((lx,Fc)=>{"use strict";Fc.exports=br;var Oc=va();(br.prototype=Object.create(Oc.prototype)).constructor=br;var Kc=wr();function br(e){Oc.call(this,e)}br._configure=function(){Kc.Buffer&&(br.prototype._slice=Kc.Buffer.prototype.slice)};br.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};br._configure()});var Ca=U((hx,Hc)=>{"use strict";Hc.exports=$;var ae=wr(),wa,Bi=ae.LongBits,Vc=ae.base64,qc=ae.utf8;function Tn(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function Ea(){}function hp(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function $(){this.len=0,this.head=new Tn(Ea,0,0),this.tail=this.head,this.states=null}var zc=function(){return ae.Buffer?function(){return($.create=function(){return new wa})()}:function(){return new $}};$.create=zc();$.alloc=function(t){return new ae.Array(t)};ae.Array!==Array&&($.alloc=ae.pool($.alloc,ae.Array.prototype.subarray));$.prototype._push=function(t,r,n){return this.tail=this.tail.next=new Tn(t,r,n),this.len+=r,this};function Sa(e,t,r){t[r]=e&255}function dp(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function Aa(e,t){this.len=e,this.next=void 0,this.val=t}Aa.prototype=Object.create(Tn.prototype);Aa.prototype.fn=dp;$.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Aa((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};$.prototype.int32=function(t){return t<0?this._push(Ba,10,Bi.fromNumber(t)):this.uint32(t)};$.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Ba(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}$.prototype.uint64=function(t){var r=Bi.from(t);return this._push(Ba,r.length(),r)};$.prototype.int64=$.prototype.uint64;$.prototype.sint64=function(t){var r=Bi.from(t).zzEncode();return this._push(Ba,r.length(),r)};$.prototype.bool=function(t){return this._push(Sa,1,t?1:0)};function ba(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}$.prototype.fixed32=function(t){return this._push(ba,4,t>>>0)};$.prototype.sfixed32=$.prototype.fixed32;$.prototype.fixed64=function(t){var r=Bi.from(t);return this._push(ba,4,r.lo)._push(ba,4,r.hi)};$.prototype.sfixed64=$.prototype.fixed64;$.prototype.float=function(t){return this._push(ae.float.writeFloatLE,4,t)};$.prototype.double=function(t){return this._push(ae.float.writeDoubleLE,8,t)};var pp=ae.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};$.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(Sa,1,0);if(ae.isString(t)){var n=$.alloc(r=Vc.length(t));Vc.decode(t,n,0),t=n}return this.uint32(r)._push(pp,r,t)};$.prototype.string=function(t){var r=qc.length(t);return r?this.uint32(r)._push(qc.write,r,t):this._push(Sa,1,0)};$.prototype.fork=function(){return this.states=new hp(this),this.head=this.tail=new Tn(Ea,0,0),this.len=0,this};$.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Tn(Ea,0,0),this.len=0),this};$.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};$.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};$._configure=function(e){wa=e,$.create=zc(),wa._configure()}});var Qc=U((dx,Wc)=>{"use strict";Wc.exports=Se;var Gc=Ca();(Se.prototype=Object.create(Gc.prototype)).constructor=Se;var je=wr();function Se(){Gc.call(this)}Se._configure=function(){Se.alloc=je._Buffer_allocUnsafe,Se.writeBytesBuffer=je.Buffer&&je.Buffer.prototype instanceof Uint8Array&&je.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};Se.prototype.bytes=function(t){je.isString(t)&&(t=je._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(Se.writeBytesBuffer,r,t),this};function yp(e,t,r){e.length<40?je.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}Se.prototype.string=function(t){var r=je.Buffer.byteLength(t);return this.uint32(r),r&&this._push(yp,r,t),this};Se._configure()});var tt=U((kx,Jc)=>{Jc.exports={options:{usePureJavaScript:!1}}});var eu=U((Nx,tu)=>{var La={};tu.exports=La;var jc={};La.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=vp(e,t);else{var i=0,s=t.length,a=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<o.length;++c)u+=o[c]<<8,o[c]=u%s,u=u/s|0;for(;u>0;)o.push(u%s),u=u/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=a;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};La.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=jc[t];if(!r){r=jc[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),a=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var c=0,u=o;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var f=0;e[f]===s&&f<e.length-1;++f)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function vp(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var a=0,o=e.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%n,o=o/n|0;for(;o>0;)s.push(o%n),o=o/n|0}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}});var St=U((Lx,su)=>{var ru=tt(),nu=eu(),g=su.exports=ru.util=ru.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){g.nextTick=process.nextTick,typeof setImmediate=="function"?g.setImmediate=setImmediate:g.setImmediate=g.nextTick;return}if(typeof setImmediate=="function"){g.setImmediate=function(){return setImmediate.apply(void 0,arguments)},g.nextTick=function(o){return setImmediate(o)};return}if(g.setImmediate=function(o){setTimeout(o,0)},typeof window<"u"&&typeof window.postMessage=="function"){let o=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var u=t.slice();t.length=0,u.forEach(function(f){f()})}};var a=o,e="forge.setImmediate",t=[];g.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var s=g.setImmediate;g.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n))}}g.nextTick=g.setImmediate})();g.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;g.globalScope=function(){return g.isNodejs?globalThis:typeof self>"u"?window:self}();g.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};g.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};g.isArrayBufferView=function(e){return e&&g.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function In(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}g.ByteBuffer=Pa;function Pa(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(g.isArrayBuffer(e)||g.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Pa||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}g.ByteStringBuffer=Pa;var wp=4096;g.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>wp&&(this.data.substr(0,1),this._constructedStringLength=0)};g.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};g.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};g.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};g.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};g.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};g.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(g.encodeUtf8(e))};g.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};g.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};g.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};g.ByteStringBuffer.prototype.putInt=function(e,t){In(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};g.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};g.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};g.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};g.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};g.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};g.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};g.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};g.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};g.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};g.ByteStringBuffer.prototype.getInt=function(e){In(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};g.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};g.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};g.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};g.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};g.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};g.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};g.ByteStringBuffer.prototype.copy=function(){var e=g.createBuffer(this.data);return e.read=this.read,e};g.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};g.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};g.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};g.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};g.ByteStringBuffer.prototype.toString=function(){return g.decodeUtf8(this.bytes())};function bp(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=g.isArrayBuffer(e),n=g.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}g.DataBuffer=bp;g.DataBuffer.prototype.length=function(){return this.write-this.read};g.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};g.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};g.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};g.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};g.DataBuffer.prototype.putBytes=function(e,t){if(g.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(g.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof g.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&g.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof g.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=g.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=g.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};g.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};g.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};g.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};g.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};g.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};g.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};g.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};g.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};g.DataBuffer.prototype.putInt=function(e,t){In(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};g.DataBuffer.prototype.putSignedInt=function(e,t){return In(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};g.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};g.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};g.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};g.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};g.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};g.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};g.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};g.DataBuffer.prototype.getInt=function(e){In(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};g.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};g.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};g.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};g.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};g.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};g.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};g.DataBuffer.prototype.copy=function(){return new g.DataBuffer(this)};g.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};g.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};g.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};g.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};g.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return g.binary.raw.encode(t);if(e==="hex")return g.binary.hex.encode(t);if(e==="base64")return g.binary.base64.encode(t);if(e==="utf8")return g.text.utf8.decode(t);if(e==="utf16")return g.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};g.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=g.encodeUtf8(e)),new g.ByteBuffer(e)};g.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};g.xorBytes=function(e,t,r){for(var n="",i="",s="",a=0,o=0;r>0;--r,++a)i=e.charCodeAt(a)^t.charCodeAt(a),o>=10&&(n+=s,s="",o=0),s+=String.fromCharCode(i),++o;return n+=s,n};g.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};g.bytesToHex=function(e){return g.createBuffer(e).toHex()};g.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",er=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],iu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";g.encode64=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.length;)i=e.charCodeAt(o++),s=e.charCodeAt(o++),a=e.charCodeAt(o++),r+=tr.charAt(i>>2),r+=tr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=tr.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":tr.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};g.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,a=0;a<e.length;)r=er[e.charCodeAt(a++)-43],n=er[e.charCodeAt(a++)-43],i=er[e.charCodeAt(a++)-43],s=er[e.charCodeAt(a++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};g.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};g.decodeUtf8=function(e){return decodeURIComponent(escape(e))};g.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:nu.encode,decode:nu.decode}};g.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};g.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};g.binary.hex.encode=g.bytesToHex;g.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};g.binary.base64.encode=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.byteLength;)i=e[o++],s=e[o++],a=e[o++],r+=tr.charAt(i>>2),r+=tr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=tr.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":tr.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};g.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,a,o,c=0,u=r;c<e.length;)i=er[e.charCodeAt(c++)-43],s=er[e.charCodeAt(c++)-43],a=er[e.charCodeAt(c++)-43],o=er[e.charCodeAt(c++)-43],n[u++]=i<<2|s>>4,a!==64&&(n[u++]=(s&15)<<4|a>>2,o!==64&&(n[u++]=(a&3)<<6|o));return t?u-r:n.subarray(0,u)};g.binary.base58.encode=function(e,t){return g.binary.baseN.encode(e,iu,t)};g.binary.base58.decode=function(e,t){return g.binary.baseN.decode(e,iu,t)};g.text={utf8:{},utf16:{}};g.text.utf8.encode=function(e,t,r){e=g.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};g.text.utf8.decode=function(e){return g.decodeUtf8(String.fromCharCode.apply(null,e))};g.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,a=r,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o),s+=2;return t?s-r:n};g.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};g.deflate=function(e,t,r){if(t=g.decode64(e.deflate(g.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};g.inflate=function(e,t,r){var n=e.inflate(g.encode64(t)).rval;return n===null?null:g.decode64(n)};var Da=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=g.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Ua=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(g.decode64(r))),r},Ep=function(e,t,r,n){var i=Ua(e,t);i===null&&(i={}),i[r]=n,Da(e,t,i)},Sp=function(e,t,r){var n=Ua(e,t);return n!==null&&(n=r in n?n[r]:null),n},Ap=function(e,t,r){var n=Ua(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),Da(e,t,n)}},Bp=function(e,t){Da(e,t,null)},Ti=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,a=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(c){a=c}if(s)break}if(!s)throw a;return n};g.setItem=function(e,t,r,n,i){Ti(Ep,arguments,i)};g.getItem=function(e,t,r,n){return Ti(Sp,arguments,n)};g.removeItem=function(e,t,r,n){Ti(Ap,arguments,n)};g.clearItems=function(e,t,r){Ti(Bp,arguments,r)};g.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};g.format=function(e){for(var t=/%./g,r,n,i=0,s=[],a=0;r=t.exec(e);){n=e.substring(a,t.lastIndex-2),n.length>0&&s.push(n),a=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(e.substring(a)),s.join("")};g.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,a=r===void 0?",":r,o=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+o:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-u).toFixed(s).slice(2):"")};g.formatSize=function(e){return e>=1073741824?e=g.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=g.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=g.formatNumber(e/1024,0)+" KiB":e=g.formatNumber(e,0)+" bytes",e};g.bytesFromIP=function(e){return e.indexOf(".")!==-1?g.bytesFromIPv4(e):e.indexOf(":")!==-1?g.bytesFromIPv6(e):null};g.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=g.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};g.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(a){return a.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=g.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=g.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};g.bytesToIP=function(e){return e.length===4?g.bytesToIPv4(e):e.length===16?g.bytesToIPv6(e):null};g.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};g.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=g.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=t.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};g.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in g&&!e.update)return t(null,g.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return g.cores=navigator.hardwareConcurrency,t(null,g.cores);if(typeof Worker>"u")return g.cores=1,t(null,g.cores);if(typeof Blob>"u")return g.cores=2,t(null,g.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),c=o+4;Date.now()<c;);self.postMessage({st:o,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,o,c){if(o===0){var u=Math.floor(a.reduce(function(f,l){return f+l},0)/a.length);return g.cores=Math.max(1,u),URL.revokeObjectURL(r),t(null,g.cores)}i(c,function(f,l){a.push(s(c,l)),n(a,o-1,c)})}function i(a,o){for(var c=[],u=[],f=0;f<a;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(u.push(h.data),u.length===a){for(var y=0;y<a;++y)c[y].terminate();o(null,u)}}),c.push(l)}for(var f=0;f<a;++f)c[f].postMessage(f)}function s(a,o){for(var c=[],u=0;u<a;++u)for(var f=o[u],l=c[u]=[],h=0;h<a;++h)if(u!==h){var y=o[h];(f.st>y.st&&f.st<y.et||y.st>f.st&&y.st<f.et)&&l.push(h)}return c.reduce(function(d,p){return Math.max(d,p.length)},0)}}});var Ii=U((Px,au)=>{var Rn=tt();Rn.pki=Rn.pki||{};var Ka=au.exports=Rn.pki.oids=Rn.oids=Rn.oids||{};function S(e,t){Ka[e]=t,Ka[t]=e}function X(e,t){Ka[e]=t}S("1.2.840.113549.1.1.1","rsaEncryption");S("1.2.840.113549.1.1.4","md5WithRSAEncryption");S("1.2.840.113549.1.1.5","sha1WithRSAEncryption");S("1.2.840.113549.1.1.7","RSAES-OAEP");S("1.2.840.113549.1.1.8","mgf1");S("1.2.840.113549.1.1.9","pSpecified");S("1.2.840.113549.1.1.10","RSASSA-PSS");S("1.2.840.113549.1.1.11","sha256WithRSAEncryption");S("1.2.840.113549.1.1.12","sha384WithRSAEncryption");S("1.2.840.113549.1.1.13","sha512WithRSAEncryption");S("1.3.101.112","EdDSA25519");S("1.2.840.10040.4.3","dsa-with-sha1");S("1.3.14.3.2.7","desCBC");S("1.3.14.3.2.26","sha1");S("1.3.14.3.2.29","sha1WithRSASignature");S("2.16.840.1.101.3.4.2.1","sha256");S("2.16.840.1.101.3.4.2.2","sha384");S("2.16.840.1.101.3.4.2.3","sha512");S("2.16.840.1.101.3.4.2.4","sha224");S("2.16.840.1.101.3.4.2.5","sha512-224");S("2.16.840.1.101.3.4.2.6","sha512-256");S("1.2.840.113549.2.2","md2");S("1.2.840.113549.2.5","md5");S("1.2.840.113549.1.7.1","data");S("1.2.840.113549.1.7.2","signedData");S("1.2.840.113549.1.7.3","envelopedData");S("1.2.840.113549.1.7.4","signedAndEnvelopedData");S("1.2.840.113549.1.7.5","digestedData");S("1.2.840.113549.1.7.6","encryptedData");S("1.2.840.113549.1.9.1","emailAddress");S("1.2.840.113549.1.9.2","unstructuredName");S("1.2.840.113549.1.9.3","contentType");S("1.2.840.113549.1.9.4","messageDigest");S("1.2.840.113549.1.9.5","signingTime");S("1.2.840.113549.1.9.6","counterSignature");S("1.2.840.113549.1.9.7","challengePassword");S("1.2.840.113549.1.9.8","unstructuredAddress");S("1.2.840.113549.1.9.14","extensionRequest");S("1.2.840.113549.1.9.20","friendlyName");S("1.2.840.113549.1.9.21","localKeyId");S("1.2.840.113549.1.9.22.1","x509Certificate");S("1.2.840.113549.1.12.10.1.1","keyBag");S("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");S("1.2.840.113549.1.12.10.1.3","certBag");S("1.2.840.113549.1.12.10.1.4","crlBag");S("1.2.840.113549.1.12.10.1.5","secretBag");S("1.2.840.113549.1.12.10.1.6","safeContentsBag");S("1.2.840.113549.1.5.13","pkcs5PBES2");S("1.2.840.113549.1.5.12","pkcs5PBKDF2");S("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");S("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");S("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");S("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");S("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");S("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");S("1.2.840.113549.2.7","hmacWithSHA1");S("1.2.840.113549.2.8","hmacWithSHA224");S("1.2.840.113549.2.9","hmacWithSHA256");S("1.2.840.113549.2.10","hmacWithSHA384");S("1.2.840.113549.2.11","hmacWithSHA512");S("1.2.840.113549.3.7","des-EDE3-CBC");S("2.16.840.1.101.3.4.1.2","aes128-CBC");S("2.16.840.1.101.3.4.1.22","aes192-CBC");S("2.16.840.1.101.3.4.1.42","aes256-CBC");S("2.5.4.3","commonName");S("2.5.4.4","surname");S("2.5.4.5","serialNumber");S("2.5.4.6","countryName");S("2.5.4.7","localityName");S("2.5.4.8","stateOrProvinceName");S("2.5.4.9","streetAddress");S("2.5.4.10","organizationName");S("2.5.4.11","organizationalUnitName");S("2.5.4.12","title");S("2.5.4.13","description");S("2.5.4.15","businessCategory");S("2.5.4.17","postalCode");S("2.5.4.42","givenName");S("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");S("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");S("2.16.840.1.113730.1.1","nsCertType");S("2.16.840.1.113730.1.13","nsComment");X("2.5.29.1","authorityKeyIdentifier");X("2.5.29.2","keyAttributes");X("2.5.29.3","certificatePolicies");X("2.5.29.4","keyUsageRestriction");X("2.5.29.5","policyMapping");X("2.5.29.6","subtreesConstraint");X("2.5.29.7","subjectAltName");X("2.5.29.8","issuerAltName");X("2.5.29.9","subjectDirectoryAttributes");X("2.5.29.10","basicConstraints");X("2.5.29.11","nameConstraints");X("2.5.29.12","policyConstraints");X("2.5.29.13","basicConstraints");S("2.5.29.14","subjectKeyIdentifier");S("2.5.29.15","keyUsage");X("2.5.29.16","privateKeyUsagePeriod");S("2.5.29.17","subjectAltName");S("2.5.29.18","issuerAltName");S("2.5.29.19","basicConstraints");X("2.5.29.20","cRLNumber");X("2.5.29.21","cRLReason");X("2.5.29.22","expirationDate");X("2.5.29.23","instructionCode");X("2.5.29.24","invalidityDate");X("2.5.29.25","cRLDistributionPoints");X("2.5.29.26","issuingDistributionPoint");X("2.5.29.27","deltaCRLIndicator");X("2.5.29.28","issuingDistributionPoint");X("2.5.29.29","certificateIssuer");X("2.5.29.30","nameConstraints");S("2.5.29.31","cRLDistributionPoints");S("2.5.29.32","certificatePolicies");X("2.5.29.33","policyMappings");X("2.5.29.34","policyConstraints");S("2.5.29.35","authorityKeyIdentifier");X("2.5.29.36","policyConstraints");S("2.5.29.37","extKeyUsage");X("2.5.29.46","freshestCRL");X("2.5.29.54","inhibitAnyPolicy");S("1.3.6.1.4.1.11129.2.4.2","timestampList");S("1.3.6.1.5.5.7.1.1","authorityInfoAccess");S("1.3.6.1.5.5.7.3.1","serverAuth");S("1.3.6.1.5.5.7.3.2","clientAuth");S("1.3.6.1.5.5.7.3.3","codeSigning");S("1.3.6.1.5.5.7.3.4","emailProtection");S("1.3.6.1.5.5.7.3.8","timeStamping")});var Nn=U((Dx,cu)=>{var st=tt();St();Ii();var C=cu.exports=st.asn1=st.asn1||{};C.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};C.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};C.create=function(e,t,r,n,i){if(st.util.isArray(n)){for(var s=[],a=0;a<n.length;++a)n[a]!==void 0&&s.push(n[a]);n=s}var o={tagClass:e,type:t,constructed:r,composed:r||st.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=C.copy(o)),o};C.copy=function(e,t){var r;if(st.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(C.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:C.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};C.equals=function(e,t,r){if(st.util.isArray(e)){if(!st.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!C.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&C.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};C.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function kn(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var Cp=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;kn(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};C.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=st.util.createBuffer(e));var r=e.length(),n=Ri(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Ri(e,t,r,n){var i;kn(e,t,2);var s=e.getByte();t--;var a=s&192,o=s&31;i=e.length();var c=Cp(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=e.length(),u.remaining=t,u.requested=c,u}c=t}var f,l,h=(s&32)===32;if(h)if(f=[],c===void 0)for(;;){if(kn(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),f.push(Ri(e,t,r+1,n)),t-=i-e.length()}else for(;c>0;)i=e.length(),f.push(Ri(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(f===void 0&&a===C.Class.UNIVERSAL&&o===C.Type.BITSTRING&&(l=e.bytes(c)),f===void 0&&n.decodeBitStrings&&a===C.Class.UNIVERSAL&&o===C.Type.BITSTRING&&c>1){var y=e.read,d=t,p=0;if(o===C.Type.BITSTRING&&(kn(e,t,1),p=e.getByte(),t--),p===0)try{i=e.length();var x={strict:!0,decodeBitStrings:!0},v=Ri(e,t,r+1,x),A=i-e.length();t-=A,o==C.Type.BITSTRING&&A++;var B=v.tagClass;A===c&&(B===C.Class.UNIVERSAL||B===C.Class.CONTEXT_SPECIFIC)&&(f=[v])}catch{}f===void 0&&(e.read=y,t=d)}if(f===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(o===C.Type.BMPSTRING)for(f="";c>0;c-=2)kn(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(c),t-=c}var L=l===void 0?null:{bitStringContents:l};return C.create(a,o,h,f,L)}C.toDer=function(e){var t=st.util.createBuffer(),r=e.tagClass|e.type,n=st.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=C.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(C.toDer(e.value[s]))}else if(e.type===C.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===C.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var a=n.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);t.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)t.putByte(o.charCodeAt(s))}return t.putBuffer(n),t};C.oidToDer=function(e){var t=e.split("."),r=st.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,a,o=2;o<t.length;++o){n=!0,i=[],s=parseInt(t[o],10);do a=s&127,s=s>>>7,n||(a|=128),i.push(a),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};C.derToOid=function(e){var t;typeof e=="string"&&(e=st.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};C.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var c=e.charAt(10),u=10;c!=="+"&&c!=="-"&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,0),u&&(c=e.charAt(u),c==="+"||c==="-")){var f=parseInt(e.substr(u+1,2),10),l=parseInt(e.substr(u+4,2),10),h=f*60+l;h*=6e4,c==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};C.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),c=0,u=0,f=!1;e.charAt(e.length-1)==="Z"&&(f=!0);var l=e.length-5,h=e.charAt(l);if(h==="+"||h==="-"){var y=parseInt(e.substr(l+1,2),10),d=parseInt(e.substr(l+4,2),10);u=y*60+d,u*=6e4,h==="+"&&(u*=-1),f=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),f?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(s,a,o,c)),t};C.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};C.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};C.integerToDer=function(e){var t=st.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};C.derToInteger=function(e){typeof e=="string"&&(e=st.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};C.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&st.util.isArray(t.value))for(var s=0,a=0;i&&a<t.value.length;++a)i=t.value[a].optional||!1,e.value[s]&&(i=C.validate(e.value[s],t.value[a],r,n),i?++s:t.value[a].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var o;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var ou=/[^\\u0000-\\u00ff]/;C.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case C.Class.UNIVERSAL:n+="Universal:";break;case C.Class.APPLICATION:n+="Application:";break;case C.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case C.Class.PRIVATE:n+="Private:";break}if(e.tagClass===C.Class.UNIVERSAL)switch(n+=e.type,e.type){case C.Type.NONE:n+=" (None)";break;case C.Type.BOOLEAN:n+=" (Boolean)";break;case C.Type.INTEGER:n+=" (Integer)";break;case C.Type.BITSTRING:n+=" (Bit string)";break;case C.Type.OCTETSTRING:n+=" (Octet string)";break;case C.Type.NULL:n+=" (Null)";break;case C.Type.OID:n+=" (Object Identifier)";break;case C.Type.ODESC:n+=" (Object Descriptor)";break;case C.Type.EXTERNAL:n+=" (External or Instance of)";break;case C.Type.REAL:n+=" (Real)";break;case C.Type.ENUMERATED:n+=" (Enumerated)";break;case C.Type.EMBEDDED:n+=" (Embedded PDV)";break;case C.Type.UTF8:n+=" (UTF8)";break;case C.Type.ROID:n+=" (Relative Object Identifier)";break;case C.Type.SEQUENCE:n+=" (Sequence)";break;case C.Type.SET:n+=" (Set)";break;case C.Type.PRINTABLESTRING:n+=" (Printable String)";break;case C.Type.IA5String:n+=" (IA5String (ASCII))";break;case C.Type.UTCTIME:n+=" (UTC time)";break;case C.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case C.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var a=0,o="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(a+=1,o+=C.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(o+=","));n+=i+"Sub values: "+a+o}else{if(n+=i+"Value: ",e.type===C.Type.OID){var c=C.derToOid(e.value);n+=c,st.pki&&st.pki.oids&&c in st.pki.oids&&(n+=" ("+st.pki.oids[c]+") ")}if(e.type===C.Type.INTEGER)try{n+=C.derToInteger(e.value)}catch{n+="0x"+st.util.bytesToHex(e.value)}else if(e.type===C.Type.BITSTRING){if(e.value.length>1?n+="0x"+st.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var u=e.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(e.type===C.Type.OCTETSTRING)ou.test(e.value)||(n+="("+e.value+") "),n+="0x"+st.util.bytesToHex(e.value);else if(e.type===C.Type.UTF8)try{n+=st.util.decodeUtf8(e.value)}catch(f){if(f.message==="URI malformed")n+="0x"+st.util.bytesToHex(e.value)+" (malformed UTF8)";else throw f}else e.type===C.Type.PRINTABLESTRING||e.type===C.Type.IA5String?n+=e.value:ou.test(e.value)?n+="0x"+st.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Fa=U((Ux,uu)=>{var Rt=tt();St();uu.exports=Rt.cipher=Rt.cipher||{};Rt.cipher.algorithms=Rt.cipher.algorithms||{};Rt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Rt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Rt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Rt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Rt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Rt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Rt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Rt.cipher.algorithms[e]=t};Rt.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Rt.cipher.algorithms?Rt.cipher.algorithms[e]:null};var Oa=Rt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};Oa.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Rt.util.createBuffer(),this.output=e.output||Rt.util.createBuffer(),this.mode.start(t)};Oa.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Oa.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Va=U((Kx,fu)=>{var kt=tt();St();kt.cipher=kt.cipher||{};var V=fu.exports=kt.cipher.modes=kt.cipher.modes||{};V.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};V.ecb.prototype.start=function(e){};V.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};V.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};V.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};V.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};V.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};V.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=ki(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};V.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};V.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};V.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};V.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};V.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=kt.util.createBuffer(),this._partialBytes=0};V.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ki(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=kt.util.createBuffer(),this._partialBytes=0};V.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ki(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.ofb.prototype.decrypt=V.ofb.prototype.encrypt;V.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=kt.util.createBuffer(),this._partialBytes=0};V.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=ki(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Ni(this._inBlock)};V.ctr.prototype.decrypt=V.ctr.prototype.encrypt;V.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=kt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};V.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=kt.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=kt.util.createBuffer(e.additionalData):r=kt.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=kt.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ma(n*8)))}this._inBlock=this._j0.slice(0),Ni(this._inBlock),this._partialBytes=0,r=kt.util.createBuffer(r),this._aDataLength=Ma(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};V.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Ni(this._inBlock)};V.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Ni(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};V.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=kt.util.createBuffer();var n=this._aDataLength.concat(Ma(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};V.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};V.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};V.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};V.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};V.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],c=a/n|0,u=(n-1-a%n)*t;o[c]=1<<t-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,e),t)}return s};V.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var a=1;a<s;++a){var o=i[s],c=i[a];i[s+a]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i};function ki(e,t){if(typeof e=="string"&&(e=kt.util.createBuffer(e)),kt.util.isArray(e)&&e.length>4){var r=e;e=kt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!kt.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function Ni(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Ma(e){return[e/4294967296|0,e&4294967295]}});var Ga=U((Ox,pu)=>{var nt=tt();Fa();Va();St();pu.exports=nt.aes=nt.aes||{};nt.aes.startEncrypting=function(e,t,r,n){var i=Li({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};nt.aes.createEncryptionCipher=function(e,t){return Li({key:e,output:null,decrypt:!1,mode:t})};nt.aes.startDecrypting=function(e,t,r,n){var i=Li({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};nt.aes.createDecryptionCipher=function(e,t){return Li({key:e,output:null,decrypt:!0,mode:t})};nt.aes.Algorithm=function(e,t){Ha||hu();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return za(r._w,n,i,!1)},decrypt:function(n,i){return za(r._w,n,i,!0)}}}),r._init=!1};nt.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=nt.util.createBuffer(t);else if(nt.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=nt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!nt.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!nt.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=du(t,e.decrypt&&!a),this._init=!0}};nt.aes._expandKey=function(e,t){return Ha||hu(),du(e,t)};nt.aes._updateBlock=za;jr("AES-ECB",nt.cipher.modes.ecb);jr("AES-CBC",nt.cipher.modes.cbc);jr("AES-CFB",nt.cipher.modes.cfb);jr("AES-OFB",nt.cipher.modes.ofb);jr("AES-CTR",nt.cipher.modes.ctr);jr("AES-GCM",nt.cipher.modes.gcm);function jr(e,t){var r=function(){return new nt.aes.Algorithm(e,t)};nt.cipher.registerAlgorithm(e,r)}var Ha=!1,Jr=4,qt,qa,lu,Er,pe;function hu(){Ha=!0,lu=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;qt=new Array(256),qa=new Array(256),Er=new Array(4),pe=new Array(4);for(var t=0;t<4;++t)Er[t]=new Array(256),pe[t]=new Array(256);for(var r=0,n=0,i,s,a,o,c,u,f,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,qt[r]=o,qa[o]=r,c=e[o],i=e[r],s=e[i],a=e[s],u=c<<24^o<<16^o<<8^(o^c),f=(i^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^i^a);for(var l=0;l<4;++l)Er[l][r]=u,pe[l][o]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^e[e[e[i^a]]],n^=e[e[n]])}}function du(e,t){for(var r=e.slice(0),n,i=1,s=r.length,a=s+6+1,o=Jr*a,c=s;c<o;++c)n=r[c-1],c%s===0?(n=qt[n>>>16&255]<<24^qt[n>>>8&255]<<16^qt[n&255]<<8^qt[n>>>24]^lu[i]<<24,i++):s>6&&c%s===4&&(n=qt[n>>>24]<<24^qt[n>>>16&255]<<16^qt[n>>>8&255]<<8^qt[n&255]),r[c]=r[c-s]^n;if(t){var u,f=pe[0],l=pe[1],h=pe[2],y=pe[3],d=r.slice(0);o=r.length;for(var c=0,p=o-Jr;c<o;c+=Jr,p-=Jr)if(c===0||c===o-Jr)d[c]=r[p],d[c+1]=r[p+3],d[c+2]=r[p+2],d[c+3]=r[p+1];else for(var x=0;x<Jr;++x)u=r[p+x],d[c+(3&-x)]=f[qt[u>>>24]]^l[qt[u>>>16&255]]^h[qt[u>>>8&255]]^y[qt[u&255]];r=d}return r}function za(e,t,r,n){var i=e.length/4-1,s,a,o,c,u;n?(s=pe[0],a=pe[1],o=pe[2],c=pe[3],u=qa):(s=Er[0],a=Er[1],o=Er[2],c=Er[3],u=qt);var f,l,h,y,d,p,x;f=t[0]^e[0],l=t[n?3:1]^e[1],h=t[2]^e[2],y=t[n?1:3]^e[3];for(var v=3,A=1;A<i;++A)d=s[f>>>24]^a[l>>>16&255]^o[h>>>8&255]^c[y&255]^e[++v],p=s[l>>>24]^a[h>>>16&255]^o[y>>>8&255]^c[f&255]^e[++v],x=s[h>>>24]^a[y>>>16&255]^o[f>>>8&255]^c[l&255]^e[++v],y=s[y>>>24]^a[f>>>16&255]^o[l>>>8&255]^c[h&255]^e[++v],f=d,l=p,h=x;r[0]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[h>>>8&255]<<8^u[y&255]^e[++v],r[n?3:1]=u[l>>>24]<<24^u[h>>>16&255]<<16^u[y>>>8&255]<<8^u[f&255]^e[++v],r[2]=u[h>>>24]<<24^u[y>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^e[++v],r[n?1:3]=u[y>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[h&255]^e[++v]}function Li(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=nt.cipher.createDecipher(r,e.key):n=nt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof nt.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}});var mu=U((Fx,gu)=>{var ut=tt();Fa();Va();St();gu.exports=ut.des=ut.des||{};ut.des.startEncrypting=function(e,t,r,n){var i=Pi({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};ut.des.createEncryptionCipher=function(e,t){return Pi({key:e,output:null,decrypt:!1,mode:t})};ut.des.startDecrypting=function(e,t,r,n){var i=Pi({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};ut.des.createDecryptionCipher=function(e,t){return Pi({key:e,output:null,decrypt:!0,mode:t})};ut.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return yu(r._keys,n,i,!1)},decrypt:function(n,i){return yu(r._keys,n,i,!0)}}}),r._init=!1};ut.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=ut.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Dp(t),this._init=!0}};Ce("DES-ECB",ut.cipher.modes.ecb);Ce("DES-CBC",ut.cipher.modes.cbc);Ce("DES-CFB",ut.cipher.modes.cfb);Ce("DES-OFB",ut.cipher.modes.ofb);Ce("DES-CTR",ut.cipher.modes.ctr);Ce("3DES-ECB",ut.cipher.modes.ecb);Ce("3DES-CBC",ut.cipher.modes.cbc);Ce("3DES-CFB",ut.cipher.modes.cfb);Ce("3DES-OFB",ut.cipher.modes.ofb);Ce("3DES-CTR",ut.cipher.modes.ctr);function Ce(e,t){var r=function(){return new ut.des.Algorithm(e,t)};ut.cipher.registerAlgorithm(e,r)}var _p=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Tp=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Ip=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Rp=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],kp=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Np=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Lp=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Pp=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Dp(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],p=e.length()>8?3:1,x=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],A=0,B,L=0;L<p;L++){var T=e.getInt32(),_=e.getInt32();B=(T>>>4^_)&252645135,_^=B,T^=B<<4,B=(_>>>-16^T)&65535,T^=B,_^=B<<-16,B=(T>>>2^_)&858993459,_^=B,T^=B<<2,B=(_>>>-16^T)&65535,T^=B,_^=B<<-16,B=(T>>>1^_)&1431655765,_^=B,T^=B<<1,B=(_>>>8^T)&16711935,T^=B,_^=B<<8,B=(T>>>1^_)&1431655765,_^=B,T^=B<<1,B=T<<8|_>>>20&240,T=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=B;for(var q=0;q<v.length;++q){v[q]?(T=T<<2|T>>>26,_=_<<2|_>>>26):(T=T<<1|T>>>27,_=_<<1|_>>>27),T&=-15,_&=-15;var z=t[T>>>28]|r[T>>>24&15]|n[T>>>20&15]|i[T>>>16&15]|s[T>>>12&15]|a[T>>>8&15]|o[T>>>4&15],Ct=c[_>>>28]|u[_>>>24&15]|f[_>>>20&15]|l[_>>>16&15]|h[_>>>12&15]|y[_>>>8&15]|d[_>>>4&15];B=(Ct>>>16^z)&65535,x[A++]=z^B,x[A++]=Ct^B<<16}}return x}function yu(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=t[0],c=t[1];a=(o>>>4^c)&252645135,c^=a,o^=a<<4,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,o=o<<1|o>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var f=s[u+1],l=s[u+2],h=s[u];h!=f;h+=l){var y=c^e[h],d=(c>>>4|c<<28)^e[h+1];a=o,o=c,c=a^(Tp[y>>>24&63]|Rp[y>>>16&63]|Np[y>>>8&63]|Pp[y&63]|_p[d>>>24&63]|Ip[d>>>16&63]|kp[d>>>8&63]|Lp[d&63])}a=o,o=c,c=a}o=o>>>1|o<<31,c=c>>>1|c<<31,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(o>>>4^c)&252645135,c^=a,o^=a<<4,r[0]=o,r[1]=c}function Pi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=ut.cipher.createDecipher(r,e.key):n=ut.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof ut.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}});var Sr=U((Mx,xu)=>{var Di=tt();xu.exports=Di.md=Di.md||{};Di.md.algorithms=Di.md.algorithms||{}});var wu=U((Vx,vu)=>{var Me=tt();Sr();St();var Up=vu.exports=Me.hmac=Me.hmac||{};Up.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Me.md.algorithms)t=Me.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(a===null)a=e;else{if(typeof a=="string")a=Me.util.createBuffer(a);else if(Me.util.isArray(a)){var o=a;a=Me.util.createBuffer();for(var c=0;c<o.length;++c)a.putByte(o[c])}var u=a.length();u>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=Me.util.createBuffer(),n=Me.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var o=a.at(c);r.putByte(54^o),n.putByte(92^o)}if(u<t.blockLength)for(var o=t.blockLength-u,c=0;c<o;++c)r.putByte(54),n.putByte(92);e=a,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i}});var tn=U(()=>{});var Eu=U((Hx,bu)=>{var zt=tt();wu();Sr();St();var Kp=zt.pkcs5=zt.pkcs5||{},Ve;zt.util.isNodejs&&!zt.options.usePureJavaScript&&(Ve=tn());bu.exports=zt.pbkdf2=Kp.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),zt.util.isNodejs&&!zt.options.usePureJavaScript&&Ve.pbkdf2&&(i===null||typeof i!="object")&&(Ve.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?Ve.pbkdf2Sync.length===4?Ve.pbkdf2(e,t,r,n,function(B,L){if(B)return s(B);s(null,L.toString("binary"))}):Ve.pbkdf2(e,t,r,n,i,function(B,L){if(B)return s(B);s(null,L.toString("binary"))}):Ve.pbkdf2Sync.length===4?Ve.pbkdf2Sync(e,t,r,n).toString("binary"):Ve.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in zt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=zt.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var c=Math.ceil(n/a),u=n-(c-1)*a,f=zt.hmac.create();f.start(i,e);var l="",h,y,d;if(!s){for(var p=1;p<=c;++p){f.start(null,null),f.update(t),f.update(zt.util.int32ToBytes(p)),h=d=f.digest().getBytes();for(var x=2;x<=r;++x)f.start(null,null),f.update(d),y=f.digest().getBytes(),h=zt.util.xorBytes(h,y,a),d=y;l+=p<c?h:h.substr(0,u)}return l}var p=1,x;function v(){if(p>c)return s(null,l);f.start(null,null),f.update(t),f.update(zt.util.int32ToBytes(p)),h=d=f.digest().getBytes(),x=2,A()}function A(){if(x<=r)return f.start(null,null),f.update(d),y=f.digest().getBytes(),h=zt.util.xorBytes(h,y,a),d=y,++x,zt.util.setImmediate(A);l+=p<c?h:h.substr(0,u),++p,v()}v()}});var Bu=U((Gx,Au)=>{var Ki=tt();St();var Su=Au.exports=Ki.pem=Ki.pem||{};Su.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=Ui(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=Ui(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=Ui(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=Ui(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Ki.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};Su.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Ki.util.decode64(s[3])};if(t.push(o),!!s[2]){for(var c=s[2].split(i),u=0;s&&u<c.length;){for(var f=c[u].replace(/\s+$/,""),l=u+1;l<c.length;++l){var h=c[l];if(!/\s/.test(h[0]))break;f+=h,u=l}if(s=f.match(n),s){for(var y={name:s[1],values:[]},d=s[2].split(","),p=0;p<d.length;++p)y.values.push(Op(d[p]));if(o.procType)if(!o.contentDomain&&y.name==="Content-Domain")o.contentDomain=d[0]||"";else if(!o.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:d[0],parameters:d[1]||null}}else o.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:d[0],type:d[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Ui(e){for(var t=e.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,a=-1,i=0;i<t.length;++i,++s)if(s>65&&a!==-1){var o=t[a];o===","?(++a,t=t.substr(0,a)+`\r
 `+t.substr(a)):t=t.substr(0,a)+`\r
`+o+t.substr(a+1),s=i-a-1,a=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(a=i);return t}function Op(e){return e.replace(/^\s+/,"")}});var ku=U((Wx,Ru)=>{var _e=tt();Sr();St();var _u=Ru.exports=_e.sha256=_e.sha256||{};_e.md.sha256=_e.md.algorithms.sha256=_u;_u.create=function(){Tu||Fp();var e=null,t=_e.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=_e.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=_e.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),Cu(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=_e.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Wa.substr(0,n.blockLength-a));for(var o,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)o=n.fullMessageLength[f+1]*8,c=o/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};Cu(l,r,i);var h=_e.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var Wa=null,Tu=!1,Iu=null;function Fp(){Wa=String.fromCharCode(128),Wa+=_e.util.fillString(String.fromCharCode(0),64),Iu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Tu=!0}function Cu(e,t,r){for(var n,i,s,a,o,c,u,f,l,h,y,d,p,x,v,A=r.length();A>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=t[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=n+t[u-7]+i+t[u-16]|0;for(f=e.h0,l=e.h1,h=e.h2,y=e.h3,d=e.h4,p=e.h5,x=e.h6,v=e.h7,u=0;u<64;++u)a=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),o=x^d&(p^x),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&l|h&(f^l),n=v+a+o+Iu[u]+t[u],i=s+c,v=x,x=p,p=d,d=y+n>>>0,y=h,h=l,l=f,f=n+i>>>0;e.h0=e.h0+f|0,e.h1=e.h1+l|0,e.h2=e.h2+h|0,e.h3=e.h3+y|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+x|0,e.h7=e.h7+v|0,A-=64}}});var Lu=U((Qx,Nu)=>{var Te=tt();St();var Oi=null;Te.util.isNodejs&&!Te.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Oi=tn());var Mp=Nu.exports=Te.prng=Te.prng||{};Mp.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(u,f){if(!f)return t.generateSync(u);var l=t.plugin.cipher,h=t.plugin.increment,y=t.plugin.formatKey,d=t.plugin.formatSeed,p=Te.util.createBuffer();t.key=null,x();function x(v){if(v)return f(v);if(p.length()>=u)return f(null,p.getBytes(u));if(t.generated>1048575&&(t.key=null),t.key===null)return Te.util.nextTick(function(){s(x)});var A=l(t.key,t.seed);t.generated+=A.length,p.putBytes(A),t.key=y(l(t.key,h(t.seed))),t.seed=d(l(t.key,t.seed)),Te.util.setImmediate(x)}},t.generateSync=function(u){var f=t.plugin.cipher,l=t.plugin.increment,h=t.plugin.formatKey,y=t.plugin.formatSeed;t.key=null;for(var d=Te.util.createBuffer();d.length()<u;){t.generated>1048575&&(t.key=null),t.key===null&&a();var p=f(t.key,t.seed);t.generated+=p.length,d.putBytes(p),t.key=h(f(t.key,l(t.seed))),t.seed=y(f(t.key,t.seed))}return d.getBytes(u)};function s(u){if(t.pools[0].messageLength>=32)return o(),u();var f=32-t.pools[0].messageLength<<5;t.seedFile(f,function(l,h){if(l)return u(l);t.collect(h),o(),u()})}function a(){if(t.pools[0].messageLength>=32)return o();var u=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(u)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var u=t.plugin.md.create();u.update(t.keyBytes);for(var f=1,l=0;l<32;++l)t.reseeds%f===0&&(u.update(t.pools[l].digest().getBytes()),t.pools[l].start()),f=f<<1;t.keyBytes=u.digest().getBytes(),u.start(),u.update(t.keyBytes);var h=u.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function c(u){var f=null,l=Te.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(T){return h.getRandomValues(T)});var y=Te.util.createBuffer();if(f)for(;y.length()<u;){var d=Math.max(1,Math.min(u-y.length(),65536)/4),p=new Uint32Array(Math.floor(d));try{f(p);for(var x=0;x<p.length;++x)y.putInt32(p[x])}catch(T){if(!(typeof QuotaExceededError<"u"&&T instanceof QuotaExceededError))throw T}}if(y.length()<u)for(var v,A,B,L=Math.floor(Math.random()*65536);y.length()<u;){A=16807*(L&65535),v=16807*(L>>16),A+=(v&32767)<<16,A+=v>>15,A=(A&2147483647)+(A>>31),L=A&4294967295;for(var x=0;x<3;++x)B=L>>>(x<<3),B^=Math.floor(Math.random()*256),y.putByte(B&255)}return y.getBytes(u)}return Oi?(t.seedFile=function(u,f){Oi.randomBytes(u,function(l,h){if(l)return f(l);f(null,h.toString())})},t.seedFileSync=function(u){return Oi.randomBytes(u).toString()}):(t.seedFile=function(u,f){try{f(null,c(u))}catch(l){f(l)}},t.seedFileSync=c),t.collect=function(u){for(var f=u.length,l=0;l<f;++l)t.pools[t.pool].update(u.substr(l,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(u,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(u>>h&255);t.collect(l)},t.registerWorker=function(u){if(u===self)t.seedFile=function(l,h){function y(d){var p=d.data;p.forge&&p.forge.prng&&(self.removeEventListener("message",y),h(p.forge.prng.err,p.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(y,d){u.postMessage({forge:{prng:{err:y,bytes:d}}})})};u.addEventListener("message",f)}},t}});var Ln=U(($x,Qa)=>{var Nt=tt();Ga();ku();Lu();St();(function(){if(Nt.random&&Nt.random.getBytes){Qa.exports=Nt.random;return}(function(e){var t={},r=new Array(4),n=Nt.util.createBuffer();t.formatKey=function(l){var h=Nt.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),Nt.aes._expandKey(l,!1)},t.formatSeed=function(l){var h=Nt.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},t.cipher=function(l,h){return Nt.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(l){return++l[3],l},t.md=Nt.md.sha256;function i(){var l=Nt.prng.create(t);return l.getBytes=function(h,y){return l.generate(h,y)},l.getBytesSync=function(h){return l.generate(h)},l}var s=i(),a=null,o=Nt.util.globalScope,c=o.crypto||o.msCrypto;if(c&&c.getRandomValues&&(a=function(l){return c.getRandomValues(l)}),Nt.options.usePureJavaScript||!Nt.util.isNodejs&&!a){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}s.collect(u),u=null}e&&(e().mousemove(function(l){s.collectInt(l.clientX,16),s.collectInt(l.clientY,16)}),e().keypress(function(l){s.collectInt(l.charCode,8)}))}if(!Nt.random)Nt.random=s;else for(var f in s)Nt.random[f]=s[f];Nt.random.createInstance=i,Qa.exports=Nt.random})(typeof jQuery<"u"?jQuery:null)})()});var Ku=U((Yx,Uu)=>{var Wt=tt();St();var $a=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Pu=[1,2,3,5],Vp=function(e,t){return e<<t&65535|(e&65535)>>16-t},qp=function(e,t){return(e&65535)>>t|e<<16-t&65535};Uu.exports=Wt.rc2=Wt.rc2||{};Wt.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Wt.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),a=255>>(i&7),o;for(o=n;o<128;o++)r.putByte($a[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-s,$a[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,$a[r.at(o+1)^r.at(o+s)]);return r};var Du=function(e,t,r){var n=!1,i=null,s=null,a=null,o,c,u,f,l=[];for(e=Wt.rc2.expandKey(e,t),u=0;u<64;u++)l.push(e.getInt16Le());r?(o=function(d){for(u=0;u<4;u++)d[u]+=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),d[u]=Vp(d[u],Pu[u]),f++},c=function(d){for(u=0;u<4;u++)d[u]+=l[d[(u+3)%4]&63]}):(o=function(d){for(u=3;u>=0;u--)d[u]=qp(d[u],Pu[u]),d[u]-=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),f--},c=function(d){for(u=3;u>=0;u--)d[u]-=l[d[(u+3)%4]&63]});var h=function(d){var p=[];for(u=0;u<4;u++){var x=i.getInt16Le();a!==null&&(r?x^=a.getInt16Le():a.putInt16Le(x)),p.push(x&65535)}f=r?0:63;for(var v=0;v<d.length;v++)for(var A=0;A<d[v][0];A++)d[v][1](p);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(p[u]):p[u]^=a.getInt16Le()),s.putInt16Le(p[u])},y=null;return y={start:function(d,p){d&&typeof d=="string"&&(d=Wt.util.createBuffer(d)),n=!1,i=Wt.util.createBuffer(),s=p||new Wt.util.createBuffer,a=d,y.output=s},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,o],[1,c],[6,o],[1,c],[5,o]])},finish:function(d){var p=!0;if(r)if(d)p=d(8,i,!r);else{var x=i.length()===8?8:8-i.length();i.fillWithByte(x,x)}if(p&&(n=!0,y.update()),!r&&(p=i.length()===0,p))if(d)p=d(8,s,!r);else{var v=s.length(),A=s.at(v-1);A>v?p=!1:s.truncate(A)}return p}},y};Wt.rc2.startEncrypting=function(e,t,r){var n=Wt.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Wt.rc2.createEncryptionCipher=function(e,t){return Du(e,t,!0)};Wt.rc2.startDecrypting=function(e,t,r){var n=Wt.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Wt.rc2.createDecryptionCipher=function(e,t){return Du(e,t,!1)}});var Vi=U((Zx,Gu)=>{var Ya=tt();Gu.exports=Ya.jsbn=Ya.jsbn||{};var qe,zp=0xdeadbeefcafe,Ou=(zp&16777215)==15715070;function b(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Ya.jsbn.BigInteger=b;function Y(){return new b(null)}function Hp(e,t,r,n,i,s){for(;--s>=0;){var a=t*this.data[e++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}function Gp(e,t,r,n,i,s){for(var a=t&32767,o=t>>15;--s>=0;){var c=this.data[e]&32767,u=this.data[e++]>>15,f=o*c+u*a;c=a*c+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(f>>>15)+o*u+(i>>>30),r.data[n++]=c&1073741823}return i}function Fu(e,t,r,n,i,s){for(var a=t&16383,o=t>>14;--s>=0;){var c=this.data[e]&16383,u=this.data[e++]>>14,f=o*c+u*a;c=a*c+((f&16383)<<14)+r.data[n]+i,i=(c>>28)+(f>>14)+o*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(b.prototype.am=Fu,qe=28):Ou&&navigator.appName=="Microsoft Internet Explorer"?(b.prototype.am=Gp,qe=30):Ou&&navigator.appName!="Netscape"?(b.prototype.am=Hp,qe=26):(b.prototype.am=Fu,qe=28);b.prototype.DB=qe;b.prototype.DM=(1<<qe)-1;b.prototype.DV=1<<qe;var Za=52;b.prototype.FV=Math.pow(2,Za);b.prototype.F1=Za-qe;b.prototype.F2=2*qe-Za;var Wp="0123456789abcdefghijklmnopqrstuvwxyz",Fi=new Array,en,oe;en="0".charCodeAt(0);for(oe=0;oe<=9;++oe)Fi[en++]=oe;en="a".charCodeAt(0);for(oe=10;oe<36;++oe)Fi[en++]=oe;en="A".charCodeAt(0);for(oe=10;oe<36;++oe)Fi[en++]=oe;function Mu(e){return Wp.charAt(e)}function Vu(e,t){var r=Fi[e.charCodeAt(t)];return r??-1}function Qp(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function $p(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function rr(e){var t=Y();return t.fromInt(e),t}function Yp(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var a=r==8?e[n]&255:Vu(e,n);if(a<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&b.ZERO.subTo(this,this)}function Zp(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Xp(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(n=this.data[a]>>o)>0&&(i=!0,s=Mu(n));a>=0;)o<t?(n=(this.data[a]&(1<<o)-1)<<t-o,n|=this.data[--a]>>(o+=this.DB-t)):(n=this.data[a]>>(o-=t)&r,o<=0&&(o+=this.DB,--a)),n>0&&(i=!0),i&&(s+=Mu(n));return i?s:"0"}function Jp(){var e=Y();return b.ZERO.subTo(this,e),e}function jp(){return this.s<0?this.negate():this}function ty(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function Mi(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function ey(){return this.t<=0?0:this.DB*(this.t-1)+Mi(this.data[this.t-1]^this.s&this.DM)}function ry(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function ny(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function iy(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+s+1]=this.data[o]>>n|a,a=(this.data[o]&i)<<r;for(o=s-1;o>=0;--o)t.data[o]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function sy(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)t.data[a-r-1]|=(this.data[a]&s)<<i,t.data[a-r]=this.data[a]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function ay(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function oy(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&b.ZERO.subTo(t,t)}function cy(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function uy(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Y());var s=Y(),a=this.s,o=e.s,c=this.DB-Mi(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,f=s.data[u-1];if(f!=0){var l=f*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),h=this.FV/l,y=(1<<this.F1)/l,d=1<<this.F2,p=r.t,x=p-u,v=t??Y();for(s.dlShiftTo(x,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),b.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--x>=0;){var A=r.data[--p]==f?this.DM:Math.floor(r.data[p]*h+(r.data[p-1]+d)*y);if((r.data[p]+=s.am(0,A,r,x,0,u))<A)for(s.dlShiftTo(x,v),r.subTo(v,r);r.data[p]<--A;)r.subTo(v,r)}t!=null&&(r.drShiftTo(u,t),a!=o&&b.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&b.ZERO.subTo(r,r)}}}function fy(e){var t=Y();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(b.ZERO)>0&&e.subTo(t,t),t}function Ar(e){this.m=e}function ly(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function hy(e){return e}function dy(e){e.divRemTo(this.m,null,e)}function py(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function yy(e,t){e.squareTo(t),this.reduce(t)}Ar.prototype.convert=ly;Ar.prototype.revert=hy;Ar.prototype.reduce=dy;Ar.prototype.mulTo=py;Ar.prototype.sqrTo=yy;function gy(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Br(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function my(e){var t=Y();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(b.ZERO)>0&&this.m.subTo(t,t),t}function xy(e){var t=Y();return e.copyTo(t),this.reduce(t),t}function vy(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function wy(e,t){e.squareTo(t),this.reduce(t)}function by(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Br.prototype.convert=my;Br.prototype.revert=xy;Br.prototype.reduce=vy;Br.prototype.mulTo=by;Br.prototype.sqrTo=wy;function Ey(){return(this.t>0?this.data[0]&1:this.s)==0}function Sy(e,t){if(e>4294967295||e<1)return b.ONE;var r=Y(),n=Y(),i=t.convert(this),s=Mi(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var a=r;r=n,n=a}return t.revert(r)}function Ay(e,t){var r;return e<256||t.isEven()?r=new Ar(t):r=new Br(t),this.exp(e,r)}b.prototype.copyTo=Qp;b.prototype.fromInt=$p;b.prototype.fromString=Yp;b.prototype.clamp=Zp;b.prototype.dlShiftTo=ry;b.prototype.drShiftTo=ny;b.prototype.lShiftTo=iy;b.prototype.rShiftTo=sy;b.prototype.subTo=ay;b.prototype.multiplyTo=oy;b.prototype.squareTo=cy;b.prototype.divRemTo=uy;b.prototype.invDigit=gy;b.prototype.isEven=Ey;b.prototype.exp=Sy;b.prototype.toString=Xp;b.prototype.negate=Jp;b.prototype.abs=jp;b.prototype.compareTo=ty;b.prototype.bitLength=ey;b.prototype.mod=fy;b.prototype.modPowInt=Ay;b.ZERO=rr(0);b.ONE=rr(1);function By(){var e=Y();return this.copyTo(e),e}function Cy(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function _y(){return this.t==0?this.s:this.data[0]<<24>>24}function Ty(){return this.t==0?this.s:this.data[0]<<16>>16}function Iy(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Ry(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function ky(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=rr(r),i=Y(),s=Y(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a}function Ny(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,a=0,o=0;o<e.length;++o){var c=Vu(e,o);if(c<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&b.ZERO.subTo(this,this)}function Ly(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(b.ONE.shiftLeft(e-1),Xa,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(b.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Py(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function Dy(e){return this.compareTo(e)==0}function Uy(e){return this.compareTo(e)<0?this:e}function Ky(e){return this.compareTo(e)>0?this:e}function Oy(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function Fy(e,t){return e&t}function My(e){var t=Y();return this.bitwiseTo(e,Fy,t),t}function Xa(e,t){return e|t}function Vy(e){var t=Y();return this.bitwiseTo(e,Xa,t),t}function qu(e,t){return e^t}function qy(e){var t=Y();return this.bitwiseTo(e,qu,t),t}function zu(e,t){return e&~t}function zy(e){var t=Y();return this.bitwiseTo(e,zu,t),t}function Hy(){for(var e=Y(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Gy(e){var t=Y();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Wy(e){var t=Y();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Qy(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function $y(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Qy(this.data[e]);return this.s<0?this.t*this.DB:-1}function Yy(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Zy(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Yy(this.data[r]^t);return e}function Xy(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Jy(e,t){var r=b.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function jy(e){return this.changeBit(e,Xa)}function tg(e){return this.changeBit(e,zu)}function eg(e){return this.changeBit(e,qu)}function rg(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function ng(e){var t=Y();return this.addTo(e,t),t}function ig(e){var t=Y();return this.subTo(e,t),t}function sg(e){var t=Y();return this.multiplyTo(e,t),t}function ag(e){var t=Y();return this.divRemTo(e,t,null),t}function og(e){var t=Y();return this.divRemTo(e,null,t),t}function cg(e){var t=Y(),r=Y();return this.divRemTo(e,t,r),new Array(t,r)}function ug(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function fg(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Pn(){}function Hu(e){return e}function lg(e,t,r){e.multiplyTo(t,r)}function hg(e,t){e.squareTo(t)}Pn.prototype.convert=Hu;Pn.prototype.revert=Hu;Pn.prototype.mulTo=lg;Pn.prototype.sqrTo=hg;function dg(e){return this.exp(e,new Pn)}function pg(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function yg(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function rn(e){this.r2=Y(),this.q3=Y(),b.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function gg(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Y();return e.copyTo(t),this.reduce(t),t}function mg(e){return e}function xg(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function vg(e,t){e.squareTo(t),this.reduce(t)}function wg(e,t,r){e.multiplyTo(t,r),this.reduce(r)}rn.prototype.convert=gg;rn.prototype.revert=mg;rn.prototype.reduce=xg;rn.prototype.mulTo=wg;rn.prototype.sqrTo=vg;function bg(e,t){var r=e.bitLength(),n,i=rr(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Ar(t):t.isEven()?s=new rn(t):s=new Br(t);var a=new Array,o=3,c=n-1,u=(1<<n)-1;if(a[1]=s.convert(this),n>1){var f=Y();for(s.sqrTo(a[1],f);o<=u;)a[o]=Y(),s.mulTo(f,a[o-2],a[o]),o+=2}var l=e.t-1,h,y=!0,d=Y(),p;for(r=Mi(e.data[l])-1;l>=0;){for(r>=c?h=e.data[l]>>r-c&u:(h=(e.data[l]&(1<<r+1)-1)<<c-r,l>0&&(h|=e.data[l-1]>>this.DB+r-c)),o=n;!(h&1);)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--l),y)a[h].copyTo(i),y=!1;else{for(;o>1;)s.sqrTo(i,d),s.sqrTo(d,i),o-=2;o>0?s.sqrTo(i,d):(p=i,i=d,d=p),s.mulTo(d,a[h],i)}for(;l>=0&&!(e.data[l]&1<<r);)s.sqrTo(i,d),p=i,i=d,d=p,--r<0&&(r=this.DB-1,--l)}return s.revert(i)}function Eg(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function Sg(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function Ag(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return b.ZERO;for(var r=e.clone(),n=this.clone(),i=rr(1),s=rr(0),a=rr(0),o=rr(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s)):(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o))}if(n.compareTo(b.ONE)!=0)return b.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var ye=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Bg=(1<<26)/ye[ye.length-1];function Cg(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=ye[ye.length-1]){for(t=0;t<ye.length;++t)if(r.data[0]==ye[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<ye.length;){for(var n=ye[t],i=t+1;i<ye.length&&n<Bg;)n*=ye[i++];for(n=r.modInt(n);t<i;)if(n%ye[t++]==0)return!1}return r.millerRabin(e)}function _g(e){var t=this.subtract(b.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=Tg(),s,a=0;a<e;++a){do s=new b(this.bitLength(),i);while(s.compareTo(b.ONE)<=0||s.compareTo(t)>=0);var o=s.modPow(n,this);if(o.compareTo(b.ONE)!=0&&o.compareTo(t)!=0){for(var c=1;c++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(b.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function Tg(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}b.prototype.chunkSize=Iy;b.prototype.toRadix=ky;b.prototype.fromRadix=Ny;b.prototype.fromNumber=Ly;b.prototype.bitwiseTo=Oy;b.prototype.changeBit=Jy;b.prototype.addTo=rg;b.prototype.dMultiply=ug;b.prototype.dAddOffset=fg;b.prototype.multiplyLowerTo=pg;b.prototype.multiplyUpperTo=yg;b.prototype.modInt=Sg;b.prototype.millerRabin=_g;b.prototype.clone=By;b.prototype.intValue=Cy;b.prototype.byteValue=_y;b.prototype.shortValue=Ty;b.prototype.signum=Ry;b.prototype.toByteArray=Py;b.prototype.equals=Dy;b.prototype.min=Uy;b.prototype.max=Ky;b.prototype.and=My;b.prototype.or=Vy;b.prototype.xor=qy;b.prototype.andNot=zy;b.prototype.not=Hy;b.prototype.shiftLeft=Gy;b.prototype.shiftRight=Wy;b.prototype.getLowestSetBit=$y;b.prototype.bitCount=Zy;b.prototype.testBit=Xy;b.prototype.setBit=jy;b.prototype.clearBit=tg;b.prototype.flipBit=eg;b.prototype.add=ng;b.prototype.subtract=ig;b.prototype.multiply=sg;b.prototype.divide=ag;b.prototype.remainder=og;b.prototype.divideAndRemainder=cg;b.prototype.modPow=bg;b.prototype.modInverse=Ag;b.prototype.pow=dg;b.prototype.gcd=Eg;b.prototype.isProbablePrime=Cg});var Zu=U((Xx,Yu)=>{var Ie=tt();Sr();St();var Qu=Yu.exports=Ie.sha1=Ie.sha1||{};Ie.md.sha1=Ie.md.algorithms.sha1=Qu;Qu.create=function(){$u||Ig();var e=null,t=Ie.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Ie.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Ie.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),Wu(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Ie.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Ja.substr(0,n.blockLength-a));for(var o,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)o=n.fullMessageLength[f+1]*8,c=o/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Wu(l,r,i);var h=Ie.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var Ja=null,$u=!1;function Ig(){Ja=String.fromCharCode(128),Ja+=Ie.util.fillString(String.fromCharCode(0),64),$u=!0}function Wu(e,t,r){for(var n,i,s,a,o,c,u,f,l=r.length();l>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,c=e.h4,f=0;f<16;++f)n=r.getInt32(),t[f]=n,u=o^s&(a^o),n=(i<<5|i>>>27)+u+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,u=o^s&(a^o),n=(i<<5|i>>>27)+u+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,u=s^a^o,n=(i<<5|i>>>27)+u+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,u=s^a^o,n=(i<<5|i>>>27)+u+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,u=s&a|o&(s^a),n=(i<<5|i>>>27)+u+c+2400959708+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,u=s^a^o,n=(i<<5|i>>>27)+u+c+3395469782+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,e.h4=e.h4+c|0,l-=64}}});var ju=U((Jx,Ju)=>{var Re=tt();St();Ln();Zu();var Xu=Ju.exports=Re.pkcs1=Re.pkcs1||{};Xu.encode_rsa_oaep=function(e,t,r){var n,i,s,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=Re.md.sha1.create(),a||(a=s);var o=Math.ceil(e.n.bitLength()/8),c=o-2*s.digestLength-2;if(t.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=t.length,u.maxLength=c,u}n||(n=""),s.update(n,"raw");for(var f=s.digest(),l="",h=c-t.length,y=0;y<h;y++)l+="\0";var d=f.getBytes()+l+""+t;if(!i)i=Re.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=s.digestLength,u}var p=qi(i,o-s.digestLength-1,a),x=Re.util.xorBytes(d,p,d.length),v=qi(x,s.digestLength,a),A=Re.util.xorBytes(i,v,i.length);return"\0"+A+x};Xu.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var x=new Error("RSAES-OAEP encoded message length is invalid.");throw x.length=t.length,x.expectedLength=a,x}if(i===void 0?i=Re.md.sha1.create():i.start(),s||(s=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),c=t.charAt(0),u=t.substring(1,i.digestLength+1),f=t.substring(1+i.digestLength),l=qi(f,i.digestLength,s),h=Re.util.xorBytes(u,l,u.length),y=qi(h,a-i.digestLength-1,s),d=Re.util.xorBytes(f,y,f.length),p=d.substring(0,i.digestLength),x=c!=="\0",v=0;v<i.digestLength;++v)x|=o.charAt(v)!==p.charAt(v);for(var A=1,B=i.digestLength,L=i.digestLength;L<d.length;L++){var T=d.charCodeAt(L),_=T&1^1,q=A?65534:0;x|=T&q,A=A&_,B+=A}if(x||d.charCodeAt(B)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(B+1)};function qi(e,t,r){r||(r=Re.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+a),n+=r.digest().getBytes()}return n.substring(0,t)}});var tf=U((jx,ja)=>{var nr=tt();St();Vi();Ln();(function(){if(nr.prime){ja.exports=nr.prime;return}var e=ja.exports=nr.prime=nr.prime||{},t=nr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,h){return l|h};e.generateProbablePrime=function(l,h,y){typeof h=="function"&&(y=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var p=h.prng||nr.random,x={nextBytes:function(v){for(var A=p.getBytesSync(v.length),B=0;B<v.length;++B)v[B]=A.charCodeAt(B)}};if(d.name==="PRIMEINC")return s(l,x,d.options,y);throw new Error("Invalid prime generation algorithm: "+d.name)};function s(l,h,y,d){return"workers"in y?c(l,h,y,d):a(l,h,y,d)}function a(l,h,y,d){var p=u(l,h),x=0,v=f(p.bitLength());"millerRabinTests"in y&&(v=y.millerRabinTests);var A=10;"maxBlockTime"in y&&(A=y.maxBlockTime),o(p,l,h,x,v,A,d)}function o(l,h,y,d,p,x,v){var A=+new Date;do{if(l.bitLength()>h&&(l=u(h,y)),l.isProbablePrime(p))return v(null,l);l.dAddOffset(r[d++%8],0)}while(x<0||+new Date-A<x);nr.util.setImmediate(function(){o(l,h,y,d,p,x,v)})}function c(l,h,y,d){if(typeof Worker>"u")return a(l,h,y,d);var p=u(l,h),x=y.workers,v=y.workLoad||100,A=v*30/8,B=y.workerScript||"forge/prime.worker.js";if(x===-1)return nr.util.estimateCores(function(T,_){T&&(_=2),x=_-1,L()});L();function L(){x=Math.max(1,x);for(var T=[],_=0;_<x;++_)T[_]=new Worker(B);for(var q=x,_=0;_<x;++_)T[_].addEventListener("message",Ct);var z=!1;function Ct(le){if(!z){--q;var Zt=le.data;if(Zt.found){for(var Vt=0;Vt<T.length;++Vt)T[Vt].terminate();return z=!0,d(null,new t(Zt.prime,16))}p.bitLength()>l&&(p=u(l,h));var Or=p.toString(16);le.target.postMessage({hex:Or,workLoad:v}),p.dAddOffset(A,0)}}}}function u(l,h){var y=new t(l,h),d=l-1;return y.testBit(d)||y.bitwiseTo(t.ONE.shiftLeft(d),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var Hi=U((tv,cf)=>{var P=tt();Nn();Vi();Ii();ju();tf();Ln();St();typeof H>"u"&&(H=P.jsbn.BigInteger);var H,to=P.util.isNodejs?tn():null,m=P.asn1,ce=P.util;P.pki=P.pki||{};cf.exports=P.pki.rsa=P.rsa=P.rsa||{};var O=P.pki,Rg=[6,4,2,4,2,4,6,2],kg={name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Ng={name:"RSAPrivateKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Lg={name:"RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Pg=P.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Dg={name:"DigestInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:m.Class.UNIVERSAL,type:m.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Ug=function(e){var t;if(e.algorithm in O.oids)t=O.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=m.oidToDer(t).getBytes(),i=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]),s=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]);s.value.push(m.create(m.Class.UNIVERSAL,m.Type.OID,!1,n)),s.value.push(m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,""));var a=m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),m.toDer(i).getBytes()},af=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(H.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(H.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new H(P.util.bytesToHex(P.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(H.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var a=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return a=a.multiply(n.modInverse(t.n)).mod(t.n),a};O.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=of(e,t,r)):(i=P.util.createBuffer(),i.putBytes(e));for(var a=new H(i.toHex(),16),o=af(a,t,n),c=o.toString(16),u=P.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(P.util.hexToBytes(c)),u.getBytes()};O.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var a=new H(P.util.createBuffer(e).toHex(),16);if(a.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=af(a,t,r),c=o.toString(16),u=P.util.createBuffer(),f=i-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(P.util.hexToBytes(c)),n!==!1?zi(u.getBytes(),t,r):u.getBytes()};O.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||P.random,i={nextBytes:function(o){for(var c=n.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=c.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new H(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};O.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new H(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},s=+new Date,a,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,u=c-1;e.pqState===0?(e.num=new H(c,e.rng),e.num.testBit(u)||e.num.bitwiseTo(H.ONE.shiftLeft(u),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(Og(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Rg[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(H.ONE).gcd(e.e).compareTo(H.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(H.ONE),e.q1=e.q.subtract(H.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(H.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var f=e.e.modInverse(e.phi);e.keys={privateKey:O.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:O.rsa.setPublicKey(e.n,e.e)}}a=+new Date,o+=a-s,s=a}return e.keys!==null};O.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!P.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(ef("generateKeyPair"))return to.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,c,u){if(o)return n(o);n(null,{privateKey:O.privateKeyFromPem(u),publicKey:O.publicKeyFromPem(c)})});if(rf("generateKey")&&rf("exportKey"))return ce.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:sf(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return ce.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var c=O.privateKeyFromAsn1(m.fromDer(P.util.createBuffer(o)));n(null,{privateKey:c,publicKey:O.setRsaPublicKey(c.n,c.e)})}});if(nf("generateKey")&&nf("exportKey")){var i=ce.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:sf(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var c=o.target.result,u=ce.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var l=f.target.result,h=O.privateKeyFromAsn1(m.fromDer(P.util.createBuffer(l)));n(null,{privateKey:h,publicKey:O.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){n(f)}},i.onerror=function(o){n(o)};return}}else if(ef("generateKeyPairSync")){var s=to.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:O.privateKeyFromPem(s.privateKey),publicKey:O.publicKeyFromPem(s.publicKey)}}}var a=O.rsa.createKeyPairGenerationState(e,t,r);if(!n)return O.rsa.stepKeyPairGenerationState(a,0),a.keys;Kg(a,r,n)};O.setRsaPublicKey=O.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,c,u){return of(o,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,c){return P.pkcs1.encode_rsa_oaep(c,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return O.rsa.encrypt(a,r,!0)},r.verify=function(n,i,s,a){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(c,u){u=zi(u,r,!0);var f=m.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),l={},h=[];if(!m.validate(f,Dg,l,h)){var y=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw y.errors=h,y}var d=m.derToOid(l.algorithmIdentifier);if(!(d===P.oids.md2||d===P.oids.md5||d===P.oids.sha1||d===P.oids.sha224||d===P.oids.sha256||d===P.oids.sha384||d===P.oids.sha512||d===P.oids["sha512-224"]||d===P.oids["sha512-256"])){var y=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw y.oid=d,y}if((d===P.oids.md2||d===P.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===l.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(c,u){return u=zi(u,r,!0),c===u}});var o=O.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};O.setRsaPrivateKey=O.rsa.setPrivateKey=function(e,t,r,n,i,s,a,o){var c={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:a,qInv:o};return c.decrypt=function(u,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=O.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:zi};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(y,d){return P.pkcs1.decode_rsa_oaep(d,y,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,c,!1)},c.sign=function(u,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:Ug},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},l=1);var h=f.encode(u,c.n.bitLength());return O.rsa.encrypt(h,c,l)},c};O.wrapRsaPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(O.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(e).getBytes())])};O.privateKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,kg,t,r)&&(e=m.fromDer(P.util.createBuffer(t.privateKey))),t={},r=[],!m.validate(e,Ng,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,a,o,c,u,f,l;return i=P.util.createBuffer(t.privateKeyModulus).toHex(),s=P.util.createBuffer(t.privateKeyPublicExponent).toHex(),a=P.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=P.util.createBuffer(t.privateKeyPrime1).toHex(),c=P.util.createBuffer(t.privateKeyPrime2).toHex(),u=P.util.createBuffer(t.privateKeyExponent1).toHex(),f=P.util.createBuffer(t.privateKeyExponent2).toHex(),l=P.util.createBuffer(t.privateKeyCoefficient).toHex(),O.setRsaPrivateKey(new H(i,16),new H(s,16),new H(a,16),new H(o,16),new H(c,16),new H(u,16),new H(f,16),new H(l,16))};O.privateKeyToAsn1=O.privateKeyToRSAPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.e)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.d)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.p)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.q)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.dP)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.dQ)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.qInv))])};O.publicKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,Pg,t,r)){var n=m.derToOid(t.publicKeyOid);if(n!==O.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!m.validate(e,Lg,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=P.util.createBuffer(t.publicKeyModulus).toHex(),a=P.util.createBuffer(t.publicKeyExponent).toHex();return O.setRsaPublicKey(new H(s,16),new H(a,16))};O.publicKeyToAsn1=O.publicKeyToSubjectPublicKeyInfo=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(O.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.BITSTRING,!1,[O.publicKeyToRSAPublicKey(e)])])};O.publicKeyToRSAPublicKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,ke(e.e))])};function of(e,t,r){var n=P.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var a=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var c=0;c<a;++c)n.putByte(o)}else for(;a>0;){for(var u=0,f=P.random.getBytes(a),c=0;c<a;++c)o=f.charCodeAt(c),o===0?++u:n.putByte(o);a=u}return n.putByte(0),n.putBytes(e),n}function zi(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=P.util.createBuffer(e),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(o===0){c=i-3-n;for(var u=0;u<c;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(o===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var f=s.getByte();if(f!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Kg(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(o,c){if(o)return r(o);if(e.p=c,e.q!==null)return a(o,e.q);s(e.qBits,a)})}function s(o,c){P.prime.generateProbablePrime(o,n,c)}function a(o,c){if(o)return r(o);if(e.q=c,e.p.compareTo(e.q)<0){var u=e.p;e.p=e.q,e.q=u}if(e.p.subtract(H.ONE).gcd(e.e).compareTo(H.ONE)!==0){e.p=null,i();return}if(e.q.subtract(H.ONE).gcd(e.e).compareTo(H.ONE)!==0){e.q=null,s(e.qBits,a);return}if(e.p1=e.p.subtract(H.ONE),e.q1=e.q.subtract(H.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(H.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,a);return}var f=e.e.modInverse(e.phi);e.keys={privateKey:O.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:O.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function ke(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=P.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function Og(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function ef(e){return P.util.isNodejs&&typeof to[e]=="function"}function rf(e){return typeof ce.globalScope<"u"&&typeof ce.globalScope.crypto=="object"&&typeof ce.globalScope.crypto.subtle=="object"&&typeof ce.globalScope.crypto.subtle[e]=="function"}function nf(e){return typeof ce.globalScope<"u"&&typeof ce.globalScope.msCrypto=="object"&&typeof ce.globalScope.msCrypto.subtle=="object"&&typeof ce.globalScope.msCrypto.subtle[e]=="function"}function sf(e){for(var t=P.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var pf=U((ev,df)=>{var I=tt();Ga();Nn();mu();Sr();Ii();Eu();Bu();Ln();Ku();Hi();St();typeof uf>"u"&&(uf=I.jsbn.BigInteger);var uf,w=I.asn1,F=I.pki=I.pki||{};df.exports=F.pbe=I.pbe=I.pbe||{};var Cr=F.oids,Fg={name:"EncryptedPrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Mg={name:"PBES2Algorithms",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Vg={name:"pkcs-12PbeParams",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"iterations"}]};F.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=I.random.getBytesSync(r.saltSize),i=r.count,s=w.integerToDer(i),a,o,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,l;switch(r.algorithm){case"aes128":a=16,u=16,f=Cr["aes128-CBC"],l=I.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,f=Cr["aes192-CBC"],l=I.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,f=Cr["aes256-CBC"],l=I.aes.createEncryptionCipher;break;case"des":a=8,u=8,f=Cr.desCBC,l=I.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),d=hf(y),p=I.pkcs5.pbkdf2(t,n,i,a,d),x=I.random.getBytesSync(u),v=l(p);v.start(x),v.update(w.toDer(e)),v.finish(),c=v.output.getBytes();var A=qg(n,s,a,y);o=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(Cr.pkcs5PBES2).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(Cr.pkcs5PBKDF2).getBytes()),A]),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(f).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,x)])])])}else if(r.algorithm==="3des"){a=24;var B=new I.util.ByteBuffer(n),p=F.pbe.generatePkcs12Key(t,B,1,i,a),x=F.pbe.generatePkcs12Key(t,B,2,i,a),v=I.des.createEncryptionCipher(p);v.start(x),v.update(w.toDer(e)),v.finish(),c=v.output.getBytes(),o=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(Cr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,n),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var L=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[o,w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,c)]);return L};F.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!w.validate(e,Fg,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=w.derToOid(n.encryptionOid),o=F.pbe.getCipher(a,n.encryptionParams,t),c=I.util.createBuffer(n.encryptedData);return o.update(c),o.finish()&&(r=w.fromDer(o.output)),r};F.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:w.toDer(e).getBytes()};return I.pem.encode(r,{maxline:t})};F.encryptedPrivateKeyFromPem=function(e){var t=I.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return w.fromDer(t.body)};F.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=F.wrapRsaPrivateKey(F.privateKeyToAsn1(e));return n=F.encryptPrivateKeyInfo(n,t,r),F.encryptedPrivateKeyToPem(n)}var i,s,a,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,s=I.random.getBytesSync(16),o=I.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,s=I.random.getBytesSync(16),o=I.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,s=I.random.getBytesSync(16),o=I.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,s=I.random.getBytesSync(8),o=I.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,s=I.random.getBytesSync(8),o=I.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=I.pbe.opensslDeriveBytes(t,s.substr(0,8),a),f=o(u);f.start(s),f.update(w.toDer(F.privateKeyToAsn1(e))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:I.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return I.pem.encode(l)};F.decryptRsaPrivateKey=function(e,t){var r=null,n=I.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,a;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,a=I.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=I.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=I.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=I.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=I.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(l){return I.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":s=8,a=function(l){return I.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":s=16,a=function(l){return I.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=I.util.hexToBytes(n.dekInfo.parameters),c=I.pbe.opensslDeriveBytes(t,o.substr(0,8),s),u=a(c);if(u.start(o),u.update(I.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=F.decryptPrivateKeyInfo(w.fromDer(r),t):r=w.fromDer(r),r!==null&&(r=F.privateKeyFromAsn1(r)),r};F.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var a,o;if(typeof s>"u"||s===null){if(!("sha1"in I.md))throw new Error('"sha1" hash algorithm unavailable.');s=I.md.sha1.create()}var c=s.digestLength,u=s.blockLength,f=new I.util.ByteBuffer,l=new I.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)l.putInt16(e.charCodeAt(o));l.putInt16(0)}var h=l.length(),y=t.length(),d=new I.util.ByteBuffer;d.fillWithByte(r,u);var p=u*Math.ceil(y/u),x=new I.util.ByteBuffer;for(o=0;o<p;o++)x.putByte(t.at(o%y));var v=u*Math.ceil(h/u),A=new I.util.ByteBuffer;for(o=0;o<v;o++)A.putByte(l.at(o%h));var B=x;B.putBuffer(A);for(var L=Math.ceil(i/c),T=1;T<=L;T++){var _=new I.util.ByteBuffer;_.putBytes(d.bytes()),_.putBytes(B.bytes());for(var q=0;q<n;q++)s.start(),s.update(_.getBytes()),_=s.digest();var z=new I.util.ByteBuffer;for(o=0;o<u;o++)z.putByte(_.at(o%c));var Ct=Math.ceil(y/u)+Math.ceil(h/u),le=new I.util.ByteBuffer;for(a=0;a<Ct;a++){var Zt=new I.util.ByteBuffer(B.getBytes(u)),Vt=511;for(o=z.length()-1;o>=0;o--)Vt=Vt>>8,Vt+=z.at(o)+Zt.at(o),Zt.setAt(o,Vt&255);le.putBuffer(Zt)}B=le,f.putBuffer(_)}return f.truncate(f.length()-i),f};F.pbe.getCipher=function(e,t,r){switch(e){case F.oids.pkcs5PBES2:return F.pbe.getCipherForPBES2(e,t,r);case F.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case F.oids["pbewithSHAAnd40BitRC2-CBC"]:return F.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};F.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!w.validate(t,Mg,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=w.derToOid(n.kdfOid),e!==F.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=w.derToOid(n.encOid),e!==F.oids["aes128-CBC"]&&e!==F.oids["aes192-CBC"]&&e!==F.oids["aes256-CBC"]&&e!==F.oids["des-EDE3-CBC"]&&e!==F.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=n.kdfSalt,o=I.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var c,u;switch(F.oids[e]){case"aes128-CBC":c=16,u=I.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=I.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=I.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=I.des.createDecryptionCipher;break;case"desCBC":c=8,u=I.des.createDecryptionCipher;break}var f=lf(n.prfOid),l=I.pkcs5.pbkdf2(r,a,o,c,f),h=n.encIv,y=u(l);return y.start(h),y};F.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!w.validate(t,Vg,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=I.util.createBuffer(n.salt),o=I.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var c,u,f;switch(e){case F.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=I.des.startDecrypting;break;case F.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(p,x){var v=I.rc2.createDecryptionCipher(p,40);return v.start(x,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var l=lf(n.prfOid),h=F.pbe.generatePkcs12Key(r,a,1,o,c,l);l.start();var y=F.pbe.generatePkcs12Key(r,a,2,o,u,l);return f(h,y)};F.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in I.md))throw new Error('"md5" hash algorithm unavailable.');n=I.md.md5.create()}t===null&&(t="");for(var i=[ff(n,e+t)],s=16,a=1;s<r;++a,s+=16)i.push(ff(n,i[a-1]+e+t));return i.join("").substr(0,r)};function ff(e,t){return e.start().update(t).digest().getBytes()}function lf(e){var t;if(!e)t="hmacWithSHA1";else if(t=F.oids[w.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return hf(t)}function hf(e){var t=I.md;switch(e){case"hmacWithSHA224":t=I.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function qg(e,t,r,n){var i=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,e),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,I.util.hexToBytes(r.toString(16))),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(F.oids[n]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])),i}});var Ef=U((Nv,bf)=>{var at=tt();Sr();St();var Dn=bf.exports=at.sha512=at.sha512||{};at.md.sha512=at.md.algorithms.sha512=Dn;var vf=at.sha384=at.sha512.sha384=at.sha512.sha384||{};vf.create=function(){return Dn.create("SHA-384")};at.md.sha384=at.md.algorithms.sha384=vf;at.sha512.sha256=at.sha512.sha256||{create:function(){return Dn.create("SHA-512/256")}};at.md["sha512/256"]=at.md.algorithms["sha512/256"]=at.sha512.sha256;at.sha512.sha224=at.sha512.sha224||{create:function(){return Dn.create("SHA-512/224")}};at.md["sha512/224"]=at.md.algorithms["sha512/224"]=at.sha512.sha224;Dn.create=function(e){if(wf||$g(),typeof e>"u"&&(e="SHA-512"),!(e in _r))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=_r[e],r=null,n=at.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var a=64;switch(e){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var c=o.messageLengthSize/4,u=0;u<c;++u)o.fullMessageLength.push(0);n=at.util.createBuffer(),r=new Array(t.length);for(var u=0;u<t.length;++u)r[u]=t[u].slice(0);return o},o.start(),o.update=function(c,u){u==="utf8"&&(c=at.util.encodeUtf8(c));var f=c.length;o.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=f[1],f[1]=f[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(c),xf(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var c=at.util.createBuffer();c.putBytes(n.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,f=u&o.blockLength-1;c.putBytes(ro.substr(0,o.blockLength-f));for(var l,h,y=o.fullMessageLength[0]*8,d=0;d<o.fullMessageLength.length-1;++d)l=o.fullMessageLength[d+1]*8,h=l/4294967296>>>0,y+=h,c.putInt32(y>>>0),y=l>>>0;c.putInt32(y);for(var p=new Array(r.length),d=0;d<r.length;++d)p[d]=r[d].slice(0);xf(p,i,c);var x=at.util.createBuffer(),v;e==="SHA-512"?v=p.length:e==="SHA-384"?v=p.length-2:v=p.length-4;for(var d=0;d<v;++d)x.putInt32(p[d][0]),(d!==v-1||e!=="SHA-512/224")&&x.putInt32(p[d][1]);return x},o};var ro=null,wf=!1,no=null,_r=null;function $g(){ro=String.fromCharCode(128),ro+=at.util.fillString(String.fromCharCode(0),128),no=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_r={},_r["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_r["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_r["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_r["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],wf=!0}function xf(e,t,r){for(var n,i,s,a,o,c,u,f,l,h,y,d,p,x,v,A,B,L,T,_,q,z,Ct,le,Zt,Vt,Or,ui,vt,Gt,D,Is,Rs,ks,Ns,s0=r.length();s0>=128;){for(vt=0;vt<16;++vt)t[vt][0]=r.getInt32()>>>0,t[vt][1]=r.getInt32()>>>0;for(;vt<80;++vt)Is=t[vt-2],Gt=Is[0],D=Is[1],n=((Gt>>>19|D<<13)^(D>>>29|Gt<<3)^Gt>>>6)>>>0,i=((Gt<<13|D>>>19)^(D<<3|Gt>>>29)^(Gt<<26|D>>>6))>>>0,ks=t[vt-15],Gt=ks[0],D=ks[1],s=((Gt>>>1|D<<31)^(Gt>>>8|D<<24)^Gt>>>7)>>>0,a=((Gt<<31|D>>>1)^(Gt<<24|D>>>8)^(Gt<<25|D>>>7))>>>0,Rs=t[vt-7],Ns=t[vt-16],D=i+Rs[1]+a+Ns[1],t[vt][0]=n+Rs[0]+s+Ns[0]+(D/4294967296>>>0)>>>0,t[vt][1]=D>>>0;for(p=e[0][0],x=e[0][1],v=e[1][0],A=e[1][1],B=e[2][0],L=e[2][1],T=e[3][0],_=e[3][1],q=e[4][0],z=e[4][1],Ct=e[5][0],le=e[5][1],Zt=e[6][0],Vt=e[6][1],Or=e[7][0],ui=e[7][1],vt=0;vt<80;++vt)u=((q>>>14|z<<18)^(q>>>18|z<<14)^(z>>>9|q<<23))>>>0,f=((q<<18|z>>>14)^(q<<14|z>>>18)^(z<<23|q>>>9))>>>0,l=(Zt^q&(Ct^Zt))>>>0,h=(Vt^z&(le^Vt))>>>0,o=((p>>>28|x<<4)^(x>>>2|p<<30)^(x>>>7|p<<25))>>>0,c=((p<<4|x>>>28)^(x<<30|p>>>2)^(x<<25|p>>>7))>>>0,y=(p&v|B&(p^v))>>>0,d=(x&A|L&(x^A))>>>0,D=ui+f+h+no[vt][1]+t[vt][1],n=Or+u+l+no[vt][0]+t[vt][0]+(D/4294967296>>>0)>>>0,i=D>>>0,D=c+d,s=o+y+(D/4294967296>>>0)>>>0,a=D>>>0,Or=Zt,ui=Vt,Zt=Ct,Vt=le,Ct=q,le=z,D=_+i,q=T+n+(D/4294967296>>>0)>>>0,z=D>>>0,T=B,_=L,B=v,L=A,v=p,A=x,D=i+a,p=n+s+(D/4294967296>>>0)>>>0,x=D>>>0;D=e[0][1]+x,e[0][0]=e[0][0]+p+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+A,e[1][0]=e[1][0]+v+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+L,e[2][0]=e[2][0]+B+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+_,e[3][0]=e[3][0]+T+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+z,e[4][0]=e[4][0]+q+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+le,e[5][0]=e[5][0]+Ct+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+Vt,e[6][0]=e[6][0]+Zt+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+ui,e[7][0]=e[7][0]+Or+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,s0-=128}}});var Ol=U((aE,Ko)=>{"use strict";var lm=Object.prototype.hasOwnProperty,Ht="~";function ei(){}Object.create&&(ei.prototype=Object.create(null),new ei().__proto__||(Ht=!1));function hm(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Kl(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new hm(r,n||e,i),a=Ht?Ht+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],s]:e._events[a].push(s):(e._events[a]=s,e._eventsCount++),e}function vs(e,t){--e._eventsCount===0?e._events=new ei:delete e._events[t]}function Mt(){this._events=new ei,this._eventsCount=0}Mt.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)lm.call(r,n)&&t.push(Ht?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Mt.prototype.listeners=function(t){var r=Ht?Ht+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a};Mt.prototype.listenerCount=function(t){var r=Ht?Ht+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Mt.prototype.emit=function(t,r,n,i,s,a){var o=Ht?Ht+t:t;if(!this._events[o])return!1;var c=this._events[o],u=arguments.length,f,l;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,i),!0;case 5:return c.fn.call(c.context,r,n,i,s),!0;case 6:return c.fn.call(c.context,r,n,i,s,a),!0}for(l=1,f=new Array(u-1);l<u;l++)f[l-1]=arguments[l];c.fn.apply(c.context,f)}else{var h=c.length,y;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,r);break;case 3:c[l].fn.call(c[l].context,r,n);break;case 4:c[l].fn.call(c[l].context,r,n,i);break;default:if(!f)for(y=1,f=new Array(u-1);y<u;y++)f[y-1]=arguments[y];c[l].fn.apply(c[l].context,f)}}return!0};Mt.prototype.on=function(t,r,n){return Kl(this,t,r,n,!1)};Mt.prototype.once=function(t,r,n){return Kl(this,t,r,n,!0)};Mt.prototype.removeListener=function(t,r,n,i){var s=Ht?Ht+t:t;if(!this._events[s])return this;if(!r)return vs(this,s),this;var a=this._events[s];if(a.fn)a.fn===r&&(!i||a.once)&&(!n||a.context===n)&&vs(this,s);else{for(var o=0,c=[],u=a.length;o<u;o++)(a[o].fn!==r||i&&!a[o].once||n&&a[o].context!==n)&&c.push(a[o]);c.length?this._events[s]=c.length===1?c[0]:c:vs(this,s)}return this};Mt.prototype.removeAllListeners=function(t){var r;return t?(r=Ht?Ht+t:t,this._events[r]&&vs(this,r)):(this._events=new ei,this._eventsCount=0),this};Mt.prototype.off=Mt.prototype.removeListener;Mt.prototype.addListener=Mt.prototype.on;Mt.prefixed=Ht;Mt.EventEmitter=Mt;typeof Ko<"u"&&(Ko.exports=Mt)});var mm={};Pt(mm,{PersistentPeerStore:()=>i0});var ve=K(l0(),1);var Ks={};Pt(Ks,{base58btc:()=>yt,base58flickr:()=>Ah});function vh(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=e.length,c=e.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var p=0,x=0,v=0,A=d.length;v!==A&&d[v]===0;)v++,p++;for(var B=(A-v)*f+1>>>0,L=new Uint8Array(B);v!==A;){for(var T=d[v],_=0,q=B-1;(T!==0||_<x)&&q!==-1;q--,_++)T+=256*L[q]>>>0,L[q]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");x=_,v++}for(var z=B-x;z!==B&&L[z]===0;)z++;for(var Ct=c.repeat(p);z<B;++z)Ct+=e.charAt(L[z]);return Ct}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var p=0;if(d[p]!==" "){for(var x=0,v=0;d[p]===c;)x++,p++;for(var A=(d.length-p)*u+1>>>0,B=new Uint8Array(A);d[p];){var L=r[d.charCodeAt(p)];if(L===255)return;for(var T=0,_=A-1;(L!==0||T<v)&&_!==-1;_--,T++)L+=o*B[_]>>>0,B[_]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");v=T,p++}if(d[p]!==" "){for(var q=A-v;q!==A&&B[q]===0;)q++;for(var z=new Uint8Array(x+(A-q)),Ct=x;q!==A;)z[Ct++]=B[q++];return z}}}function y(d){var p=h(d);if(p)return p;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:y}}var wh=vh,bh=wh,h0=bh;var Em=new Uint8Array(0);var d0=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},De=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var p0=e=>new TextEncoder().encode(e),y0=e=>new TextDecoder().decode(e);var Ls=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ps=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return m0(this,t)}},Ds=class{constructor(t){this.decoders=t}or(t){return m0(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},m0=(e,t)=>new Ds({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Us=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ls(t,r,n),this.decoder=new Ps(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},qr=({name:e,prefix:t,encode:r,decode:n})=>new Us(e,t,r,n),Ye=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=h0(r,t);return qr({prefix:e,name:t,encode:n,decode:s=>De(i(s))})},Eh=(e,t,r,n)=>{let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;let a=new Uint8Array(s*r/8|0),o=0,c=0,u=0;for(let f=0;f<s;++f){let l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,o+=r,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=r||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},Sh=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,s="",a=0,o=0;for(let c=0;c<e.length;++c)for(o=o<<8|e[c],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},pt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>qr({prefix:t,name:e,encode(i){return Sh(i,n,r)},decode(i){return Eh(i,n,r,e)}});var yt=Ye({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ah=Ye({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Os={};Pt(Os,{base32:()=>Jt,base32hex:()=>Th,base32hexpad:()=>Rh,base32hexpadupper:()=>kh,base32hexupper:()=>Ih,base32pad:()=>Ch,base32padupper:()=>_h,base32upper:()=>Bh,base32z:()=>Nh});var Jt=pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Bh=pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ch=pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_h=pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Th=pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ih=pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rh=pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kh=pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nh=pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Fs={};Pt(Fs,{base64:()=>zr,base64pad:()=>Lh,base64url:()=>Ph,base64urlpad:()=>Dh});var zr=pt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Lh=pt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ph=pt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Dh=pt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});ve.default.formatters.b=e=>e==null?"undefined":yt.baseEncode(e);ve.default.formatters.t=e=>e==null?"undefined":Jt.baseEncode(e);ve.default.formatters.m=e=>e==null?"undefined":zr.baseEncode(e);ve.default.formatters.p=e=>e==null?"undefined":e.toString();ve.default.formatters.c=e=>e==null?"undefined":e.toString();ve.default.formatters.k=e=>e==null?"undefined":e.toString();function se(e){return Object.assign((0,ve.default)(e),{error:(0,ve.default)(`${e}:error`),trace:(0,ve.default)(`${e}:trace`)})}var yr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ue,di=class extends EventTarget{constructor(){super(...arguments),Ue.set(this,new Map)}listenerCount(t){let r=yr(this,Ue,"f").get(t);return r==null?0:r.length}addEventListener(t,r,n){super.addEventListener(t,r,n);let i=yr(this,Ue,"f").get(t);i==null&&(i=[],yr(this,Ue,"f").set(t,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(t,r,n){super.removeEventListener(t.toString(),r??null,n);let i=yr(this,Ue,"f").get(t);i!=null&&(i=i.filter(({callback:s})=>s!==r),yr(this,Ue,"f").set(t,i))}dispatchEvent(t){let r=super.dispatchEvent(t),n=yr(this,Ue,"f").get(t.type);return n==null||(n=n.filter(({once:i})=>!i),yr(this,Ue,"f").set(t.type,n)),r}};Ue=new WeakMap;var Ms=class extends Event{constructor(t,r){super(t,r),this.detail=r?.detail}},wt=globalThis.CustomEvent??Ms;var os=K(bt(),1);var pi=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,i){return this.readAtomically(()=>{let s=0,a=0,o=this.peekChar();if(o===void 0)return;let c=o==="0",u=2**(8*i)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let h=Number.parseInt(l,t);if(!Number.isNaN(h))return h});if(f===void 0)break;if(s*=t,s+=f,s>u||(a+=1,r!==void 0&&a>r))return}if(a!==0)return!n&&c&&a>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return r[i]=a[0],r[i+1]=a[1],r[i+2]=a[2],r[i+3]=a[3],[i+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=t(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),a=16-(n+2),[o]=t(s.subarray(0,a));return r.set(s.subarray(0,o),16-o),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var w0=45,Kh=15,Hr=new pi;function b0(e){if(!(e.length>Kh))return Hr.new(e).parseWith(()=>Hr.readIPv4Addr())}function E0(e){if(!(e.length>w0))return Hr.new(e).parseWith(()=>Hr.readIPv6Addr())}function S0(e){if(!(e.length>w0))return Hr.new(e).parseWith(()=>Hr.readIPAddr())}function A0(e){return Boolean(b0(e))}function B0(e){return Boolean(E0(e))}function yi(e){return Boolean(S0(e))}var Vs={};Pt(Vs,{identity:()=>Oh});var Oh=qr({prefix:"\0",name:"identity",encode:e=>y0(e),decode:e=>p0(e)});var qs={};Pt(qs,{base2:()=>Fh});var Fh=pt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var zs={};Pt(zs,{base8:()=>Mh});var Mh=pt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Hs={};Pt(Hs,{base10:()=>Vh});var Vh=Ye({prefix:"9",name:"base10",alphabet:"0123456789"});var Gs={};Pt(Gs,{base16:()=>qh,base16upper:()=>zh});var qh=pt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zh=pt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ws={};Pt(Ws,{base36:()=>Hh,base36upper:()=>Gh});var Hh=Ye({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gh=Ye({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Qs={};Pt(Qs,{base256emoji:()=>Zh});var C0=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Wh=C0.reduce((e,t,r)=>(e[r]=t,e),[]),Qh=C0.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function $h(e){return e.reduce((t,r)=>(t+=Wh[r],t),"")}function Yh(e){let t=[];for(let r of e){let n=Qh[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var Zh=qr({prefix:"\u{1F680}",name:"base256emoji",encode:$h,decode:Yh});var Xs={};Pt(Xs,{sha256:()=>Dt,sha512:()=>yd});var Xh=I0,_0=128,Jh=127,jh=~Jh,td=Math.pow(2,31);function I0(e,t,r){t=t||[],r=r||0;for(var n=r;e>=td;)t[r++]=e&255|_0,e/=128;for(;e&jh;)t[r++]=e&255|_0,e>>>=7;return t[r]=e|0,I0.bytes=r-n+1,t}var ed=$s,rd=128,T0=127;function $s(e,n){var r=0,n=n||0,i=0,s=n,a,o=e.length;do{if(s>=o)throw $s.bytes=0,new RangeError("Could not decode varint");a=e[s++],r+=i<28?(a&T0)<<i:(a&T0)*Math.pow(2,i),i+=7}while(a>=rd);return $s.bytes=s-n,r}var nd=Math.pow(2,7),id=Math.pow(2,14),sd=Math.pow(2,21),ad=Math.pow(2,28),od=Math.pow(2,35),cd=Math.pow(2,42),ud=Math.pow(2,49),fd=Math.pow(2,56),ld=Math.pow(2,63),hd=function(e){return e<nd?1:e<id?2:e<sd?3:e<ad?4:e<od?5:e<cd?6:e<ud?7:e<fd?8:e<ld?9:10},dd={encode:Xh,decode:ed,encodingLength:hd},pd=dd,vn=pd;var wn=(e,t=0)=>[vn.decode(e,t),vn.decode.bytes],Gr=(e,t,r=0)=>(vn.encode(e,t,r),t),Wr=e=>vn.encodingLength(e);var we=(e,t)=>{let r=t.byteLength,n=Wr(e),i=n+Wr(r),s=new Uint8Array(i+r);return Gr(e,s,0),Gr(r,s,n),s.set(t,i),new Qr(e,r,t,s)},gr=e=>{let t=De(e),[r,n]=wn(t),[i,s]=wn(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new Qr(r,i,a,t)},R0=(e,t)=>{if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&d0(e.bytes,r.bytes)}},Qr=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}};var Zs=({name:e,code:t,encode:r})=>new Ys(e,t,r),Ys=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?we(this.code,r):r.then(n=>we(this.code,n))}else throw Error("Unknown type, must be binary type")}};var N0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Dt=Zs({name:"sha2-256",code:18,encode:N0("SHA-256")}),yd=Zs({name:"sha2-512",code:19,encode:N0("SHA-512")});var Js={};Pt(Js,{identity:()=>Ze});var L0=0,gd="identity",P0=De,md=e=>we(L0,P0(e)),Ze={code:L0,name:gd,encode:P0,digest:md};var t2=new TextEncoder,e2=new TextDecoder;var D0=(e,t)=>{let{bytes:r,version:n}=e;switch(n){case 0:return bd(r,js(e),t||yt.encoder);default:return Ed(r,js(e),t||Jt.encoder)}};var U0=new WeakMap,js=e=>{let t=U0.get(e);if(t==null){let r=new Map;return U0.set(e,r),r}return t},rt=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==bn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Sd)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return rt.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=we(t,r);return rt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return rt.equals(this,t)}static equals(t,r){let n=r;return n&&t.code===n.code&&t.version===n.version&&R0(t.multihash,n.multihash)}toString(t){return D0(this,t)}toJSON(){return{"/":D0(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof rt)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:s,bytes:a}=r;return new rt(n,i,s,a||K0(n,i,s.bytes))}else if(r[Ad]===!0){let{version:n,multihash:i,code:s}=r,a=gr(i);return rt.create(n,s,a)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==bn)throw new Error(`Version 0 CID must use dag-pb (code: ${bn}) block encoding`);return new rt(t,r,n,n.bytes)}case 1:{let i=K0(t,r,n.bytes);return new rt(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return rt.create(0,bn,t)}static createV1(t,r){return rt.create(1,t,r)}static decode(t){let[r,n]=rt.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=rt.inspectBytes(t),n=r.size-r.multihashSize,i=De(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),a=new Qr(r.multihashCode,r.digestSize,s,i);return[r.version===0?rt.createV0(a):rt.createV1(r.codec,a),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,h]=wn(t.subarray(r));return r+=h,l},i=n(),s=bn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=r,o=n(),c=n(),u=r+c,f=u-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:f,size:u}}static parse(t,r){let[n,i]=wd(t,r),s=rt.decode(i);return js(s).set(n,t),s}},wd=(e,t)=>{switch(e[0]){case"Q":{let r=t||yt;return[yt.prefix,r.decode(`${yt.prefix}${e}`)]}case yt.prefix:{let r=t||yt;return[yt.prefix,r.decode(e)]}case Jt.prefix:{let r=t||Jt;return[Jt.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},bd=(e,t,r)=>{let{prefix:n}=r;if(n!==yt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return i},Ed=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let s=r.encode(e);return t.set(n,s),s}else return i},bn=112,Sd=18,K0=(e,t,r)=>{let n=Wr(e),i=n+Wr(t),s=new Uint8Array(i+r.byteLength);return Gr(e,s,0),Gr(t,s,n),s.set(r,i),s},Ad=Symbol.for("@ipld/js-cid/CID");var Xe={...Vs,...qs,...zs,...Hs,...Gs,...Os,...Ws,...Ks,...Fs,...Qs},l2={...Xs,...Js};function xr(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Ke(e=0){return globalThis.Buffer?.alloc!=null?xr(globalThis.Buffer.alloc(e)):new Uint8Array(e)}function Oe(e=0){return globalThis.Buffer?.allocUnsafe!=null?xr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function F0(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var O0=F0("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),ta=F0("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Oe(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Bd={utf8:O0,"utf-8":O0,hex:Xe.base16,latin1:ta,ascii:ta,binary:ta,...Xe},mi=Bd;function J(e,t="utf8"){let r=mi[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var M0=A0,Cd=B0,ea=function(e){let t=0;if(e=e.toString().trim(),M0(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(Cd(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=M0(r[n]),a;s&&(a=ea(r[n]),r[n]=J(a.slice(0,2),"base16")),a!=null&&++n<8&&r.splice(n,0,J(a.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let i=new Uint8Array(t+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);i[t++]=s>>8&255,i[t++]=s&255}return i}throw new Error("invalid ip address")},V0=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let i=[];for(let s=0;s<r;s++)i.push(e[t+s]);return i.join(".")}if(r===16){let i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(t+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var En={},ra={},Td=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];Td.forEach(e=>{let t=Id(...e);ra[t.code]=t,En[t.name]=t});function Id(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function Et(e){if(typeof e=="number"){if(ra[e]!=null)return ra[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(En[e]!=null)return En[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var be=K(xi(),1);function _t(e,t="utf8"){let r=mi[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xr(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function Tt(e,t){t==null&&(t=e.reduce((i,s)=>i+s.length,0));let r=Oe(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return xr(r)}function j0(e,t){switch(Et(e).code){case 4:case 41:return Hd(t);case 6:case 273:case 33:case 132:return ec(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Wd(t);case 421:return Zd(t);case 444:return J0(t);case 445:return J0(t);case 466:return Yd(t);default:return J(t,"base16")}}function tc(e,t){switch(Et(e).code){case 4:return X0(t);case 41:return X0(t);case 6:case 273:case 33:case 132:return aa(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return Gd(t);case 421:return Qd(t);case 444:return Xd(t);case 445:return Jd(t);case 466:return $d(t);default:return _t(t,"base16")}}var sa=Object.values(Xe).map(e=>e.decoder),zd=function(){let e=sa[0].or(sa[1]);return sa.slice(2).forEach(t=>e=e.or(t)),e}();function X0(e){if(!yi(e))throw new Error("invalid ip address");return ea(e)}function Hd(e){let t=V0(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!yi(t))throw new Error("invalid ip address");return t}function aa(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function ec(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Gd(e){let t=_t(e),r=Uint8Array.from(be.default.encode(t.length));return Tt([r,t],r.length+t.length)}function Wd(e){let t=be.default.decode(e);if(e=e.slice(be.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return J(e)}function Qd(e){let t;e[0]==="Q"||e[0]==="1"?t=gr(yt.decode(`z${e}`)).bytes:t=rt.parse(e).multihash.bytes;let r=Uint8Array.from(be.default.encode(t.length));return Tt([r,t],r.length+t.length)}function $d(e){let t=zd.decode(e),r=Uint8Array.from(be.default.encode(t.length));return Tt([r,t],r.length+t.length)}function Yd(e){let t=be.default.decode(e),r=e.slice(be.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+J(r,"base64url")}function Zd(e){let t=be.default.decode(e),r=e.slice(be.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return J(r,"base58btc")}function Xd(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=Jt.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=aa(n);return Tt([r,i],r.length+i.length)}function Jd(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=Jt.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=aa(n);return Tt([r,i],r.length+i.length)}function J0(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=J(t,"base32"),i=ec(r);return`${n}:${i}`}var $r=K(xi(),1);function jd(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],s=Et(i);if(s.size===0){t.push([i]);continue}if(n++,n>=r.length)throw nc("invalid address: "+e);if(s.path===!0){t.push([i,la(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}function tp(e){let t=[];return e.map(r=>{let n=bi(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),la(t.join("/"))}function ep(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=bi(t);return t.length>1?[r.code,tc(r.code,t[1])]:[r.code]})}function oa(e){return e.map(t=>{let r=bi(t);return t[1]!=null?[r.code,j0(r.code,t[1])]:[r.code]})}function ca(e){return wi(Tt(e.map(t=>{let r=bi(t),n=Uint8Array.from($r.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=Tt([n,t[1]])),n})))}function ua(e,t){return e.size>0?e.size/8:e.size===0?0:$r.default.decode(t)+($r.default.decode.bytes??0)}function vi(e){let t=[],r=0;for(;r<e.length;){let n=$r.default.decode(e,r),i=$r.default.decode.bytes??0,s=Et(n),a=ua(s,e.slice(r+i));if(a===0){t.push([n]),r+=i;continue}let o=e.slice(r+i,r+i+a);if(r+=a+i,r>e.length)throw nc("Invalid address Uint8Array: "+J(e,"base16"));t.push([n,o])}return t}function fa(e){let t=vi(e),r=oa(t);return tp(r)}function rp(e){e=la(e);let t=jd(e),r=ep(t);return ca(r)}function rc(e){return rp(e)}function wi(e){let t=np(e);if(t!=null)throw t;return Uint8Array.from(e)}function np(e){try{vi(e)}catch(t){return t}}function la(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function nc(e){return new Error("Error parsing address: "+e)}function bi(e){return Et(e[0])}var da=K(xi(),1);var ac=K(bt(),1);function it(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var Yr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ha=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Sn,An,Bn,ic,sp=Symbol.for("nodejs.util.inspect.custom"),sc=[Et("dns").code,Et("dns4").code,Et("dns6").code,Et("dnsaddr").code],ap=[Et("p2p").code,Et("ipfs").code],op=new Map,oc=Symbol.for("@multiformats/js-multiaddr/multiaddr");function pa(e){return Boolean(e?.[oc])}var Fe=class{constructor(t){if(Sn.set(this,void 0),An.set(this,void 0),Bn.set(this,void 0),this[ic]=!0,t==null&&(t=""),t instanceof Uint8Array)this.bytes=wi(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=rc(t)}else if(pa(t))this.bytes=wi(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Yr(this,Sn,"f")==null&&ha(this,Sn,fa(this.bytes),"f"),Yr(this,Sn,"f")}toJSON(){return this.toString()}toOptions(){let t=this.protoCodes(),r=this.toString().split("/").slice(1),n,i;if(r.length>2)sc.includes(t[0])&&ap.includes(t[1])?(n=Et("tcp").name,i=443):(n=Et(r[2]).name,i=parseInt(r[3]));else if(sc.includes(t[0]))n=Et("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t[0]===41||t[0]===55?6:4,host:r[1],transport:n,port:i}}protos(){return this.protoCodes().map(t=>Object.assign({},Et(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let i=da.default.decode(r,n),s=da.default.decode.bytes??0,a=Et(i),o=ua(a,r.slice(n+s));n+=o+s,t.push(i)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return Yr(this,An,"f")==null&&ha(this,An,vi(this.bytes),"f"),Yr(this,An,"f")}stringTuples(){return Yr(this,Bn,"f")==null&&ha(this,Bn,oa(this.tuples()),"f"),Yr(this,Bn,"f")}encapsulate(t){return t=new Fe(t),new Fe(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Fe(n.slice(0,i))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new Fe(ca(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===En.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?J(yt.decode(`z${n}`),"base58btc"):J(rt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let t=null;try{t=this.stringTuples().filter(r=>Et(r[0]).path===!0)[0][1],t==null&&(t=null)}catch{t=null}return t}equals(t){return it(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=op.get(r.name);if(n==null)throw(0,ac.default)(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(s=>new Fe(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(Sn=new WeakMap,An=new WeakMap,Bn=new WeakMap,ic=oc,sp)](){return`Multiaddr(${fa(this.bytes)})`}};function Cn(e){return new Fe(e)}var M={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_NOT_FOUND:"ERR_NOT_FOUND"};var _l=K(bt(),1);var _a=K(va(),1),$c=K(Mc(),1),Ta=K(Ca(),1),Yc=K(Qc(),1),Zc=K(wr(),1);function gp(){Zc.default._configure(),_a.default._configure($c.default),Ta.default._configure(Yc.default)}gp();var Xc=["uint64","int64","sint64","fixed64","sfixed64"];function mp(e){for(let t of Xc){if(e[t]==null)continue;let r=e[t];e[t]=function(){return BigInt(r.call(this).toString())}}return e}function Ia(e){return mp(new _a.default(e))}function xp(e){for(let t of Xc){if(e[t]==null)continue;let r=e[t];e[t]=function(n){return r.call(this,n.toString())}}return e}function Ra(){return xp(Ta.default.create())}function Ut(e,t){let r=Ia(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function Kt(e,t){let r=Ra();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var Xr;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(Xr||(Xr={}));function Ci(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function ka(e){function t(i){if(e[i.toString()]==null)throw new Error("Invalid enum value");return e[i]}let r=function(s,a){let o=t(s);a.int32(o)},n=function(s){let a=s.int32();return t(a)};return Ci("enum",Xr.VARINT,r,n)}function Ot(e,t){return Ci("message",Xr.LENGTH_DELIMITED,e,t)}var ct;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"})(ct||(ct={}));var Na;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"})(Na||(Na={}));(function(e){e.codec=()=>ka(Na)})(ct||(ct={}));var Ae;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),ct.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.Type=ct.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})(Ae||(Ae={}));var Be;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),ct.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.Type=ct.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})(Be||(Be={}));var yw=K(Nn(),1),gw=K(pf(),1),H1=K(tt(),1),pl=K(bt(),1);var Hg=K(bt(),1);var Qt={get(e=globalThis){let t=e.crypto;if(t==null||t.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};var Gg=K(bt(),1);var lv=K(St(),1),hv=K(Vi(),1),yf=K(tt(),1);function ge(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Tt([new Uint8Array(t-r.length),r])}return J(r,"base64url")}function jt(e){let t=gf(e);return new yf.default.jsbn.BigInteger(J(t,"base16"),16)}function gf(e,t){let r=_t(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Tt([new Uint8Array(t-r.length),r])}return r}var Wg={"P-256":256,"P-384":384,"P-521":521},Qg=Object.keys(Wg),Ev=Qg.join(" / ");function eo(e){let t=e?.algorithm??"AES-GCM",r=e?.keyLength??16,n=e?.nonceLength??12,i=e?.digest??"SHA-256",s=e?.saltLength??16,a=e?.iterations??32767,o=Qt.get();r*=8;async function c(l,h){let y=o.getRandomValues(new Uint8Array(s)),d=o.getRandomValues(new Uint8Array(n)),p={name:t,iv:d};typeof h=="string"&&(h=_t(h));let x={name:"PBKDF2",salt:y,iterations:a,hash:{name:i}},v=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),A=await o.subtle.deriveKey(x,v,{name:t,length:r},!0,["encrypt"]),B=await o.subtle.encrypt(p,A,l);return Tt([y,p.iv,new Uint8Array(B)])}async function u(l,h){let y=l.subarray(0,s),d=l.subarray(s,s+n),p=l.subarray(s+n),x={name:t,iv:d};typeof h=="string"&&(h=_t(h));let v={name:"PBKDF2",salt:y,iterations:a,hash:{name:i}},A=await o.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),B=await o.subtle.deriveKey(v,A,{name:t,length:r},!0,["decrypt"]),L=await o.subtle.decrypt(x,B,p);return new Uint8Array(L)}return{encrypt:c,decrypt:u}}var po={};Pt(po,{RsaPrivateKey:()=>ln,RsaPublicKey:()=>Vn,fromJwk:()=>x1,generateKeyPair:()=>v1,unmarshalRsaPrivateKey:()=>g1,unmarshalRsaPublicKey:()=>m1});var ho=K(bt(),1);var jv=K(Ef(),1),Mn=K(tt(),1);var Yg=K(tn(),1);var G=BigInt(0),ot=BigInt(1),ir=BigInt(2),Kn=BigInt(3),Zg=BigInt(8),ft=Object.freeze({a:G,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ot,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});function Sf(e){let{a:t,b:r}=ft,n=R(e*e),i=R(n*e);return R(i+t*e+r)}var Gi=ft.a===G,Qi=class extends Error{constructor(t){super(t)}},Z=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof j))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new Z(t.x,t.y,ot)}static toAffineBatch(t){let r=e1(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return Z.toAffineBatch(t).map(Z.fromAffine)}equals(t){if(!(t instanceof Z))throw new TypeError("JacobianPoint expected");let{x:r,y:n,z:i}=this,{x:s,y:a,z:o}=t,c=R(i*i),u=R(o*o),f=R(r*u),l=R(s*c),h=R(R(n*o)*u),y=R(R(a*i)*c);return f===l&&h===y}negate(){return new Z(this.x,R(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=R(t*t),s=R(r*r),a=R(s*s),o=t+s,c=R(ir*(R(o*o)-i-a)),u=R(Kn*i),f=R(u*u),l=R(f-ir*c),h=R(u*(c-l)-Zg*a),y=R(ir*r*n);return new Z(l,h,y)}add(t){if(!(t instanceof Z))throw new TypeError("JacobianPoint expected");let{x:r,y:n,z:i}=this,{x:s,y:a,z:o}=t;if(s===G||a===G)return this;if(r===G||n===G)return t;let c=R(i*i),u=R(o*o),f=R(r*u),l=R(s*c),h=R(R(n*o)*u),y=R(R(a*i)*c),d=R(l-f),p=R(y-h);if(d===G)return p===G?this.double():Z.ZERO;let x=R(d*d),v=R(d*x),A=R(f*x),B=R(p*p-v-ir*A),L=R(p*(A-B)-h*v),T=R(i*o*d);return new Z(B,L,T)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=Z.ZERO;if(typeof t=="bigint"&&t===G)return r;let n=Cf(t);if(n===ot)return this;if(!Gi){let l=r,h=this;for(;n>G;)n&ot&&(l=l.add(h)),h=h.double(),n>>=ot;return l}let{k1neg:i,k1:s,k2neg:a,k2:o}=Tf(n),c=r,u=r,f=this;for(;s>G||o>G;)s&ot&&(c=c.add(f)),o&ot&&(u=u.add(f)),f=f.double(),s>>=ot,o>>=ot;return i&&(c=c.negate()),a&&(u=u.negate()),u=new Z(R(u.x*ft.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=Gi?128/t+1:256/t+1,n=[],i=this,s=i;for(let a=0;a<r;a++){s=i,n.push(s);for(let o=1;o<2**(t-1);o++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(t,r){!r&&this.equals(Z.BASE)&&(r=j.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&so.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=Z.normalizeZ(i),so.set(r,i)));let s=Z.ZERO,a=Z.ZERO,o=1+(Gi?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<o;h++){let y=h*c,d=Number(t&u);if(t>>=l,d>c&&(d-=f,t+=ot),d===0){let p=i[y];h%2&&(p=p.negate()),a=a.add(p)}else{let p=i[y+Math.abs(d)-1];d<0&&(p=p.negate()),s=s.add(p)}}return{p:s,f:a}}multiply(t,r){let n=Cf(t),i,s;if(Gi){let{k1neg:a,k1:o,k2neg:c,k2:u}=Tf(n),{p:f,f:l}=this.wNAF(o,r),{p:h,f:y}=this.wNAF(u,r);a&&(f=f.negate()),c&&(h=h.negate()),h=new Z(R(h.x*ft.beta),h.y,h.z),i=f.add(h),s=l.add(y)}else{let{p:a,f:o}=this.wNAF(n,r);i=a,s=o}return Z.normalizeZ([i,s])[0]}toAffine(t=un(this.z)){let{x:r,y:n,z:i}=this,s=t,a=R(s*s),o=R(a*s),c=R(r*a),u=R(n*o);if(R(i*s)!==ot)throw new Error("invZ was invalid");return new j(c,u)}};Z.BASE=new Z(ft.Gx,ft.Gy,ot);Z.ZERO=new Z(G,ot,G);var so=new WeakMap,j=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,so.delete(this)}hasEvenY(){return this.y%ir===G}static fromCompressedHex(t){let r=t.length===32,n=ze(r?t:t.subarray(1));if(!io(n))throw new Error("Point is not on curve");let i=Sf(n),s=t1(i),a=(s&ot)===ot;r?a&&(s=R(-s)):(t[0]&1)===1!==a&&(s=R(-s));let o=new j(n,s);return o.assertValidity(),o}static fromUncompressedHex(t){let r=ze(t.subarray(1,33)),n=ze(t.subarray(33,65)),i=new j(r,n);return i.assertValidity(),i}static fromHex(t){let r=cn(t),n=r.length,i=r[0];if(n===32||n===33&&(i===2||i===3))return this.fromCompressedHex(r);if(n===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return j.BASE.multiply(Yi(t))}static fromSignature(t,r,n){t=cn(t);let i=If(t),{r:s,s:a}=Rf(r);if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid recovery bit");let o=n&1?"03":"02",c=j.fromHex(o+sn(s)),{n:u}=ft,f=un(s,u),l=R(-i*f,u),h=R(a*f,u),y=j.BASE.multiplyAndAddUnsafe(c,l,h);if(!y)throw new Error("Cannot recover signature: point at infinify");return y.assertValidity(),y}toRawBytes(t=!1){return Tr(this.toHex(t))}toHex(t=!1){let r=sn(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${sn(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!io(r)||!io(n))throw new Error(t);let i=R(n*n),s=Sf(r);if(R(i-s)!==G)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new j(this.x,R(-this.y))}double(){return Z.fromAffine(this).double().toAffine()}add(t){return Z.fromAffine(this).add(Z.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Z.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Z.fromAffine(this),s=r===G||r===ot||this!==j.BASE?i.multiplyUnsafe(r):i.multiply(r),a=Z.fromAffine(t).multiplyUnsafe(n),o=s.add(a);return o.equals(Z.ZERO)?void 0:o.toAffine()}};j.BASE=new j(ft.Gx,ft.Gy);j.ZERO=new j(G,G);function Af(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Bf(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${on(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ze(r),left:e.subarray(t+2)}}function Xg(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${on(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=Bf(e.subarray(2)),{data:n,left:i}=Bf(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${on(i)}`);return{r:t,s:n}}var Ne=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?on(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new Ne($i(i.slice(0,64)),$i(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=Xg(r?t:Tr(t));return new Ne(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Fn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Fn(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=ft.n>>ot;return this.s>t}normalizeS(){return this.hasHighS()?new Ne(this.r,ft.n-this.s):this}toDERRawBytes(t=!1){return Tr(this.toDERHex(t))}toDERHex(t=!1){let r=Af(Un(this.s));if(t)return r;let n=Af(Un(this.r)),i=Un(n.length/2),s=Un(r.length/2);return`30${Un(n.length/2+r.length/2+4)}02${i}${n}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Tr(this.toCompactHex())}toCompactHex(){return sn(this.r)+sn(this.s)}};function nn(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}var Jg=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function on(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=Jg[e[r]];return t}var jg=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function sn(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(G<=e&&e<jg))throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function ao(e){let t=Tr(sn(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function Un(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function $i(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Tr(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function ze(e){return $i(on(e))}function cn(e){return e instanceof Uint8Array?Uint8Array.from(e):Tr(e)}function Cf(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Fn(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(e,t=ft.P){let r=e%t;return r>=G?r:t+r}function ue(e,t){let{P:r}=ft,n=e;for(;t-- >G;)n*=n,n%=r;return n}function t1(e){let{P:t}=ft,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),o=BigInt(88),c=e*e*e%t,u=c*c*e%t,f=ue(u,Kn)*u%t,l=ue(f,Kn)*u%t,h=ue(l,ir)*c%t,y=ue(h,n)*h%t,d=ue(y,i)*y%t,p=ue(d,a)*d%t,x=ue(p,o)*p%t,v=ue(x,a)*d%t,A=ue(v,Kn)*u%t,B=ue(A,s)*y%t,L=ue(B,r)*c%t;return ue(L,ir)}function un(e,t=ft.P){if(e===G||t<=G)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=R(e,t),n=t,i=G,s=ot,a=ot,o=G;for(;r!==G;){let u=n/r,f=n%r,l=i-a*u,h=s-o*u;n=r,r=f,i=a,s=o,a=l,o=h}if(n!==ot)throw new Error("invert: does not exist");return R(i,t)}function e1(e,t=ft.P){let r=new Array(e.length),n=e.reduce((s,a,o)=>a===G?s:(r[o]=s,R(s*a,t)),ot),i=un(n,t);return e.reduceRight((s,a,o)=>a===G?s:(r[o]=R(s*r[o],t),R(s*a,t)),i),r}var _f=(e,t)=>(e+t/ir)/t,r1={a1:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),b1:-ot*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a2:BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),b2:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),POW_2_128:BigInt("0x100000000000000000000000000000000")};function Tf(e){let{n:t}=ft,{a1:r,b1:n,a2:i,b2:s,POW_2_128:a}=r1,o=_f(s*e,t),c=_f(-n*e,t),u=R(e-o*r-c*i,t),f=R(-o*n-c*s,t),l=u>a,h=f>a;if(l&&(u=t-u),h&&(f=t-f),u>a||f>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:h,k2:f}}function If(e){let{n:t}=ft,n=e.length*8-256,i=ze(e);return n>0&&(i=i>>BigInt(n)),i>=t&&(i-=t),i}var an,On,oo=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return me.hmacSha256(this.k,...t)}hmacSync(...t){return On(this.k,...t)}checkSync(){if(typeof On!="function")throw new Qi("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.checkSync(),this.incr(),this.v=this.hmacSync(this.v),this.v}};function Fn(e){return G<e&&e<ft.n}function io(e){return G<e&&e<ft.P}function n1(e,t,r){let n=ze(e);if(!Fn(n))return;let{n:i}=ft,s=j.BASE.multiply(n),a=R(s.x,i);if(a===G)return;let o=R(un(n,i)*R(t+r*a,i),i);if(o===G)return;let c=new Ne(a,o),u=(s.x===c.r?0:2)|Number(s.y&ot);return{sig:c,recovery:u}}function Yi(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");t=$i(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");t=ze(e)}else throw new TypeError("Expected valid private key");if(!Fn(t))throw new Error("Expected private key: 0 < key < n");return t}function i1(e){return e instanceof j?(e.assertValidity(),e):j.fromHex(e)}function Rf(e){if(e instanceof Ne)return e.assertValidity(),e;try{return Ne.fromDER(e)}catch{return Ne.fromCompact(e)}}function co(e,t=!1){return j.fromPrivateKey(e).toRawBytes(t)}function kf(e){let t=e.length>32?e.slice(0,32):e;return ze(t)}function s1(e){let t=kf(e),r=R(t,ft.n);return Nf(r<G?t:r)}function Nf(e){return ao(e)}function a1(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=cn(e),i=Yi(t),s=[Nf(i),s1(n)];if(r!=null){r===!0&&(r=me.randomBytes(32));let c=cn(r);if(c.length!==32)throw new Error("sign: Expected 32 bytes of extra data");s.push(c)}let a=nn(...s),o=kf(n);return{seed:a,m:o,d:i}}function o1(e,t){let{sig:r,recovery:n}=e,{canonical:i,der:s,recovered:a}=Object.assign({canonical:!0,der:!0},t);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);let o=s?r.toDERRawBytes():r.toCompactRawBytes();return a?[o,n]:o}async function Lf(e,t,r={}){let{seed:n,m:i,d:s}=a1(e,t,r.extraEntropy),a,o=new oo;for(await o.reseed(n);!(a=n1(await o.generate(),i,s));)await o.reseed();return o1(a,r)}var c1={strict:!0};function Pf(e,t,r,n=c1){let i;try{i=Rf(e),t=cn(t)}catch{return!1}let{r:s,s:a}=i;if(n.strict&&i.hasHighS())return!1;let o=If(t),c;try{c=i1(r)}catch{return!1}let{n:u}=ft,f=un(a,u),l=R(o*f,u),h=R(s*f,u),y=j.BASE.multiplyAndAddUnsafe(c,l,h);return y?R(y.x,u)===s:!1}j.BASE._setWindowSize(8);var te={node:Yg,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Wi={},me={bytesToHex:on,hexToBytes:Tr,concatBytes:nn,mod:R,invert:un,isValidPrivateKey(e){try{return Yi(e),!0}catch{return!1}},_bigintTo32Bytes:ao,_normalizePrivateKey:Yi,hashToPrivateKey:e=>{if(e=cn(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");let t=R(ze(e),ft.n-ot)+ot;return ao(t)},randomBytes:(e=32)=>{if(te.web)return te.web.getRandomValues(new Uint8Array(e));if(te.node){let{randomBytes:t}=te.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>me.hashToPrivateKey(me.randomBytes(40)),sha256:async(...e)=>{if(te.web){let t=await te.web.subtle.digest("SHA-256",nn(...e));return new Uint8Array(t)}else if(te.node){let{createHash:t}=te.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(te.web){let r=await te.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=nn(...t),i=await te.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(te.node){let{createHmac:r}=te.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=Wi[e];if(r===void 0){let n=await me.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=nn(n,n),Wi[e]=r}return me.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof an!="function")throw new Qi("sha256Sync is undefined, you need to set it");let r=Wi[e];if(r===void 0){let n=an(Uint8Array.from(e,i=>i.charCodeAt(0)));r=nn(n,n),Wi[e]=r}return an(r,...t)},precompute(e=8,t=j.BASE){let r=t===j.BASE?t:new j(t.x,t.y);return r._setWindowSize(e),r.multiply(Kn),r}};Object.defineProperties(me,{sha256Sync:{configurable:!1,get(){return an},set(e){an||(an=e)}},hmacSha256Sync:{configurable:!1,get(){return On},set(e){On||(On=e)}}});var Df=K(bt(),1);function Zi(e){if(isNaN(e)||e<=0)throw(0,Df.default)(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return me.randomBytes(e)}var Ir={};Pt(Ir,{jwkToPkcs1:()=>l1,jwkToPkix:()=>d1,pkcs1ToJwk:()=>f1,pkixToJwk:()=>h1});var Dv=K(Nn(),1),Uv=K(Hi(),1),He=K(tt(),1);var uo=K(bt(),1);function f1(e){let t=He.default.asn1.fromDer(J(e,"ascii")),r=He.default.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:ge(r.n),e:ge(r.e),d:ge(r.d),p:ge(r.p),q:ge(r.q),dp:ge(r.dP),dq:ge(r.dQ),qi:ge(r.qInv),alg:"RS256"}}function l1(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw(0,uo.default)(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let t=He.default.pki.privateKeyToAsn1({n:jt(e.n),e:jt(e.e),d:jt(e.d),p:jt(e.p),q:jt(e.q),dP:jt(e.dp),dQ:jt(e.dq),qInv:jt(e.qi)});return _t(He.default.asn1.toDer(t).getBytes(),"ascii")}function h1(e){let t=He.default.asn1.fromDer(J(e,"ascii")),r=He.default.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:ge(r.n),e:ge(r.e)}}function d1(e){if(e.n==null||e.e==null)throw(0,uo.default)(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let t=He.default.pki.publicKeyToAsn1({n:jt(e.n),e:jt(e.e)});return _t(He.default.asn1.toDer(t).getBytes(),"ascii")}var Mv=K(Hi(),1),fo=K(tt(),1);function Uf(e,t){return t.map(r=>jt(e[r]))}function Kf(e){return fo.default.pki.setRsaPrivateKey(...Uf(e,["n","e","d","p","q","dp","dq","qi"]))}function Of(e){return fo.default.pki.setRsaPublicKey(...Uf(e,["n","e"]))}var Ff=K(bt(),1);async function Mf(e){let t=await Qt.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await zf(t);return{privateKey:r[0],publicKey:r[1]}}async function lo(e){let r=[await Qt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await p1(e)],n=await zf({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function Vf(e,t){let r=await Qt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Qt.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}async function qf(e,t,r){let n=await Qt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await Qt.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}async function zf(e){if(e.privateKey==null||e.publicKey==null)throw(0,Ff.default)(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([Qt.get().subtle.exportKey("jwk",e.privateKey),Qt.get().subtle.exportKey("jwk",e.publicKey)])}async function p1(e){return await Qt.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Hf(e,t,r,n){let i=t?Of(e):Kf(e),s=J(Uint8Array.from(r),"ascii"),a=n(s,i);return _t(a,"ascii")}function Gf(e,t){return Hf(e,!0,t,(r,n)=>n.encrypt(r))}function Wf(e,t){return Hf(e,!1,t,(r,n)=>n.decrypt(r))}async function fn(e,t){let n=await eo().encrypt(e,t);return zr.encode(n)}var Vn=class{constructor(t){this._key=t}async verify(t,r){return await qf(this._key,r,t)}marshal(){return Ir.jwkToPkix(this._key)}get bytes(){return Ae.encode({Type:ct.RSA,Data:this.marshal()}).subarray()}encrypt(t){return Gf(this._key,t)}equals(t){return it(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Dt.digest(this.bytes);return t}},ln=class{constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return Zi(16)}async sign(t){return await Vf(this._key,t)}get public(){if(this._publicKey==null)throw(0,ho.default)(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Vn(this._publicKey)}decrypt(t){return Wf(this._key,t)}marshal(){return Ir.jwkToPkcs1(this._key)}get bytes(){return Be.encode({Type:ct.RSA,Data:this.marshal()}).subarray()}equals(t){return it(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Dt.digest(this.bytes);return t}async id(){let t=await this.public.hash();return J(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new Mn.default.util.ByteBuffer(this.marshal()),i=Mn.default.asn1.fromDer(n),s=Mn.default.pki.privateKeyFromAsn1(i),a={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Mn.default.pki.encryptRsaPrivateKey(s,t,a)}else{if(r==="libp2p-key")return await fn(this.bytes,t);throw(0,ho.default)(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function g1(e){let t=Ir.pkcs1ToJwk(e),r=await lo(t);return new ln(r.privateKey,r.publicKey)}function m1(e){let t=Ir.pkixToJwk(e);return new Vn(t)}async function x1(e){let t=await lo(e);return new ln(t.privateKey,t.publicKey)}async function v1(e){let t=await Mf(e);return new ln(t.privateKey,t.publicKey)}var Ao={};Pt(Ao,{Ed25519PrivateKey:()=>kr,Ed25519PublicKey:()=>Wn,generateKeyPair:()=>F1,generateKeyPairFromSeed:()=>al,unmarshalEd25519PrivateKey:()=>K1,unmarshalEd25519PublicKey:()=>O1});var So=K(bt(),1);var w1=K(tn(),1);var Lt=BigInt(0),Q=BigInt(1),hn=BigInt(2),Qf=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),lt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Qf,n:Qf,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var Xf=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),qn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),ew=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),b1=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),E1=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),S1=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),A1=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),W=class{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof ht))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(ht.ZERO)?W.ZERO:new W(t.x,t.y,Q,E(t.x*t.y))}static toAffineBatch(t){let r=_1(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){$f(t);let{x:r,y:n,z:i}=this,{x:s,y:a,z:o}=t,c=E(r*o),u=E(s*i),f=E(n*o),l=E(a*i);return c===u&&f===l}negate(){return new W(E(-this.x),this.y,this.z,E(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=lt,s=E(t*t),a=E(r*r),o=E(hn*E(n*n)),c=E(i*s),u=t+r,f=E(E(u*u)-s-a),l=c+a,h=l-o,y=c-a,d=E(f*h),p=E(l*y),x=E(f*y),v=E(h*l);return new W(d,p,v,x)}add(t){$f(t);let{x:r,y:n,z:i,t:s}=this,{x:a,y:o,z:c,t:u}=t,f=E((n-r)*(o+a)),l=E((n+r)*(o-a)),h=E(l-f);if(h===Lt)return this.double();let y=E(i*hn*u),d=E(s*hn*c),p=d+y,x=l+f,v=d-y,A=E(p*h),B=E(x*v),L=E(p*v),T=E(h*x);return new W(A,B,T,L)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,s=i;for(let a=0;a<r;a++){s=i,n.push(s);for(let o=1;o<2**(t-1);o++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(t,r){!r&&this.equals(W.BASE)&&(r=ht.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&vo.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=W.normalizeZ(i),vo.set(r,i)));let s=W.ZERO,a=W.ZERO,o=1+256/n,c=2**(n-1),u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<o;h++){let y=h*c,d=Number(t&u);if(t>>=l,d>c&&(d-=f,t+=Q),d===0){let p=i[y];h%2&&(p=p.negate()),a=a.add(p)}else{let p=i[y+Math.abs(d)-1];d<0&&(p=p.negate()),s=s.add(p)}}return W.normalizeZ([s,a])[0]}multiply(t,r){return this.wNAF(Ji(t,lt.l),r)}multiplyUnsafe(t){let r=Ji(t,lt.l,!1),n=W.BASE,i=W.ZERO;if(r===Lt)return i;if(this.equals(i)||r===Q)return this;if(this.equals(n))return this.wNAF(r);let s=i,a=this;for(;r>Lt;)r&Q&&(s=s.add(a)),a=a.double(),r>>=Q;return s}isSmallOrder(){return this.multiplyUnsafe(lt.h).equals(W.ZERO)}isTorsionFree(){return this.multiplyUnsafe(lt.l).equals(W.ZERO)}toAffine(t=ji(this.z)){let{x:r,y:n,z:i}=this,s=E(r*t),a=E(n*t);if(E(i*t)!==Q)throw new Error("invZ was invalid");return new ht(s,a)}fromRistrettoBytes(){go()}toRistrettoBytes(){go()}fromRistrettoHash(){go()}};W.BASE=new W(lt.Gx,lt.Gy,Q,E(lt.Gx*lt.Gy));W.ZERO=new W(Lt,Q,Q,Lt);function $f(e){if(!(e instanceof W))throw new TypeError("ExtendedPoint expected")}function yo(e){if(!(e instanceof $t))throw new TypeError("RistrettoPoint expected")}function go(){throw new Error("Legacy method: switch to RistrettoPoint")}var $t=class{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=lt,n=E(qn*t*t),i=E((n+Q)*S1),s=BigInt(-1),a=E((s-r*n)*E(n+r)),{isValid:o,value:c}=bo(i,a),u=E(c*t);ar(u)||(u=E(-u)),o||(c=u),o||(s=n);let f=E(s*(n-Q)*A1-a),l=c*c,h=E((c+c)*a),y=E(f*b1),d=E(Q-l),p=E(Q+l);return new W(E(h*p),E(d*y),E(y*p),E(h*d))}static hashToCurve(t){t=or(t,64);let r=mo(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=mo(t.slice(32,64)),s=this.calcElligatorRistrettoMap(i);return new $t(n.add(s))}static fromHex(t){t=or(t,32);let{a:r,d:n}=lt,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=mo(t);if(!I1(zn(s),t)||ar(s))throw new Error(i);let a=E(s*s),o=E(Q+r*a),c=E(Q-r*a),u=E(o*o),f=E(c*c),l=E(r*n*u-f),{isValid:h,value:y}=Zf(E(l*f)),d=E(y*c),p=E(y*d*l),x=E((s+s)*d);ar(x)&&(x=E(-x));let v=E(o*p),A=E(x*v);if(!h||ar(A)||v===Lt)throw new Error(i);return new $t(new W(x,v,Q,A))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,s=E(E(n+r)*E(n-r)),a=E(t*r),o=E(a*a),{value:c}=Zf(E(s*o)),u=E(c*s),f=E(c*a),l=E(u*f*i),h;if(ar(i*l)){let d=E(r*qn),p=E(t*qn);t=d,r=p,h=E(u*E1)}else h=f;ar(t*l)&&(r=E(-r));let y=E((n-r)*h);return ar(y)&&(y=E(-y)),zn(y)}toHex(){return Hn(this.toRawBytes())}toString(){return this.toHex()}equals(t){yo(t);let r=this.ep,n=t.ep,i=E(r.x*n.y)===E(r.y*n.x),s=E(r.y*n.y)===E(r.x*n.x);return i||s}add(t){return yo(t),new $t(this.ep.add(t.ep))}subtract(t){return yo(t),new $t(this.ep.subtract(t.ep))}multiply(t){return new $t(this.ep.multiply(t))}multiplyUnsafe(t){return new $t(this.ep.multiplyUnsafe(t))}};$t.BASE=new $t(W.BASE);$t.ZERO=new $t(W.ZERO);var vo=new WeakMap,ht=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,vo.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=lt;t=or(t,32);let s=t.slice();s[31]=t[31]&-129;let a=Gn(s);if(r&&a>=i)throw new Error("Expected 0 < hex < P");if(!r&&a>=Xf)throw new Error("Expected 0 < hex < 2**256");let o=E(a*a),c=E(o-Q),u=E(n*o+Q),{isValid:f,value:l}=bo(c,u);if(!f)throw new Error("Point.fromHex: invalid y coordinate");let h=(l&Q)===Q;return(t[31]&128)!==0!==h&&(l=E(-l)),new ht(l,a)}static async fromPrivateKey(t){return(await ts(t)).point}toRawBytes(){let t=zn(this.y);return t[31]|=this.x&Q?128:0,t}toHex(){return Hn(this.toRawBytes())}toX25519(){let{y:t}=this,r=E((Q+t)*ji(Q-t));return zn(r)}isTorsionFree(){return W.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new ht(E(-this.x),this.y)}add(t){return W.fromAffine(this).add(W.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return W.fromAffine(this).multiply(t,this).toAffine()}};ht.BASE=new ht(lt.Gx,lt.Gy);ht.ZERO=new ht(Lt,Q);var Rr=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=or(t,64),n=ht.fromHex(r.slice(0,32),!1),i=Gn(r.slice(32,64));return new Rr(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof ht))throw new Error("Expected Point instance");return Ji(r,lt.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(zn(this.s),32),t}toHex(){return Hn(this.toRawBytes())}};function Yf(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}var B1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hn(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=B1[e[r]];return t}function wo(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function Jf(e){let r=e.toString(16).padStart(64,"0");return wo(r)}function zn(e){return Jf(e).reverse()}function ar(e){return(E(e)&Q)===Q}function Gn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Hn(Uint8Array.from(e).reverse()))}var C1=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function mo(e){return E(Gn(e)&C1)}function E(e,t=lt.P){let r=e%t;return r>=Lt?r:t+r}function ji(e,t=lt.P){if(e===Lt||t<=Lt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=E(e,t),n=t,i=Lt,s=Q,a=Q,o=Lt;for(;r!==Lt;){let u=n/r,f=n%r,l=i-a*u,h=s-o*u;n=r,r=f,i=a,s=o,a=l,o=h}if(n!==Q)throw new Error("invert: does not exist");return E(i,t)}function _1(e,t=lt.P){let r=new Array(e.length),n=e.reduce((s,a,o)=>a===Lt?s:(r[o]=s,E(s*a,t)),Q),i=ji(n,t);return e.reduceRight((s,a,o)=>a===Lt?s:(r[o]=E(s*r[o],t),E(s*a,t)),i),r}function Le(e,t){let{P:r}=lt,n=e;for(;t-- >Lt;)n*=n,n%=r;return n}function T1(e){let{P:t}=lt,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),a=BigInt(80),c=e*e%t*e%t,u=Le(c,hn)*c%t,f=Le(u,Q)*e%t,l=Le(f,r)*f%t,h=Le(l,n)*l%t,y=Le(h,i)*h%t,d=Le(y,s)*y%t,p=Le(d,a)*d%t,x=Le(p,a)*d%t,v=Le(x,n)*l%t;return{pow_p_5_8:Le(v,hn)*e%t,b2:c}}function bo(e,t){let r=E(t*t*t),n=E(r*r*t),i=T1(e*n).pow_p_5_8,s=E(e*r*i),a=E(t*s*s),o=s,c=E(s*qn),u=a===e,f=a===E(-e),l=a===E(-e*qn);return u&&(s=o),(f||l)&&(s=c),ar(s)&&(s=E(-s)),{isValid:u||f,value:s}}function Zf(e){return bo(Q,e)}function Xi(e){return E(Gn(e),lt.l)}function I1(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function or(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):wo(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Ji(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(Lt<e)return e}else if(Lt<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function R1(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function k1(e){if(e=typeof e=="bigint"||typeof e=="number"?Jf(Ji(e,Xf)):or(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function N1(e){let t=R1(e.slice(0,32)),r=e.slice(32,64),n=Xi(t),i=ht.BASE.multiply(n),s=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:s}}var xo;async function ts(e){return N1(await cr.sha512(k1(e)))}async function Eo(e){return(await ts(e)).pointBytes}async function jf(e,t){e=or(e);let{prefix:r,scalar:n,pointBytes:i}=await ts(t),s=Xi(await cr.sha512(r,e)),a=ht.BASE.multiply(s),o=Xi(await cr.sha512(a.toRawBytes(),i,e)),c=E(s+o*n,lt.l);return new Rr(a,c).toRawBytes()}function L1(e,t,r){t=or(t),r instanceof ht||(r=ht.fromHex(r,!1));let{r:n,s:i}=e instanceof Rr?e.assertValidity():Rr.fromHex(e),s=W.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:s,pub:r,msg:t}}function P1(e,t,r,n){let i=Xi(n),s=W.fromAffine(e).multiplyUnsafe(i);return W.fromAffine(t).add(s).subtract(r).multiplyUnsafe(lt.h).equals(W.ZERO)}async function tl(e,t,r){let{r:n,SB:i,msg:s,pub:a}=L1(e,t,r),o=await cr.sha512(n.toRawBytes(),a.toRawBytes(),s);return P1(a,n,i,o)}ht.BASE._setWindowSize(8);var sr={node:w1,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},cr={bytesToHex:Hn,hexToBytes:wo,concatBytes:Yf,getExtendedPublicKey:ts,mod:E,invert:ji,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=or(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return E(Gn(e),lt.l-Q)+Q},randomBytes:(e=32)=>{if(sr.web)return sr.web.getRandomValues(new Uint8Array(e));if(sr.node){let{randomBytes:t}=sr.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>cr.randomBytes(32),sha512:async(...e)=>{let t=Yf(...e);if(sr.web){let r=await sr.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(sr.node)return Uint8Array.from(sr.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=ht.BASE){let r=t.equals(ht.BASE)?t:new ht(t.x,t.y);return r._setWindowSize(e),r.multiply(hn),r},sha512Sync:void 0};Object.defineProperties(cr,{sha512Sync:{configurable:!1,get(){return xo},set(e){xo||(xo=e)}}});var dn=32,Ge=64,es=32;async function el(){let e=cr.randomPrivateKey(),t=await Eo(e);return{privateKey:sl(e,t),publicKey:t}}async function rl(e){if(e.length!==es)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=await Eo(t);return{privateKey:sl(t,r),publicKey:r}}async function nl(e,t){let r=e.subarray(0,es);return await jf(t,r)}async function il(e,t,r){return await tl(t,r,e)}function sl(e,t){let r=new Uint8Array(Ge);for(let n=0;n<es;n++)r[n]=e[n],r[es+n]=t[n];return r}var Wn=class{constructor(t){this._key=pn(t,dn)}async verify(t,r){return await il(this._key,r,t)}marshal(){return this._key}get bytes(){return Ae.encode({Type:ct.Ed25519,Data:this.marshal()}).subarray()}equals(t){return it(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Dt.digest(this.bytes);return t}},kr=class{constructor(t,r){this._key=pn(t,Ge),this._publicKey=pn(r,dn)}async sign(t){return await nl(this._key,t)}get public(){return new Wn(this._publicKey)}marshal(){return this._key}get bytes(){return Be.encode({Type:ct.Ed25519,Data:this.marshal()}).subarray()}equals(t){return it(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Dt.digest(this.bytes);return t}async id(){let t=await Ze.digest(this.public.bytes);return yt.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return await fn(this.bytes,t);throw(0,So.default)(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function K1(e){if(e.length>Ge){e=pn(e,Ge+dn);let n=e.subarray(0,Ge),i=e.subarray(Ge,e.length);return new kr(n,i)}e=pn(e,Ge);let t=e.subarray(0,Ge),r=e.subarray(dn);return new kr(t,r)}function O1(e){return e=pn(e,dn),new Wn(e)}async function F1(){let{privateKey:e,publicKey:t}=await el();return new kr(e,t)}async function al(e){let{privateKey:t,publicKey:r}=await rl(e);return new kr(t,r)}function pn(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw(0,So.default)(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}var Co={};Pt(Co,{Secp256k1PrivateKey:()=>$n,Secp256k1PublicKey:()=>Qn,generateKeyPair:()=>z1,unmarshalSecp256k1PrivateKey:()=>V1,unmarshalSecp256k1PublicKey:()=>q1});var dl=K(bt(),1);var yn=K(bt(),1);function ol(){return me.randomPrivateKey()}async function cl(e,t){let{digest:r}=await Dt.digest(t);try{return await Lf(r,e)}catch(n){throw(0,yn.default)(n,"ERR_INVALID_INPUT")}}async function ul(e,t,r){try{let{digest:n}=await Dt.digest(r);return Pf(t,n,e)}catch(n){throw(0,yn.default)(n,"ERR_INVALID_INPUT")}}function fl(e){return j.fromHex(e).toRawBytes(!0)}function ll(e){try{co(e,!0)}catch(t){throw(0,yn.default)(t,"ERR_INVALID_PRIVATE_KEY")}}function Bo(e){try{j.fromHex(e)}catch(t){throw(0,yn.default)(t,"ERR_INVALID_PUBLIC_KEY")}}function hl(e){try{return co(e,!0)}catch(t){throw(0,yn.default)(t,"ERR_INVALID_PRIVATE_KEY")}}var Qn=class{constructor(t){Bo(t),this._key=t}async verify(t,r){return await ul(this._key,r,t)}marshal(){return fl(this._key)}get bytes(){return Ae.encode({Type:ct.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return it(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Dt.digest(this.bytes);return t}},$n=class{constructor(t,r){this._key=t,this._publicKey=r??hl(t),ll(this._key),Bo(this._publicKey)}async sign(t){return await cl(this._key,t)}get public(){return new Qn(this._publicKey)}marshal(){return this._key}get bytes(){return Be.encode({Type:ct.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return it(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Dt.digest(this.bytes);return t}async id(){let t=await this.public.hash();return J(t,"base58btc")}async export(t,r="libp2p-key"){if(r==="libp2p-key")return await fn(this.bytes,t);throw(0,dl.default)(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function V1(e){return new $n(e)}function q1(e){return new Qn(e)}async function z1(){let e=await ol();return new $n(e)}var Nr={rsa:po,ed25519:Ao,secp256k1:Co};function yl(e){let t=Object.keys(Nr).join(" / ");return(0,pl.default)(new Error(`invalid or unsupported key type ${e}. Must be ${t}`),"ERR_UNSUPPORTED_KEY_TYPE")}function gl(e){let t=Ae.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case ct.RSA:return Nr.rsa.unmarshalRsaPublicKey(r);case ct.Ed25519:return Nr.ed25519.unmarshalEd25519PublicKey(r);case ct.Secp256k1:return Nr.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw yl(t.Type??"RSA")}}async function ml(e){let t=Be.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case ct.RSA:return await Nr.rsa.unmarshalRsaPrivateKey(r);case ct.Ed25519:return Nr.ed25519.unmarshalEd25519PrivateKey(r);case ct.Secp256k1:return Nr.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw yl(t.Type??"RSA")}}var xl={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var Yn;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.publicKey!=null&&r.publicKey.byteLength>0)&&(n.uint32(10),n.bytes(r.publicKey)),(i.writeDefaults===!0||r.payloadType!=null&&r.payloadType.byteLength>0)&&(n.uint32(18),n.bytes(r.payloadType)),(i.writeDefaults===!0||r.payload!=null&&r.payload.byteLength>0)&&(n.uint32(26),n.bytes(r.payload)),(i.writeDefaults===!0||r.signature!=null&&r.signature.byteLength>0)&&(n.uint32(42),n.bytes(r.signature)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.publicKey=r.bytes();break;case 2:i.payloadType=r.bytes();break;case 3:i.payload=r.bytes();break;case 5:i.signature=r.bytes();break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})(Yn||(Yn={}));var bl=K(bt(),1);var vl=Symbol.for("@libp2p/peer-id");var G1=Symbol.for("nodejs.util.inspect.custom"),wl=Object.values(Xe).map(e=>e.decoder).reduce((e,t)=>e.or(t),Xe.identity.decoder),El=114,_o=36,To=37,Zn=class{constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[vl](){return!0}toString(){return this.string==null&&(this.string=yt.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return rt.createV1(El,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return it(this.multihash.bytes,t);if(typeof t=="string")return W1(t).equals(this);if(t?.multihash?.bytes!=null)return it(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[G1](){return`PeerId(${this.toString()})`}},Lr=class extends Zn{constructor(t){super({...t,type:"RSA"}),this.type="RSA",this.publicKey=t.publicKey}},Pr=class extends Zn{constructor(t){super({...t,type:"Ed25519"}),this.type="Ed25519",this.publicKey=t.multihash.digest}},Dr=class extends Zn{constructor(t){super({...t,type:"secp256k1"}),this.type="secp256k1",this.publicKey=t.multihash.digest}};function mt(e){if(e.type==="RSA")return new Lr(e);if(e.type==="Ed25519")return new Pr(e);if(e.type==="secp256k1")return new Dr(e);throw(0,bl.default)(new Error("Not a PeerId"),"ERR_INVALID_PARAMETERS")}function W1(e,t){if(t=t??wl,e.charAt(0)==="1"||e.charAt(0)==="Q"){let r=gr(yt.decode(`z${e}`));return e.startsWith("12D")?new Pr({multihash:r}):e.startsWith("16U")?new Dr({multihash:r}):new Lr({multihash:r})}return Xn(wl.decode(e))}function Xn(e){try{let t=gr(e);if(t.code===Ze.code){if(t.digest.length===_o)return new Pr({multihash:t});if(t.digest.length===To)return new Dr({multihash:t})}if(t.code===Dt.code)return new Lr({multihash:t})}catch{return Q1(rt.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function Q1(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==El)throw new Error("Supplied PeerID CID is invalid");let t=e.multihash;if(t.code===Dt.code)return new Lr({multihash:e.multihash});if(t.code===Ze.code){if(t.digest.length===_o)return new Pr({multihash:e.multihash});if(t.digest.length===To)return new Dr({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Sl(e,t){return e.length===_o?new Pr({multihash:we(Ze.code,e),privateKey:t}):e.length===To?new Dr({multihash:we(Ze.code,e),privateKey:t}):new Lr({multihash:await Dt.digest(e),publicKey:e,privateKey:t})}var Bl=Symbol.for("@achingbrain/uint8arraylist");function Al(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let i=r+n.byteLength;if(t<i)return{buf:n,index:t-r};r=i}throw new RangeError("index is out of bounds")}function rs(e){return Boolean(e?.[Bl])}var ur=class{constructor(...t){Object.defineProperty(this,Bl,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(rs(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(rs(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=Al(this.bufs,t);return r.buf[r.index]}set(t,r){let n=Al(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(rs(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:i}=this._subList(t,r);return Tt(n,i)}subarray(t,r){let{bufs:n,length:i}=this._subList(t,r);return n.length===1?n[0]:Tt(n,i)}sublist(t,r){let{bufs:n,length:i}=this._subList(t,r),s=new ur;return s.length=i,s.bufs=n,s}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let s=0;s<this.bufs.length;s++){let a=this.bufs[s],o=i,c=o+a.byteLength;if(i=c,t>=c)continue;let u=t>=o&&t<c,f=r>o&&r<=c;if(u&&f){if(t===o&&r===c){n.push(a);break}let l=t-o;n.push(a.subarray(l,l+(r-t)));break}if(u){if(t===0){n.push(a);continue}n.push(a.subarray(t-o));continue}if(f){if(r===c){n.push(a);break}n.push(a.subarray(0,r-o));break}n.push(a)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!rs(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let s=256,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=-1;for(let l=0;l<i;l++)a[n[l]]=l;let o=a,c=this.byteLength-n.byteLength,u=n.byteLength-1,f;for(let l=r;l<=c;l+=f){f=0;for(let h=u;h>=0;h--){let y=this.get(l+h);if(n[h]!==y){f=Math.max(1,h-o[y]);break}}if(f===0)return l}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=Oe(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let i=Ke(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let i=Ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let i=Ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=Oe(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let i=Ke(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let i=Ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let i=Ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let i=Ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let i=Ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,t)}equals(t){if(t==null||!(t instanceof ur)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!it(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new ur;return n.bufs=t,r==null&&(r=t.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}};function ns(e){return e instanceof Uint8Array?{get(t){return e[t]},set(t,r){e[t]=r}}:{get(t){return e.get(t)},set(t,r){e.set(t,r)}}}var Cl=4294967296,ee=class{constructor(t=0,r=0){this.hi=t,this.lo=r}toBigInt(t){if(t===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(t){return Number(this.toBigInt(t))}zzDecode(){let t=-(this.lo&1),r=((this.lo>>>1|this.hi<<31)^t)>>>0,n=(this.hi>>>1^t)>>>0;return new ee(n,r)}zzEncode(){let t=this.hi>>31,r=((this.hi<<1|this.lo>>>31)^t)>>>0,n=(this.lo<<1^t)>>>0;return new ee(r,n)}toBytes(t,r=0){let n=ns(t);for(;this.hi>0;)n.set(r++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(r++,this.lo&127|128),this.lo=this.lo>>>7;n.set(r++,this.lo)}static fromBigInt(t){if(t===0n)return new ee;let r=t<0;r&&(t=-t);let n=Number(t>>32n)|0,i=Number(t-(BigInt(n)<<32n))|0;return r&&(n=~n>>>0,i=~i>>>0,++i>Cl&&(i=0,++n>Cl&&(n=0))),new ee(n,i)}static fromNumber(t){if(t===0)return new ee;let r=t<0;r&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new ee(i,n)}static fromBytes(t,r=0){let n=ns(t),i=new ee,s=0;if(t.length-r>4){for(;s<4;++s)if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i;if(i.lo=(i.lo|(n.get(r)&127)<<28)>>>0,i.hi=(i.hi|(n.get(r)&127)>>4)>>>0,n.get(r++)<128)return i;s=0}else for(;s<4;++s){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i}if(t.length-r>4){for(;s<5;++s)if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}else if(r<t.byteLength)for(;s<5;++s){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}throw RangeError("invalid varint encoding")}};var $1=Math.pow(2,7),Y1=Math.pow(2,14),Z1=Math.pow(2,21),X1=Math.pow(2,28),J1=Math.pow(2,35),j1=Math.pow(2,42),tm=Math.pow(2,49),em=Math.pow(2,56),rm=Math.pow(2,63),Jn={encodingLength(e){return e<$1?1:e<Y1?2:e<Z1?3:e<X1?4:e<J1?5:e<j1?6:e<tm?7:e<em?8:e<rm?9:10},encode(e,t,r=0){if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return t==null&&(t=Oe(Jn.encodingLength(e))),ee.fromNumber(e).toBytes(t,r),t},decode(e,t=0){return ee.fromBytes(e,t).toNumber(!0)}};var nm,re=class{constructor(t){let{peerId:r,payloadType:n,payload:i,signature:s}=t;this.peerId=r,this.payloadType=n,this.payload=i,this.signature=s}marshal(){if(this.peerId.publicKey==null)throw new Error("Missing public key");return this.marshaled==null&&(this.marshaled=Yn.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(t){return it(this.marshal(),t.marshal())}async validate(t){let r=Tl(t,this.payloadType,this.payload);if(this.peerId.publicKey==null)throw new Error("Missing public key");return await gl(this.peerId.publicKey).verify(r.subarray(),this.signature)}};nm=re;re.createFromProtobuf=async e=>{let t=Yn.decode(e),r=await Sl(t.publicKey);return new re({peerId:r,payloadType:t.payloadType,payload:t.payload,signature:t.signature})};re.seal=async(e,t)=>{if(t.privateKey==null)throw new Error("Missing private key");let r=e.domain,n=e.codec,i=e.marshal(),s=Tl(r,n,i),o=await(await ml(t.privateKey)).sign(s.subarray());return new re({peerId:t,payloadType:n,payload:i,signature:o})};re.openAndCertify=async(e,t)=>{let r=await re.createFromProtobuf(e);if(!await r.validate(t))throw(0,_l.default)(new Error("envelope signature is not valid for the given domain"),xl.ERR_SIGNATURE_NOT_VALID);return r};var Tl=(e,t,r)=>{let n=_t(e),i=Jn.encode(n.byteLength),s=Jn.encode(t.length),a=Jn.encode(r.length);return new ur(i,n,s,t,a,r)};function Il(e,t){let r=(n,i)=>n.toString().localeCompare(i.toString());return e.length!==t.length?!1:(t.sort(r),e.sort(r).every((n,i)=>t[i].equals(n)))}var jn;(function(e){let t;(function(n){let i;n.codec=()=>(i==null&&(i=Ot((s,a,o={})=>{o.lengthDelimited!==!1&&a.fork(),(o.writeDefaults===!0||s.multiaddr!=null&&s.multiaddr.byteLength>0)&&(a.uint32(10),a.bytes(s.multiaddr)),o.lengthDelimited!==!1&&a.ldelim()},(s,a)=>{let o={multiaddr:new Uint8Array(0)},c=a==null?s.len:s.pos+a;for(;s.pos<c;){let u=s.uint32();switch(u>>>3){case 1:o.multiaddr=s.bytes();break;default:s.skipType(u&7);break}}return o})),i),n.encode=s=>Kt(s,n.codec()),n.decode=s=>Ut(s,n.codec())})(t=e.AddressInfo||(e.AddressInfo={}));let r;e.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),(s.writeDefaults===!0||n.peerId!=null&&n.peerId.byteLength>0)&&(i.uint32(10),i.bytes(n.peerId)),(s.writeDefaults===!0||n.seq!==0n)&&(i.uint32(16),i.uint64(n.seq)),n.addresses!=null)for(let a of n.addresses)i.uint32(26),e.AddressInfo.codec().encode(a,i,{writeDefaults:!0});s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{let s={peerId:new Uint8Array(0),seq:0n,addresses:[]},a=i==null?n.len:n.pos+i;for(;n.pos<a;){let o=n.uint32();switch(o>>>3){case 1:s.peerId=n.bytes();break;case 2:s.seq=n.uint64();break;case 3:s.addresses.push(e.AddressInfo.codec().decode(n,n.uint32()));break;default:n.skipType(o&7);break}}return s})),r),e.encode=n=>Kt(n,e.codec()),e.decode=n=>Ut(n,e.codec())})(jn||(jn={}));var Rl="libp2p-peer-record",kl=Uint8Array.from([3,1]);var Yt=class{constructor(t){this.domain=Yt.DOMAIN,this.codec=Yt.CODEC;let{peerId:r,multiaddrs:n,seqNumber:i}=t;this.peerId=r,this.multiaddrs=n??[],this.seqNumber=i??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=jn.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(t=>({multiaddr:t.bytes}))})),this.marshaled}equals(t){return!(!(t instanceof Yt)||!this.peerId.equals(t.peerId)||this.seqNumber!==t.seqNumber||!Il(this.multiaddrs,t.multiaddrs))}};Yt.createFromProtobuf=e=>{let t=jn.decode(e),r=Xn(t.peerId),n=(t.addresses??[]).map(s=>Cn(s.multiaddr)),i=t.seq;return new Yt({peerId:r,multiaddrs:n,seqNumber:i})};Yt.DOMAIN=Rl;Yt.CODEC=kl;var is=class{constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){let t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return this.buffer[this.btm]===void 0}},gn=class{constructor(t={}){this.hwm=t.splitLimit??16,this.head=new is(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return t?.byteLength!=null?t.byteLength:1}push(t){if(t?.value!=null&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){let r=this.head;this.head=r.next=new is(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(t===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return t?.value!=null&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}};function ss(e={}){return im(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},e)}function im(e,t){t=t??{};let r=t.onEnd,n=new gn,i,s,a,o=async()=>n.isEmpty()?a?{done:!0}:await new Promise((p,x)=>{s=v=>{s=null,n.push(v);try{p(e(n))}catch(A){x(A)}return i}}):e(n),c=p=>s!=null?s(p):(n.push(p),i),u=p=>(n=new gn,s!=null?s({error:p}):(n.push({error:p}),i)),f=p=>{if(a)return i;if(t?.objectMode!==!0&&p?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:p})},l=p=>a?i:(a=!0,p!=null?u(p):c({done:!0})),h=()=>(n=new gn,l(),{done:!0}),y=p=>(l(p),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:o,return:h,throw:y,push:f,end:l,get readableLength(){return n.size}},r==null)return i;let d=i;return i={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(p){return d.throw(p),r!=null&&(r(p),r=void 0),{done:!0}},return(){return d.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(p){return d.end(p),r!=null&&(r(p),r=void 0),i},get readableLength(){return d.readableLength}},i}async function*Io(...e){let t=ss({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(e.map(async r=>{for await(let n of r)t.push(n)})),t.end()}catch(r){t.end(r)}}),yield*t}var sm=(...e)=>{let t;for(;e.length>0;)t=e.shift()(t);return t},Nl=e=>e!=null&&(typeof e[Symbol.asyncIterator]=="function"||typeof e[Symbol.iterator]=="function"||typeof e.next=="function"),Ro=e=>e!=null&&typeof e.sink=="function"&&Nl(e.source),am=e=>t=>{let r=e.sink(t);if(r.then!=null){let n=ss({objectMode:!0});return r.then(()=>{n.end()},s=>{n.end(s)}),Io(n,async function*(){yield*e.source,n.end()}())}return e.source};function Ll(e,...t){if(Ro(e)){let n=e;e=()=>n.source}else if(Nl(e)){let n=e;e=()=>n}let r=[e,...t];if(r.length>1&&Ro(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)Ro(r[n])&&(r[n]=am(r[n]));return sm(...r)}async function ko(e){let t=[];for await(let r of e)t.push(r);return t}async function*No(e,t){for await(let r of e)await t(r)&&(yield r)}async function*Lo(e,t){for await(let r of e)yield t(r)}async function*Po(e,t){for await(let r of e)await t(r),yield r}var et=se("libp2p:peer-store:address-book"),as="change:multiaddrs";async function om(){return!0}var cs=class{constructor(t,r,n){this.dispatchEvent=t,this.store=r,this.addressFilter=n??om}async consumePeerRecord(t){et.trace("consumePeerRecord await write lock");let r=await this.store.lock.writeLock();et.trace("consumePeerRecord got write lock");let n,i,s;try{let a;try{a=Yt.createFromProtobuf(t.payload)}catch{return et.error("invalid peer record received"),!1}n=a.peerId;let o=a.multiaddrs;if(!n.equals(t.peerId))return et("signing key does not match PeerId in the PeerRecord"),!1;if(o==null||o.length===0)return!1;if(await this.store.has(n)&&(i=await this.store.load(n),i.peerRecordEnvelope!=null)){let u=await re.createFromProtobuf(i.peerRecordEnvelope),f=Yt.createFromProtobuf(u.payload);if(f.seqNumber>=a.seqNumber)return et("sequence number was lower or equal to existing sequence number - stored: %d received: %d",f.seqNumber,a.seqNumber),!1}let c=await Do(n,o,this.addressFilter,!0);s=await this.store.patchOrCreate(n,{addresses:c,peerRecordEnvelope:t.marshal().subarray()}),et("stored provided peer record for %p",a.peerId)}finally{et.trace("consumePeerRecord release write lock"),r()}return this.dispatchEvent(new wt(as,{detail:{peerId:n,multiaddrs:s.addresses.map(({multiaddr:a})=>a),oldMultiaddrs:i==null?[]:i.addresses.map(({multiaddr:a})=>a)}})),!0}async getRawEnvelope(t){et.trace("getRawEnvelope await read lock");let r=await this.store.lock.readLock();et.trace("getRawEnvelope got read lock");try{return(await this.store.load(t)).peerRecordEnvelope}catch(n){if(n.code!==M.ERR_NOT_FOUND)throw n}finally{et.trace("getRawEnvelope release read lock"),r()}}async getPeerRecord(t){let r=await this.getRawEnvelope(t);if(r!=null)return await re.createFromProtobuf(r)}async get(t){t=mt(t),et.trace("get wait for read lock");let r=await this.store.lock.readLock();et.trace("get got read lock");try{return(await this.store.load(t)).addresses}catch(n){if(n.code!==M.ERR_NOT_FOUND)throw n}finally{et.trace("get release read lock"),r()}return[]}async set(t,r){if(t=mt(t),!Array.isArray(r))throw et.error("multiaddrs must be an array of Multiaddrs"),(0,os.default)(new Error("multiaddrs must be an array of Multiaddrs"),M.ERR_INVALID_PARAMETERS);et.trace("set await write lock");let n=await this.store.lock.writeLock();et.trace("set got write lock");let i=!1,s,a;try{let o=await Do(t,r,this.addressFilter);if(o.length===0)return;try{if(s=await this.store.load(t),i=!0,new Set([...o.map(({multiaddr:c})=>c.toString()),...s.addresses.map(({multiaddr:c})=>c.toString())]).size===s.addresses.length&&o.length===s.addresses.length)return}catch(c){if(c.code!==M.ERR_NOT_FOUND)throw c}a=await this.store.patchOrCreate(t,{addresses:o}),et("set multiaddrs for %p",t)}finally{et.trace("set multiaddrs for %p",t),et("set release write lock"),n()}this.dispatchEvent(new wt(as,{detail:{peerId:t,multiaddrs:a.addresses.map(o=>o.multiaddr),oldMultiaddrs:s==null?[]:s.addresses.map(({multiaddr:o})=>o)}})),i||this.dispatchEvent(new wt("peer",{detail:{id:t,multiaddrs:a.addresses.map(o=>o.multiaddr),protocols:a.protocols}}))}async add(t,r){if(t=mt(t),!Array.isArray(r))throw et.error("multiaddrs must be an array of Multiaddrs"),(0,os.default)(new Error("multiaddrs must be an array of Multiaddrs"),M.ERR_INVALID_PARAMETERS);et.trace("add await write lock");let n=await this.store.lock.writeLock();et.trace("add got write lock");let i,s,a;try{let o=await Do(t,r,this.addressFilter);if(o.length===0)return;try{if(s=await this.store.load(t),i=!0,new Set([...o.map(({multiaddr:c})=>c.toString()),...s.addresses.map(({multiaddr:c})=>c.toString())]).size===s.addresses.length)return}catch(c){if(c.code!==M.ERR_NOT_FOUND)throw c}a=await this.store.mergeOrCreate(t,{addresses:o}),et("added multiaddrs for %p",t)}finally{et.trace("set release write lock"),n()}this.dispatchEvent(new wt(as,{detail:{peerId:t,multiaddrs:a.addresses.map(o=>o.multiaddr),oldMultiaddrs:s==null?[]:s.addresses.map(({multiaddr:o})=>o)}})),i===!0&&this.dispatchEvent(new wt("peer",{detail:{id:t,multiaddrs:a.addresses.map(o=>o.multiaddr),protocols:a.protocols}}))}async delete(t){t=mt(t),et.trace("delete await write lock");let r=await this.store.lock.writeLock();et.trace("delete got write lock");let n;try{try{n=await this.store.load(t)}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i}await this.store.patchOrCreate(t,{addresses:[]})}finally{et.trace("delete release write lock"),r()}n!=null&&this.dispatchEvent(new wt(as,{detail:{peerId:t,multiaddrs:[],oldMultiaddrs:n==null?[]:n.addresses.map(({multiaddr:i})=>i)}}))}};async function Do(e,t,r,n=!1){return await Ll(t,i=>Po(i,s=>{if(!pa(s))throw et.error("multiaddr must be an instance of Multiaddr"),(0,os.default)(new Error("multiaddr must be an instance of Multiaddr"),M.ERR_INVALID_PARAMETERS)}),i=>No(i,async s=>await r(e,s)),i=>Lo(i,s=>({multiaddr:s,isCertified:n})),async i=>await ko(i))}var Dl=K(bt(),1);var Pe=se("libp2p:peer-store:key-book"),Pl="change:pubkey",us=class{constructor(t,r){this.dispatchEvent=t,this.store=r}async set(t,r){if(t=mt(t),!(r instanceof Uint8Array))throw Pe.error("publicKey must be an instance of Uint8Array to store data"),(0,Dl.default)(new Error("publicKey must be an instance of PublicKey"),M.ERR_INVALID_PARAMETERS);Pe.trace("set await write lock");let n=await this.store.lock.writeLock();Pe.trace("set got write lock");let i=!1,s;try{try{if(s=await this.store.load(t),s.pubKey!=null&&it(s.pubKey,r))return}catch(a){if(a.code!==M.ERR_NOT_FOUND)throw a}await this.store.patchOrCreate(t,{pubKey:r}),i=!0}finally{Pe.trace("set release write lock"),n()}i&&this.dispatchEvent(new wt(Pl,{detail:{peerId:t,publicKey:r,oldPublicKey:s?.pubKey}}))}async get(t){t=mt(t),Pe.trace("get await write lock");let r=await this.store.lock.readLock();Pe.trace("get got write lock");try{return(await this.store.load(t)).pubKey}catch(n){if(n.code!==M.ERR_NOT_FOUND)throw n}finally{Pe("get release write lock"),r()}}async delete(t){t=mt(t),Pe.trace("delete await write lock");let r=await this.store.lock.writeLock();Pe.trace("delete got write lock");let n;try{try{n=await this.store.load(t)}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i}await this.store.patchOrCreate(t,{pubKey:void 0})}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i}finally{Pe.trace("delete release write lock"),r()}this.dispatchEvent(new wt(Pl,{detail:{peerId:t,publicKey:void 0,oldPublicKey:n?.pubKey}}))}};var Uo=K(bt(),1);var At=se("libp2p:peer-store:metadata-book"),fs="change:metadata",ls=class{constructor(t,r){this.dispatchEvent=t,this.store=r}async get(t){t=mt(t),At.trace("get await read lock");let r=await this.store.lock.readLock();At.trace("get got read lock");try{return(await this.store.load(t)).metadata}catch(n){if(n.code!==M.ERR_NOT_FOUND)throw n}finally{At.trace("get release read lock"),r()}return new Map}async getValue(t,r){t=mt(t),At.trace("getValue await read lock");let n=await this.store.lock.readLock();At.trace("getValue got read lock");try{return(await this.store.load(t)).metadata.get(r)}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i}finally{At.trace("getValue release write lock"),n()}}async set(t,r){if(t=mt(t),!(r instanceof Map))throw At.error("valid metadata must be provided to store data"),(0,Uo.default)(new Error("valid metadata must be provided"),M.ERR_INVALID_PARAMETERS);At.trace("set await write lock");let n=await this.store.lock.writeLock();At.trace("set got write lock");let i;try{try{i=await this.store.load(t)}catch(s){if(s.code!==M.ERR_NOT_FOUND)throw s}await this.store.mergeOrCreate(t,{metadata:r})}finally{At.trace("set release write lock"),n()}this.dispatchEvent(new wt(fs,{detail:{peerId:t,metadata:r,oldMetadata:i==null?new Map:i.metadata}}))}async setValue(t,r,n){if(t=mt(t),typeof r!="string"||!(n instanceof Uint8Array))throw At.error("valid key and value must be provided to store data"),(0,Uo.default)(new Error("valid key and value must be provided"),M.ERR_INVALID_PARAMETERS);At.trace("setValue await write lock");let i=await this.store.lock.writeLock();At.trace("setValue got write lock");let s,a;try{try{s=await this.store.load(t);let o=s.metadata.get(r);if(o!=null&&it(n,o))return}catch(o){if(o.code!==M.ERR_NOT_FOUND)throw o}a=await this.store.mergeOrCreate(t,{metadata:new Map([[r,n]])})}finally{At.trace("setValue release write lock"),i()}this.dispatchEvent(new wt(fs,{detail:{peerId:t,metadata:a.metadata,oldMetadata:s==null?new Map:s.metadata}}))}async delete(t){t=mt(t),At.trace("delete await write lock");let r=await this.store.lock.writeLock();At.trace("delete got write lock");let n;try{try{n=await this.store.load(t)}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i}n!=null&&await this.store.patch(t,{metadata:new Map})}finally{At.trace("delete release write lock"),r()}n!=null&&this.dispatchEvent(new wt(fs,{detail:{peerId:t,metadata:new Map,oldMetadata:n.metadata}}))}async deleteValue(t,r){t=mt(t),At.trace("deleteValue await write lock");let n=await this.store.lock.writeLock();At.trace("deleteValue got write lock");let i,s;try{s=await this.store.load(t),i=s.metadata,i.delete(r),await this.store.patch(t,{metadata:i})}catch(a){if(a.code!==M.ERR_NOT_FOUND)throw a}finally{At.trace("deleteValue release write lock"),n()}i!=null&&this.dispatchEvent(new wt(fs,{detail:{peerId:t,metadata:i,oldMetadata:s==null?new Map:s.metadata}}))}};var ds=K(bt(),1);var Bt=se("libp2p:peer-store:proto-book"),hs="change:protocols",ps=class{constructor(t,r){this.dispatchEvent=t,this.store=r}async get(t){Bt.trace("get wait for read lock");let r=await this.store.lock.readLock();Bt.trace("get got read lock");try{return(await this.store.load(t)).protocols}catch(n){if(n.code!==M.ERR_NOT_FOUND)throw n}finally{Bt.trace("get release read lock"),r()}return[]}async set(t,r){if(t=mt(t),!Array.isArray(r))throw Bt.error("protocols must be provided to store data"),(0,ds.default)(new Error("protocols must be provided"),M.ERR_INVALID_PARAMETERS);Bt.trace("set await write lock");let n=await this.store.lock.writeLock();Bt.trace("set got write lock");let i,s;try{try{if(i=await this.store.load(t),new Set([...r]).size===i.protocols.length)return}catch(a){if(a.code!==M.ERR_NOT_FOUND)throw a}s=await this.store.patchOrCreate(t,{protocols:r}),Bt("stored provided protocols for %p",t)}finally{Bt.trace("set release write lock"),n()}this.dispatchEvent(new wt(hs,{detail:{peerId:t,protocols:s.protocols,oldProtocols:i==null?[]:i.protocols}}))}async add(t,r){if(t=mt(t),!Array.isArray(r))throw Bt.error("protocols must be provided to store data"),(0,ds.default)(new Error("protocols must be provided"),M.ERR_INVALID_PARAMETERS);Bt.trace("add await write lock");let n=await this.store.lock.writeLock();Bt.trace("add got write lock");let i,s;try{try{if(i=await this.store.load(t),new Set([...i.protocols,...r]).size===i.protocols.length)return}catch(a){if(a.code!==M.ERR_NOT_FOUND)throw a}s=await this.store.mergeOrCreate(t,{protocols:r}),Bt("added provided protocols for %p",t)}finally{Bt.trace("add release write lock"),n()}this.dispatchEvent(new wt(hs,{detail:{peerId:t,protocols:s.protocols,oldProtocols:i==null?[]:i.protocols}}))}async remove(t,r){if(t=mt(t),!Array.isArray(r))throw Bt.error("protocols must be provided to store data"),(0,ds.default)(new Error("protocols must be provided"),M.ERR_INVALID_PARAMETERS);Bt.trace("remove await write lock");let n=await this.store.lock.writeLock();Bt.trace("remove got write lock");let i,s;try{try{i=await this.store.load(t);let a=new Set(i.protocols);for(let o of r)a.delete(o);if(i.protocols.length===a.size)return;r=Array.from(a)}catch(a){if(a.code!==M.ERR_NOT_FOUND)throw a}s=await this.store.patchOrCreate(t,{protocols:r})}finally{Bt.trace("remove release write lock"),n()}this.dispatchEvent(new wt(hs,{detail:{peerId:t,protocols:s.protocols,oldProtocols:i==null?[]:i.protocols}}))}async delete(t){t=mt(t),Bt.trace("delete await write lock");let r=await this.store.lock.writeLock();Bt.trace("delete got write lock");let n;try{try{n=await this.store.load(t)}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i}await this.store.patchOrCreate(t,{protocols:[]})}finally{Bt.trace("delete release write lock"),r()}n!=null&&this.dispatchEvent(new wt(hs,{detail:{peerId:t,protocols:[],oldProtocols:n.protocols}}))}};var r0=K(bt(),1);var ys=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var We="/",Ul=new TextEncoder().encode(We),gs=Ul[0],Ft=class{constructor(t,r){if(typeof t=="string")this._buf=_t(t);else if(t instanceof Uint8Array)this._buf=t;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==gs)throw new Error("Invalid key")}toString(t="utf8"){return J(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new Ft(t.join(We))}static random(){return new Ft(ys().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||typeof t=="string"?new Ft(t):typeof t.uint8Array=="function"?new Ft(t.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Ul),this._buf[0]!==gs){let t=new Uint8Array(this._buf.byteLength+1);t.fill(gs,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===gs;)this._buf=this._buf.subarray(0,-1)}less(t){let r=this.list(),n=t.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let s=r[i],a=n[i];if(s<a)return!0;if(s>a)return!1}return r.length<n.length}reverse(){return Ft.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(We).slice(1)}type(){return cm(this.baseNamespace())}name(){return um(this.baseNamespace())}instance(t){return new Ft(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(We)||(t+=We),t+=this.type(),new Ft(t)}parent(){let t=this.list();return t.length===1?new Ft(We):new Ft(t.slice(0,-1).join(We))}child(t){return this.toString()===We?t:t.toString()===We?this:new Ft(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()===this.toString()?!1:t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()===this.toString()?!1:this.toString().startsWith(t.toString())}isTopLevel(){return this.list().length===1}concat(...t){return Ft.withNamespaces([...this.namespaces(),...fm(t.map(r=>r.namespaces()))])}};function cm(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function um(e){let t=e.split(":");return t[t.length-1]}function fm(e){return[].concat(...e)}var ti;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.addresses!=null)for(let s of r.addresses)n.uint32(10),ms.codec().encode(s,n,{writeDefaults:!0});if(r.protocols!=null)for(let s of r.protocols)n.uint32(18),n.string(s);if(r.metadata!=null)for(let s of r.metadata)n.uint32(26),xs.codec().encode(s,n,{writeDefaults:!0});r.pubKey!=null&&(n.uint32(34),n.bytes(r.pubKey)),r.peerRecordEnvelope!=null&&(n.uint32(42),n.bytes(r.peerRecordEnvelope)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={addresses:[],protocols:[],metadata:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.addresses.push(ms.codec().decode(r,r.uint32()));break;case 2:i.protocols.push(r.string());break;case 3:i.metadata.push(xs.codec().decode(r,r.uint32()));break;case 4:i.pubKey=r.bytes();break;case 5:i.peerRecordEnvelope=r.bytes();break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})(ti||(ti={}));var ms;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.multiaddr!=null&&r.multiaddr.byteLength>0)&&(n.uint32(10),n.bytes(r.multiaddr)),r.isCertified!=null&&(n.uint32(16),n.bool(r.isCertified)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={multiaddr:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.multiaddr=r.bytes();break;case 2:i.isCertified=r.bool();break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})(ms||(ms={}));var xs;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.key!=="")&&(n.uint32(10),n.string(r.key)),(i.writeDefaults===!0||r.value!=null&&r.value.byteLength>0)&&(n.uint32(18),n.bytes(r.value)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={key:"",value:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.key=r.string();break;case 2:i.value=r.bytes();break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})(xs||(xs={}));var Ql=K(Ol(),1);var ri=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},Oo=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},Fl=e=>globalThis.DOMException===void 0?new Oo(e):new DOMException(e),Ml=e=>{let t=e.reason===void 0?Fl("This operation was aborted."):e.reason;return t instanceof Error?t:Fl(t)};function Fo(e,t,r,n){let i,s=new Promise((a,o)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){a(e);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:c}=n;c.aborted&&o(Ml(c)),c.addEventListener("abort",()=>{o(Ml(c))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{a(r())}catch(f){o(f)}return}let c=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,u=r instanceof Error?r:new ri(c);typeof e.cancel=="function"&&e.cancel(),o(u)},t),(async()=>{try{a(await e)}catch(c){o(c)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return s.clear=()=>{clearTimeout(i),i=void 0},s}function Mo(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),a=n+s;r(e[a],t)<=0?(n=++a,i-=s+1):i=s}return n}var Ur=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Qe,ni=class{constructor(){Qe.set(this,[])}enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&Ur(this,Qe,"f")[this.size-1].priority>=r.priority){Ur(this,Qe,"f").push(n);return}let i=Mo(Ur(this,Qe,"f"),n,(s,a)=>a.priority-s.priority);Ur(this,Qe,"f").splice(i,0,n)}dequeue(){let t=Ur(this,Qe,"f").shift();return t?.run}filter(t){return Ur(this,Qe,"f").filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return Ur(this,Qe,"f").length}};Qe=new WeakMap;var dt=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},k=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},xt,si,ai,lr,Bs,oi,ws,xe,ii,ne,bs,ie,ci,fr,Es,Vl,ql,Wl,zl,Hl,Gl,Ss,Vo,qo,Cs,As,dm=new ri,zo=class extends Error{},mn=class extends Ql.default{constructor(t){var r,n,i,s;if(super(),xt.add(this),si.set(this,void 0),ai.set(this,void 0),lr.set(this,0),Bs.set(this,void 0),oi.set(this,void 0),ws.set(this,0),xe.set(this,void 0),ii.set(this,void 0),ne.set(this,void 0),bs.set(this,void 0),ie.set(this,0),ci.set(this,void 0),fr.set(this,void 0),Es.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:ni,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof t.interval})`);dt(this,si,t.carryoverConcurrencyCount,"f"),dt(this,ai,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,"f"),dt(this,Bs,t.intervalCap,"f"),dt(this,oi,t.interval,"f"),dt(this,ne,new t.queueClass,"f"),dt(this,bs,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,dt(this,Es,t.throwOnTimeout===!0,"f"),dt(this,fr,t.autoStart===!1,"f")}get concurrency(){return k(this,ci,"f")}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);dt(this,ci,t,"f"),k(this,xt,"m",Cs).call(this)}async add(t,r={}){return new Promise((n,i)=>{let s=async()=>{var a,o,c;dt(this,ie,(o=k(this,ie,"f"),o++,o),"f"),dt(this,lr,(c=k(this,lr,"f"),c++,c),"f");try{if(!((a=r.signal)===null||a===void 0)&&a.aborted){i(new zo("The task was aborted."));return}let f=await(this.timeout===void 0&&r.timeout===void 0?t({signal:r.signal}):Fo(Promise.resolve(t({signal:r.signal})),r.timeout===void 0?this.timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?k(this,Es,"f"):r.throwOnTimeout)&&i(dm)}));n(f),this.emit("completed",f)}catch(u){i(u),this.emit("error",u)}k(this,xt,"m",Wl).call(this)};k(this,ne,"f").enqueue(s,r),k(this,xt,"m",Ss).call(this),this.emit("add")})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return k(this,fr,"f")?(dt(this,fr,!1,"f"),k(this,xt,"m",Cs).call(this),this):this}pause(){dt(this,fr,!0,"f")}clear(){dt(this,ne,new(k(this,bs,"f")),"f")}async onEmpty(){k(this,ne,"f").size!==0&&await k(this,xt,"m",As).call(this,"empty")}async onSizeLessThan(t){k(this,ne,"f").size<t||await k(this,xt,"m",As).call(this,"next",()=>k(this,ne,"f").size<t)}async onIdle(){k(this,ie,"f")===0&&k(this,ne,"f").size===0||await k(this,xt,"m",As).call(this,"idle")}get size(){return k(this,ne,"f").size}sizeBy(t){return k(this,ne,"f").filter(t).length}get pending(){return k(this,ie,"f")}get isPaused(){return k(this,fr,"f")}};si=new WeakMap,ai=new WeakMap,lr=new WeakMap,Bs=new WeakMap,oi=new WeakMap,ws=new WeakMap,xe=new WeakMap,ii=new WeakMap,ne=new WeakMap,bs=new WeakMap,ie=new WeakMap,ci=new WeakMap,fr=new WeakMap,Es=new WeakMap,xt=new WeakSet,Vl=function(){return k(this,ai,"f")||k(this,lr,"f")<k(this,Bs,"f")},ql=function(){return k(this,ie,"f")<k(this,ci,"f")},Wl=function(){var t;dt(this,ie,(t=k(this,ie,"f"),t--,t),"f"),k(this,xt,"m",Ss).call(this),this.emit("next")},zl=function(){this.emit("empty"),k(this,ie,"f")===0&&this.emit("idle")},Hl=function(){k(this,xt,"m",qo).call(this),k(this,xt,"m",Vo).call(this),dt(this,ii,void 0,"f")},Gl=function(){let t=Date.now();if(k(this,xe,"f")===void 0){let r=k(this,ws,"f")-t;if(r<0)dt(this,lr,k(this,si,"f")?k(this,ie,"f"):0,"f");else return k(this,ii,"f")===void 0&&dt(this,ii,setTimeout(()=>{k(this,xt,"m",Hl).call(this)},r),"f"),!0}return!1},Ss=function(){if(k(this,ne,"f").size===0)return k(this,xe,"f")&&clearInterval(k(this,xe,"f")),dt(this,xe,void 0,"f"),k(this,xt,"m",zl).call(this),!1;if(!k(this,fr,"f")){let t=!k(this,xt,"a",Gl);if(k(this,xt,"a",Vl)&&k(this,xt,"a",ql)){let r=k(this,ne,"f").dequeue();return r?(this.emit("active"),r(),t&&k(this,xt,"m",Vo).call(this),!0):!1}}return!1},Vo=function(){k(this,ai,"f")||k(this,xe,"f")!==void 0||(dt(this,xe,setInterval(()=>{k(this,xt,"m",qo).call(this)},k(this,oi,"f")),"f"),dt(this,ws,Date.now()+k(this,oi,"f"),"f"))},qo=function(){k(this,lr,"f")===0&&k(this,ie,"f")===0&&k(this,xe,"f")&&(clearInterval(k(this,xe,"f")),dt(this,xe,void 0,"f")),dt(this,lr,k(this,si,"f")?k(this,ie,"f"):0,"f"),k(this,xt,"m",Cs).call(this)},Cs=function(){for(;k(this,xt,"m",Ss).call(this););},As=async function(t,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(t,i),n())};this.on(t,i)})};var Ho=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},Go=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},$l=e=>globalThis.DOMException===void 0?new Go(e):new DOMException(e),Yl=e=>{let t=e.reason===void 0?$l("This operation was aborted."):e.reason;return t instanceof Error?t:$l(t)};function Wo(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=t,a,o=new Promise((c,u)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r===Number.POSITIVE_INFINITY){c(e);return}if(t.signal){let{signal:f}=t;f.aborted&&u(Yl(f)),f.addEventListener("abort",()=>{u(Yl(f))})}a=s.setTimeout.call(void 0,()=>{if(n){try{c(n())}catch(h){u(h)}return}let f=typeof i=="string"?i:`Promise timed out after ${r} milliseconds`,l=i instanceof Error?i:new Ho(f);typeof e.cancel=="function"&&e.cancel(),u(l)},r),(async()=>{try{c(await e)}catch(f){u(f)}finally{s.clearTimeout.call(void 0,a)}})()});return o.clear=()=>{s.clearTimeout.call(void 0,a),a=void 0},o}var Qo="lock:worker:request-read",$o="lock:worker:release-read",Yo="lock:master:grant-read",Zo="lock:worker:request-write",Xo="lock:worker:release-write",Jo="lock:master:grant-write";var hr={},xn=e=>{e.addEventListener("message",t=>{xn.dispatchEvent("message",e,t)}),e.port!=null&&e.port.addEventListener("message",t=>{xn.dispatchEvent("message",e,t)})};xn.addEventListener=(e,t)=>{hr[e]==null&&(hr[e]=[]),hr[e].push(t)};xn.removeEventListener=(e,t)=>{hr[e]!=null&&(hr[e]=hr[e].filter(r=>r===t))};xn.dispatchEvent=function(e,t,r){hr[e]!=null&&hr[e].forEach(n=>n(t,r))};var jo=xn;var Zl=(e,t,r,n,i)=>(s,a)=>{if(a.data.type!==r)return;let o={type:a.data.type,name:a.data.name,identifier:a.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:o.name,handler:async()=>(s.postMessage({type:i,name:o.name,identifier:o.identifier}),await new Promise(c=>{let u=f=>{if(f==null||f.data==null)return;let l={type:f.data.type,name:f.data.name,identifier:f.data.identifier};l.type===n&&l.identifier===o.identifier&&(s.removeEventListener("message",u),c())};s.addEventListener("message",u)}))}}))},Xl=(e,t,r,n)=>async()=>{let i=ys();return globalThis.postMessage({type:t,identifier:i,name:e}),await new Promise(s=>{let a=o=>{if(o==null||o.data==null)return;let c={type:o.data.type,identifier:o.data.identifier};c.type===r&&c.identifier===i&&(globalThis.removeEventListener("message",a),s(()=>{globalThis.postMessage({type:n,identifier:i,name:e})}))};globalThis.addEventListener("message",a)})},pm={singleProcess:!1},Jl=e=>{if(e=Object.assign({},pm,e),Boolean(globalThis.document)||e.singleProcess){let r=new EventTarget;return jo.addEventListener("message",Zl(r,"requestReadLock",Qo,$o,Yo)),jo.addEventListener("message",Zl(r,"requestWriteLock",Zo,Xo,Jo)),r}return{isWorker:!0,readLock:r=>Xl(r,Qo,Yo,$o),writeLock:r=>Xl(r,Zo,Jo,Xo)}};var Kr={},dr;async function t0(e,t){let r,n=new Promise(i=>{r=i});return e.add(async()=>await Wo((async()=>await new Promise(i=>{r(()=>{i()})}))(),{milliseconds:t.timeout})),await n}var ym=(e,t)=>{if(dr.isWorker===!0)return{readLock:dr.readLock(e,t),writeLock:dr.writeLock(e,t)};let r=new mn({concurrency:1}),n;return{async readLock(){if(n!=null)return await t0(n,t);n=new mn({concurrency:t.concurrency,autoStart:!1});let i=n,s=t0(n,t);return r.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await s},async writeLock(){return n=null,await t0(r,t)}}},gm={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function e0(e){let t=Object.assign({},gm,e);return dr==null&&(dr=Jl(t),dr.isWorker!==!0&&(dr.addEventListener("requestReadLock",r=>{Kr[r.data.name]!=null&&Kr[r.data.name].readLock().then(async n=>await r.data.handler().finally(()=>n()))}),dr.addEventListener("requestWriteLock",async r=>{Kr[r.data.name]!=null&&Kr[r.data.name].writeLock().then(async n=>await r.data.handler().finally(()=>n()))}))),Kr[t.name]==null&&(Kr[t.name]=ym(t.name,t)),Kr[t.name]}var jl=se("libp2p:peer-store:store"),th="/peers/",_s=class{constructor(t){this.components=t,this.lock=e0({name:"peer-store",singleProcess:!0})}_peerIdToDatastoreKey(t){if(t.type==null)throw jl.error("peerId must be an instance of peer-id to store data"),(0,r0.default)(new Error("peerId must be an instance of peer-id"),M.ERR_INVALID_PARAMETERS);let r=t.toCID().toString();return new Ft(`${th}${r}`)}async has(t){return await this.components.datastore.has(this._peerIdToDatastoreKey(t))}async delete(t){await this.components.datastore.delete(this._peerIdToDatastoreKey(t))}async load(t){let r=await this.components.datastore.get(this._peerIdToDatastoreKey(t)),n=ti.decode(r),i=new Map;for(let s of n.metadata)i.set(s.key,s.value);return{...n,id:t,addresses:n.addresses.map(({multiaddr:s,isCertified:a})=>({multiaddr:Cn(s),isCertified:a??!1})),metadata:i,pubKey:n.pubKey??void 0,peerRecordEnvelope:n.peerRecordEnvelope??void 0}}async save(t){if(t.pubKey!=null&&t.id.publicKey!=null&&!it(t.pubKey,t.id.publicKey))throw jl.error("peer publicKey bytes do not match peer id publicKey bytes"),(0,r0.default)(new Error("publicKey bytes do not match peer id publicKey bytes"),M.ERR_INVALID_PARAMETERS);let r=new Set,n=t.addresses.filter(a=>r.has(a.multiaddr.toString())?!1:(r.add(a.multiaddr.toString()),!0)).sort((a,o)=>a.multiaddr.toString().localeCompare(o.multiaddr.toString())).map(({multiaddr:a,isCertified:o})=>({multiaddr:a.bytes,isCertified:o})),i=[];[...t.metadata.keys()].sort().forEach(a=>{let o=t.metadata.get(a);o!=null&&i.push({key:a,value:o})});let s=ti.encode({addresses:n,protocols:t.protocols.sort(),pubKey:t.pubKey,metadata:i,peerRecordEnvelope:t.peerRecordEnvelope});return await this.components.datastore.put(this._peerIdToDatastoreKey(t.id),s.subarray()),await this.load(t.id)}async patch(t,r){let n=await this.load(t);return await this._patch(t,r,n)}async patchOrCreate(t,r){let n;try{n=await this.load(t)}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i;n={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._patch(t,r,n)}async _patch(t,r,n){return await this.save({...n,...r,id:t})}async merge(t,r){let n=await this.load(t);return await this._merge(t,r,n)}async mergeOrCreate(t,r){let n;try{n=await this.load(t)}catch(i){if(i.code!==M.ERR_NOT_FOUND)throw i;n={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._merge(t,r,n)}async _merge(t,r,n){let i=new Map;return n.addresses.forEach(s=>{i.set(s.multiaddr.toString(),s.isCertified)}),(r.addresses??[]).forEach(s=>{let a=s.multiaddr.toString(),c=Boolean(i.get(a))||s.isCertified;i.set(a,c)}),await this.save({id:t,addresses:Array.from(i.entries()).map(([s,a])=>({multiaddr:Cn(s),isCertified:a})),protocols:Array.from(new Set([...n.protocols??[],...r.protocols??[]])),metadata:new Map([...n.metadata?.entries()??[],...r.metadata?.entries()??[]]),pubKey:r.pubKey??n?.pubKey,peerRecordEnvelope:r.peerRecordEnvelope??n?.peerRecordEnvelope})}async*all(){for await(let t of this.components.datastore.queryKeys({prefix:th})){let r=t.toString().split("/")[2],n=Jt.decode(r);yield this.load(Xn(n))}}};var n0=K(bt(),1);var $e;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.tags!=null)for(let s of r.tags)n.uint32(10),Ts.codec().encode(s,n,{writeDefaults:!0});i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={tags:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.tags.push(Ts.codec().decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})($e||($e={}));var Ts;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.name!=="")&&(n.uint32(10),n.string(r.name)),r.value!=null&&(n.uint32(16),n.uint32(r.value)),r.expiry!=null&&(n.uint32(24),n.uint64(r.expiry)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={name:""},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:i.name=r.string();break;case 2:i.value=r.uint32();break;case 3:i.expiry=r.uint64();break;default:r.skipType(a&7);break}}return i})),t),e.encode=r=>Kt(r,e.codec()),e.decode=r=>Ut(r,e.codec())})(Ts||(Ts={}));var fe=se("libp2p:peer-store"),i0=class extends di{constructor(t,r={}){super(),this.components=t,this.store=new _s(t),this.addressBook=new cs(this.dispatchEvent.bind(this),this.store,r.addressFilter),this.keyBook=new us(this.dispatchEvent.bind(this),this.store),this.metadataBook=new ls(this.dispatchEvent.bind(this),this.store),this.protoBook=new ps(this.dispatchEvent.bind(this),this.store)}async forEach(t){fe.trace("getPeers await read lock");let r=await this.store.lock.readLock();fe.trace("getPeers got read lock");try{for await(let n of this.store.all())n.id.equals(this.components.peerId)||t(n)}finally{fe.trace("getPeers release read lock"),r()}}async all(){let t=[];return await this.forEach(r=>{t.push(r)}),t}async delete(t){fe.trace("delete await write lock");let r=await this.store.lock.writeLock();fe.trace("delete got write lock");try{await this.store.delete(t)}finally{fe.trace("delete release write lock"),r()}}async get(t){fe.trace("get await read lock");let r=await this.store.lock.readLock();fe.trace("get got read lock");try{return await this.store.load(t)}finally{fe.trace("get release read lock"),r()}}async has(t){fe.trace("has await read lock");let r=await this.store.lock.readLock();fe.trace("has got read lock");try{return await this.store.has(t)}finally{fe.trace("has release read lock"),r()}}async tagPeer(t,r,n={}){let i=n.value??0,s=Math.round(i),a=n.ttl??void 0;if(s!==i||s<0||s>100)throw(0,n0.default)(new Error("Tag value must be between 0-100"),"ERR_TAG_VALUE_OUT_OF_BOUNDS");let o=await this.metadataBook.getValue(t,"tags"),c=[];o!=null&&(c=$e.decode(o).tags);for(let u of c)if(u.name===r)throw(0,n0.default)(new Error("Peer already tagged"),"ERR_DUPLICATE_TAG");c.push({name:r,value:s,expiry:a==null?void 0:BigInt(Date.now()+a)}),await this.metadataBook.setValue(t,"tags",$e.encode({tags:c}).subarray())}async unTagPeer(t,r){let n=await this.metadataBook.getValue(t,"tags"),i=[];n!=null&&(i=$e.decode(n).tags),i=i.filter(s=>s.name!==r),await this.metadataBook.setValue(t,"tags",$e.encode({tags:i}).subarray())}async getTags(t){let r=await this.metadataBook.getValue(t,"tags"),n=[];r!=null&&(n=$e.decode(r).tags);let i=BigInt(Date.now()),s=n.filter(a=>a.expiry==null||a.expiry>i);return s.length!==n.length&&await this.metadataBook.setValue(t,"tags",$e.encode({tags:s}).subarray()),s.map(a=>({name:a.name,value:a.value??0}))}};return ah(mm);})();
/*! Bundled license information:

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
return Libp2PPeerStore}));
